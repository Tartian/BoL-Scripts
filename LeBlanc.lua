if myHero.charName:lower() ~= "leblanc" then return end
	_G.LeBlanc_Loaded = true
	_G.LeBlanc_ScriptVersion = 2.14
	_G.LeBlanc_Author = "Totally Legit"
	_G.LeBlanc_PerformAutoUpdate = true
	_G.LeBlanc_USEPACKETS = true

--[[



		Changelog
			* 1.99
				Improved Smart W
				Added Ignite Checks
				Added Overkill checks
				Fixed the combos
				Better TargetSelecting
				Better combo
				Better GapClosing

			* 2.00
				Script is now paid

			* 2.01
				Switched host
				Forced return W in harass

			* 2.02
				Multiple overkill checks
				Better way of detecting R
				Better gapclosing
				Faster combos
				Better targetselecting
				Message that tells whether you will die or not from ignite
				Auto Level
				Fixed the other killsteal options
				Better KillSteal in general
					Now takes Q buff in according

			* 2.03
				Bug fixes
				Small fix to W casting too fast
				Few more return checks for W

			* 2.04
				Small fixes

			* 2.10
				Improved Smart Combo
				Made more checks with W
					Added turret damage checking
					Added minion checks
				Fixed more stuff & added more checks to avoid possible script-caused crashes
				Added other combos
					GapClose combo
					Chain Combo
						Chains will maximize the slow/stun output
						Prioritizes E -> R over anything
						It'll do R -> Q if E isn't close to being up
				Improved Overkill checks

			* 2.11
				Minor fixes
				Added SPred

			* 2.12
				Updated to 5.15

			* 2.13
				Updated DP API
				Updated W values
				Fix'd minor bugs

			* 2.14
				Fixed compability with Dancing Shoes

--]]


assert(load(Base64Decode("ZnVuY3Rpb24gU2F5KGRkYSkNCiAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPlRvdGFsbHkgTGVCbGFuYzo8L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4iIC4u
IGRkYSAuLiAiPC9mb250PiIpDQplbmQNCmlmIG5vdCBWSVBfVVNFUiB0aGVuDQogIHJldHVybiBTYXkoIllvdSBuZWVkIHRvIGJlIFZJUCB0byB1c2UgdGhpcyBzY3JpcHQuIikNCmVuZA0KDQpp
ZiBub3QgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJWUHJlZGljdGlvbi5sdWEiKSBhbmQgKG5vdCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIkRpdmluZVByZWQubHVhIikgb3Igbm90IEZpbGVFeGlz
dChMSUJfUEFUSCAuLiAiRGl2aW5lUHJlZC5sdWFjIikpIGFuZCBub3QgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJIUHJlZGljdGlvbi5sdWEiKSB0aGVuDQogIFNheSgiWW91IG5lZWQgYXQgbGVh
c3Qgb25lIHByZWRpY3Rpb24gdG8gcnVuIHRoaXMgc2NyaXB0LiBIUHJlZGljdGlvbiB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZG93bmxvYWRlZC4gUGxlYXNlIHdhaXQuLi4iKQ0KICBEb3dubG9h
ZEZpbGUoImh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vQm9sSFRURi9Cb0wvbWFzdGVyL0hUVEYvQ29tbW9uL0hQcmVkaWN0aW9uLmx1YSIgLi4gIj9yYW5kPSIgLi4gbWF0aC5yYW5kb20oMSwgMTAw
MDApLCBMSUJfUEFUSCAuLiAiSFByZWRpY3Rpb24ubHVhIiwgZnVuY3Rpb24oKQ0KICAgIFNheSgiU3VjY2VzZnVsbHkgaW5zdGFsbGVkIEhQcmVkaWN0aW9uLiBQbGVhc2UgcmVsb2FkIGJ5IHBy
ZXNzaW5nIEY5IHR3aWNlLiIpDQogIGVuZCkNCiAgcmV0dXJuDQplbmQNCg0KU2F5KCJXZWxjb21lICIgLi4gR2V0VXNlcigpIC4uICI6IFBhaWQgdXNlciIpDQoNClNheSgiQXV0aCBieXBhc3Mg
Ynkga29rdWFueXUyMDAyIikNCg0KX0cuTGVibGFuY19pbml0aWFsaXplZCA9IHRydWUNCmlmIG5vdCBfRy5MZUJsYW5jX1VTRVBBQ0tFVFMgdGhlbg0KICBmdW5jdGlvbiBfRy5MZXZlbFNwZWxs
KCkNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIEF1dG9VcGRhdGUoKQ0KICBsb2NhbCBkZGEgPSB7fQ0KICBkZGEuVmVyc2lvbiA9IF9HLkxlQmxhbmNfU2NyaXB0VmVyc2lvbg0KICBkZGEuVXNlSHR0
cHMgPSB0cnVlDQogIGRkYS5Ib3N0ID0gInJhdy5naXRodWJ1c2VyY29udGVudC5jb20iDQogIGRkYS5WZXJzaW9uUGF0aCA9ICIvVGFydGlhbi9Cb0wtU2NyaXB0cy9tYXN0ZXIvTGVCbGFuYy52
ZXJzaW9uIg0KICBkZGEuU2NyaXB0UGF0aCA9ICIvVGFydGlhbi9Cb0wtU2NyaXB0cy9tYXN0ZXIvTGVCbGFuYy5sdWEiDQogIGRkYS5TYXZlUGF0aCA9IFNDUklQVF9QQVRIIC4uIEdldEN1cnJl
bnRFbnYoKS5GSUxFX05BTUUNCiAgZnVuY3Rpb24gZGRhLkNhbGxiYWNrVXBkYXRlKF9fYiwgYV9iKQ0KICAgIFNheSgiU3VjY2VzZnVsbHkgdXBkYXRlZCAoICIgLi4gYV9iIC4uICIgPT4gIiAu
LiBfX2IgLi4gIikuIikNCiAgZW5kDQogIGZ1bmN0aW9uIGRkYS5DYWxsYmFja05vVXBkYXRlKF9fYikNCiAgICBTYXkoIk5vIFVwZGF0ZXMgRm91bmQiKQ0KICBlbmQNCiAgZnVuY3Rpb24gZGRh
LkNhbGxiYWNrTmV3VmVyc2lvbihfX2IpDQogICAgU2F5KCJOZXcgVmVyc2lvbiBmb3VuZCAoIiAuLiBfX2IgLi4gIikuIFBsZWFzZSB3YWl0IHVudGlsIGl0cyBkb3dubG9hZGVkLiIpDQogIGVu
ZA0KICBmdW5jdGlvbiBkZGEuQ2FsbGJhY2tFcnJvcihfX2IpDQogICAgU2F5KCJFcnJvciB3aGlsZSBEb3dubG9hZGluZy4gUGxlYXNlIHRyeSBhZ2Fpbi4iKQ0KICBlbmQNCiAgU3hTY3JpcHRV
cGRhdGUoZGRhLlZlcnNpb24sIGRkYS5Vc2VIdHRwcywgZGRhLkhvc3QsIGRkYS5WZXJzaW9uUGF0aCwgZGRhLlNjcmlwdFBhdGgsIGRkYS5TYXZlUGF0aCwgZGRhLkNhbGxiYWNrVXBkYXRlLCBk
ZGEuQ2FsbGJhY2tOb1VwZGF0ZSwgZGRhLkNhbGxiYWNrTmV3VmVyc2lvbiwgZGRhLkNhbGxiYWNrRXJyb3IpDQplbmQNCmxvY2FsIGRiYSwgX2NhLCBhY2EsIGJjYSwgY2NhLCBkY2ENCnNQcmVk
TG9hZGVkID0gZmFsc2UNCmxvY2FsIF9kYQ0KbG9jYWwgYWRhLCBiZGEsIGNkYSA9IGZhbHNlLCBuaWwsIG5pbA0KaWYgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJWUHJlZGljdGlvbi5sdWEiKSB0
aGVuDQogIGFkYSA9IHRydWUNCiAgcmVxdWlyZSgiVlByZWRpY3Rpb24iKQ0KZW5kDQppZiBWSVBfVVNFUiBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJEaXZpbmVQcmVkLmx1YSIpIGFuZCBG
aWxlRXhpc3QoTElCX1BBVEggLi4gIkRpdmluZVByZWQubHVhYyIpIHRoZW4NCiAgYmNhID0gdHJ1ZQ0KICByZXF1aXJlKCJEaXZpbmVQcmVkIikNCmVuZA0KaWYgRmlsZUV4aXN0KExJQl9QQVRI
IC4uICJIUHJlZGljdGlvbi5sdWEiKSB0aGVuDQogIGNjYSA9IHRydWUNCiAgcmVxdWlyZSgiSFByZWRpY3Rpb24iKQ0KZW5kDQppZiBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlNQcmVkaWN0aW9u
Lmx1YSIpIHRoZW4NCiAgc1ByZWRMb2FkZWQgPSB0cnVlDQogIHJlcXVpcmUoIlNQcmVkaWN0aW9uIikNCmVuZA0KZnVuY3Rpb24gRGVjbGFyZVZhcmlhYmxlcygpDQogIFFyZWFkeSwgV3JlYWR5
LCBFcmVhZHksIFJyZWFkeSA9IGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlDQogIFNwZWxscyA9IHsNCiAgICBQID0gew0KICAgICAgbmFtZSA9ICJMZUJsYW5jX0Jhc2VfUF9wb29mLnRyb3ki
DQogICAgfSwNCiAgICBBQSA9IHsNCiAgICAgIHJhbmdlID0gNTI1LA0KICAgICAgbmFtZSA9ICJCYXNpY0F0dGFjayINCiAgICB9LA0KICAgIFEgPSB7DQogICAgICBuYW1lID0gIlNpZ2lsIG9m
IE1hbGljZSIsDQogICAgICBzcGVsbG5hbWUgPSAiTGVibGFuY0NoYW9zT3JiIiwNCiAgICAgIHJhbmdlID0gNzAwLA0KICAgICAgc3BlZWQgPSAyMDAwLA0KICAgICAgbWFya1RpbWVyID0gMy41
LA0KICAgICAgZGVsYXkgPSAwLA0KICAgICAgYWN0aXZhdGVkID0gMCwNCiAgICAgIGJ1ZmZRID0gIkxlYmxhbmNDaGFvc09yYiIsDQogICAgICBidWZmUiA9ICJMZWJsYW5jQ2hhb3NPcmJNIg0K
ICAgIH0sDQogICAgVyA9IHsNCiAgICAgIG5hbWUgPSAiRGlzdG9ydGlvbiIsDQogICAgICBzcGVsbG5hbWUgPSAiTGVibGFuY1NsaWRlIiwNCiAgICAgIHJhbmdlID0gNjUwLA0KICAgICAgcmFk
aXVzID0gMjUwLA0KICAgICAgc3BlZWQgPSAxNDUwLA0KICAgICAgZGVsYXkgPSAwLjI1LA0KICAgICAgZHVyYXRpb24gPSA0LA0KICAgICAgdGltZUFjdGl2YXRlZCA9IDAsDQogICAgICBpc0Fj
dGl2YXRlZCA9IGZhbHNlLA0KICAgICAgc3RhcnRQb3MgPSBteUhlcm8ucG9zLA0KICAgICAgcmFuZ2VTcXIgPSA3MjI1MDANCiAgICB9LA0KICAgIEUgPSB7DQogICAgICBuYW1lID0gIkV0aGVy
ZWFsIENoYWlucyIsDQogICAgICBzcGVsbG5hbWUgPSAiTGVibGFuY1NvdWxTaGFja2xlIiwNCiAgICAgIHJhbmdlID0gOTUwLA0KICAgICAgc3BlZWQgPSAxNjAwLA0KICAgICAgZGVsYXkgPSAw
LjI1LA0KICAgICAgcmFkaXVzID0gNTUsDQogICAgICBwcm9jVGltZSA9IDEuNQ0KICAgIH0sDQogICAgUiA9IHsNCiAgICAgIG5hbWUgPSAiTWltaWMiLA0KICAgICAgc3BlbGxuYW1lID0gIkxl
YmxhbmNNaW1pYyIsDQogICAgICBRbmFtZSA9ICJMZWJsYW5jQ2hhb3NPcmJNIiwNCiAgICAgIFduYW1lID0gIkxlYmxhbmNTbGlkZU0iLA0KICAgICAgV3JldHVybm5hbWUgPSAibGVibGFuY3Ns
aWRlcmV0dXJubSIsDQogICAgICBFbmFtZSA9ICJMZWJsYW5jU291bFNoYWNrbGVNIg0KICAgIH0sDQogICAgV1IgPSB7DQogICAgICBkdXJhdGlvbiA9IDQsDQogICAgICBzcGVsbG5hbWUgPSAi
TGVibGFuY1NsaWRlTSIsDQogICAgICB0aW1lQWN0aXZhdGVkID0gMCwNCiAgICAgIGlzQWN0aXZhdGVkID0gZmFsc2UsDQogICAgICBzdGFydFBvcyA9IG15SGVyby5wb3MNCiAgICB9DQogIH0N
CiAgY3VycmVudFdpZHRoID0gU3BlbGxzLkUucmFkaXVzDQogIGN1cnJlbnRSYW5nZSA9IFNwZWxscy5FLnJhbmdlDQogIGlDYXN0ZWRFVGltZSA9IG9zLmNsb2NrKCkNCiAgclNwZWxsTmFtZSA9
IHsNCiAgICBMZWJsYW5jQ2hhb3NPcmJNID0gdHJ1ZSwNCiAgICBMZWJsYW5jU2xpZGVNID0gdHJ1ZSwNCiAgICBMZWJsYW5jU291bFNoYWNrbGVNID0gdHJ1ZQ0KICB9DQogIEl0ZW1zID0gew0K
ICAgIEJSSyA9IHsNCiAgICAgIGlkID0gMzE1MywNCiAgICAgIHJhbmdlID0gNDUwLA0KICAgICAgcmVxVGFyZ2V0ID0gdHJ1ZSwNCiAgICAgIHNsb3QgPSBuaWwNCiAgICB9LA0KICAgIEJXQyA9
IHsNCiAgICAgIGlkID0gMzE0NCwNCiAgICAgIHJhbmdlID0gNDAwLA0KICAgICAgcmVxVGFyZ2V0ID0gdHJ1ZSwNCiAgICAgIHNsb3QgPSBuaWwNCiAgICB9LA0KICAgIEhHQiA9IHsNCiAgICAg
IGlkID0gMzE0NiwNCiAgICAgIHJhbmdlID0gNDAwLA0KICAgICAgcmVxVGFyZ2V0ID0gdHJ1ZSwNCiAgICAgIHNsb3QgPSBuaWwNCiAgICB9LA0KICAgIFJTSCA9IHsNCiAgICAgIGlkID0gMzA3
NCwNCiAgICAgIHJhbmdlID0gMzUwLA0KICAgICAgcmVxVGFyZ2V0ID0gZmFsc2UsDQogICAgICBzbG90ID0gbmlsDQogICAgfSwNCiAgICBTVEQgPSB7DQogICAgICBpZCA9IDMxMzEsDQogICAg
ICByYW5nZSA9IDM1MCwNCiAgICAgIHJlcVRhcmdldCA9IGZhbHNlLA0KICAgICAgc2xvdCA9IG5pbA0KICAgIH0sDQogICAgVE1UID0gew0KICAgICAgaWQgPSAzMDc3LA0KICAgICAgcmFuZ2Ug
PSAzNTAsDQogICAgICByZXFUYXJnZXQgPSBmYWxzZSwNCiAgICAgIHNsb3QgPSBuaWwNCiAgICB9LA0KICAgIFlHQiA9IHsNCiAgICAgIGlkID0gMzE0MiwNCiAgICAgIHJhbmdlID0gMzUwLA0K
ICAgICAgcmVxVGFyZ2V0ID0gZmFsc2UsDQogICAgICBzbG90ID0gbmlsDQogICAgfSwNCiAgICBCRlQgPSB7DQogICAgICBpZCA9IDMxODgsDQogICAgICByYW5nZSA9IDc1MCwNCiAgICAgIHJl
cVRhcmdldCA9IHRydWUsDQogICAgICBzbG90ID0gbmlsDQogICAgfSwNCiAgICBSTkQgPSB7DQogICAgICBpZCA9IDMxNDMsDQogICAgICByYW5nZSA9IDI3NSwNCiAgICAgIHJlcVRhcmdldCA9
IGZhbHNlLA0KICAgICAgc2xvdCA9IG5pbA0KICAgIH0NCiAgfQ0KICBBQWRpc2FibGVkID0gZmFsc2UNCiAgbGFzdEFjdGl2YXRlZCA9IG5pbA0KICBjYXN0ZWRUaHJvdWdoSGFyYXNzID0gZmFs
c2UNCiAgS2lsbFRleHQgPSB7fQ0KICBPcmJXYWxrZXIgPSBPcmJXYWxrZXIoKQ0KICBiZGEsIERQID0gbmlsLCBuaWwNCiAgUHJvZFcsIFByb2RFID0gbmlsLCBuaWwNCiAgZVNTLCB3U1MgPSBu
aWwsIG5pbA0KICBpZ25pdGUsIGhlYWwsIGJhcnJpZXIsIElyZWFkeSwgSHJlYWR5LCBCcmVhZHkgPSBmYWxzZSwgbmlsLCBuaWwsIG5pbCwgbmlsLCBuaWwNCiAgaWduaXRlVGljayA9IHt9DQog
IGVuZW1pZXNCdWZmcyA9IHt9DQogIGlzS2lsbGVkID0ge30NCiAgaXNTdHVubmVkID0ge30NCiAgZm9yIGRkYSwgX19iIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgX19i
IHRoZW4NCiAgICAgIGlnbml0ZVRpY2tbX19iLm5ldHdvcmtJRF0gPSB7DQogICAgICAgIHN0YXJ0VCA9IG9zLmNsb2NrKCksDQogICAgICAgIGhlYWx0aCA9IF9fYi5oZWFsdGgsDQogICAgICAg
IGlzSWduaXRlZCA9IGZhbHNlDQogICAgICB9DQogICAgICBlbmVtaWVzQnVmZnNbX19iLm5ldHdvcmtJRF0gPSB7DQogICAgICAgIHJlY2VpdmVkID0gZmFsc2UsDQogICAgICAgIGVuZFRpbWUg
PSBvcy5jbG9jaygpDQogICAgICB9DQogICAgICBpc0tpbGxlZFtfX2IubmV0d29ya0lEXSA9IGZhbHNlDQogICAgICBpc1N0dW5uZWRbX19iLm5ldHdvcmtJRF0gPSBmYWxzZQ0KICAgIGVuZA0K
ICBlbmQNCiAgYnVmZlR5cGVzID0gew0KICAgIDUsDQogICAgMjQsDQogICAgMjkNCiAgfQ0KICBsYXN0UUNhc3QgPSB7DQogICAgdGFyZ2V0ID0gbmlsLA0KICAgIGVuZFQgPSBvcy5jbG9jaygp
DQogIH0NCiAgaWduaXRlZFRhYmxlID0gew0KICAgIGlnbml0ZWQgPSB0cnVlLA0KICAgIHNvdXJjZSA9IG5pbCwNCiAgICB0aW1lID0gb3MuY2xvY2soKSwNCiAgICBoYXNTYWlkID0gZmFsc2Us
DQogICAgd2lsbEtpbGxNZSA9IGZhbHNlDQogIH0NCiAgYXV0b0xldmVsVGFibGVzID0gew0KICAgIHsNCiAgICAgIF9RLA0KICAgICAgX1csDQogICAgICBfRSwNCiAgICAgIF9RLA0KICAgICAg
X1EsDQogICAgICBfUiwNCiAgICAgIF9RLA0KICAgICAgX1csDQogICAgICBfUSwNCiAgICAgIF9XLA0KICAgICAgX1IsDQogICAgICBfVywNCiAgICAgIF9XLA0KICAgICAgX0UsDQogICAgICBf
RSwNCiAgICAgIF9SLA0KICAgICAgX0UsDQogICAgICBfRQ0KICAgIH0sDQogICAgew0KICAgICAgX1csDQogICAgICBfUSwNCiAgICAgIF9FLA0KICAgICAgX1csDQogICAgICBfVywNCiAgICAg
IF9SLA0KICAgICAgX1csDQogICAgICBfUSwNCiAgICAgIF9XLA0KICAgICAgX1EsDQogICAgICBfUiwNCiAgICAgIF9RLA0KICAgICAgX1EsDQogICAgICBfRSwNCiAgICAgIF9FLA0KICAgICAg
X1IsDQogICAgICBfRSwNCiAgICAgIF9FDQogICAgfQ0KICB9DQogIGxhc3RMZXZlbCA9IG15SGVyby5sZXZlbCAtIDENCiAgWmhvbnlhc1NvdCA9IG5pbA0KICBaaHlvbmFzUmVhZHkgPSBmYWxz
ZQ0KICBhY3RpdmVNaW5pb25zQXR0YWNrcyA9IHt9DQogIHR1cnJldEZvY3VzID0gew0KICAgIHR1cnJldCA9IG5pbCwNCiAgICBzdGFydFQgPSBvcy5jbG9jaygpLA0KICAgIHNwZWxsID0gbmls
LA0KICAgIGZvY3VzZWQgPSBmYWxzZQ0KICB9DQogIGdhcENsb3NlU2V0dGluZ3MgPSB7DQogICAgdGltZSA9IG9zLmNsb2NrKCkNCiAgfQ0KICB0YXJnZXQgPSBuaWwNCiAgdHMgPSBUYXJnZXRT
ZWxlY3RvcihUQVJHRVRfTE9XX0hQX1BSSU9SSVRZLCA3MDApDQogIHRzLm5hbWUgPSAiVFMiDQogIHRzTG9uZyA9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MT1dfSFBfUFJJT1JJVFksIDE1MDAp
DQogIHRzTG9uZy5uYW1lID0gIkdhcENsb3NlIg0KICBleGFtcGxlVGFyZ2V0ID0gbmlsDQogIGZvcmNlZFRhcmdldCA9IG5pbA0KICBmb3JjZWRUYXJnZXRUaW1lID0gb3MuY2xvY2soKQ0KICBl
bmVteU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgU3BlbGxzLlcucmFuZ2UsIG15SGVybywgTUlOSU9OX1NPUlRfSEVBTFRIX0RFQykNCiAgX0cub2xkRHJhd0NpcmNsZSA9
IHJhd2dldChfRywgIkRyYXdDaXJjbGUiKQ0KICBfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTINCiAgQmFzZUFuaW1hdGlvblRpbWUgPSB7fQ0KICBCYXNlV2luZFVwVGltZSA9IHt9DQogIGhh
c1BvdGlvbkFjdGl2ZSA9IGZhbHNlDQogIHByaW9yaXR5VGFibGUgPSB7DQogICAgQVAgPSB7DQogICAgICAiQW5uaWUiLA0KICAgICAgIkFocmkiLA0KICAgICAgIkFrYWxpIiwNCiAgICAgICJB
bml2aWEiLA0KICAgICAgIkFubmllIiwNCiAgICAgICJCcmFuZCIsDQogICAgICAiQ2Fzc2lvcGVpYSIsDQogICAgICAiRGlhbmEiLA0KICAgICAgIkV2ZWx5bm4iLA0KICAgICAgIkZpZGRsZVN0
aWNrcyIsDQogICAgICAiRml6eiIsDQogICAgICAiR3JhZ2FzIiwNCiAgICAgICJIZWltZXJkaW5nZXIiLA0KICAgICAgIkthcnRodXMiLA0KICAgICAgIkthc3NhZGluIiwNCiAgICAgICJLYXRh
cmluYSIsDQogICAgICAiS2F5bGUiLA0KICAgICAgIktlbm5lbiIsDQogICAgICAiTGVibGFuYyIsDQogICAgICAiTGlzc2FuZHJhIiwNCiAgICAgICJMdXgiLA0KICAgICAgIk1hbHphaGFyIiwN
CiAgICAgICJNb3JkZWthaXNlciIsDQogICAgICAiTW9yZ2FuYSIsDQogICAgICAiTmlkYWxlZSIsDQogICAgICAiT3JpYW5uYSIsDQogICAgICAiUnl6ZSIsDQogICAgICAiU2lvbiIsDQogICAg
ICAiU3dhaW4iLA0KICAgICAgIlN5bmRyYSIsDQogICAgICAiVGVlbW8iLA0KICAgICAgIlR3aXN0ZWRGYXRlIiwNCiAgICAgICJWZWlnYXIiLA0KICAgICAgIlZpa3RvciIsDQogICAgICAiVmxh
ZGltaXIiLA0KICAgICAgIlhlcmF0aCIsDQogICAgICAiWmlnZ3MiLA0KICAgICAgIlp5cmEiLA0KICAgICAgIlZlbGtveiIsDQogICAgICAiRWtrbyINCiAgICB9LA0KICAgIFN1cHBvcnQgPSB7
DQogICAgICAiQWxpc3RhciIsDQogICAgICAiQmxpdHpjcmFuayIsDQogICAgICAiSmFubmEiLA0KICAgICAgIkthcm1hIiwNCiAgICAgICJMZW9uYSIsDQogICAgICAiTHVsdSIsDQogICAgICAi
TmFtaSIsDQogICAgICAiTnVudSIsDQogICAgICAiU29uYSIsDQogICAgICAiU29yYWthIiwNCiAgICAgICJUYXJpYyIsDQogICAgICAiVGhyZXNoIiwNCiAgICAgICJaaWxlYW4iLA0KICAgICAg
IkJyYXVtIg0KICAgIH0sDQogICAgVGFuayA9IHsNCiAgICAgICJBbXVtdSIsDQogICAgICAiQ2hvZ2F0aCIsDQogICAgICAiRHJNdW5kbyIsDQogICAgICAiR2FsaW8iLA0KICAgICAgIkhlY2Fy
aW0iLA0KICAgICAgIk1hbHBoaXRlIiwNCiAgICAgICJNYW9rYWkiLA0KICAgICAgIk5hc3VzIiwNCiAgICAgICJSYW1tdXMiLA0KICAgICAgIlNlanVhbmkiLA0KICAgICAgIk5hdXRpbHVzIiwN
CiAgICAgICJTaGVuIiwNCiAgICAgICJTaW5nZWQiLA0KICAgICAgIlNrYXJuZXIiLA0KICAgICAgIlZvbGliZWFyIiwNCiAgICAgICJXYXJ3aWNrIiwNCiAgICAgICJZb3JpY2siLA0KICAgICAg
IlphYyINCiAgICB9LA0KICAgIEFEX0NhcnJ5ID0gew0KICAgICAgIkFzaGUiLA0KICAgICAgIkNhaXRseW4iLA0KICAgICAgIkNvcmtpIiwNCiAgICAgICJEcmF2ZW4iLA0KICAgICAgIkV6cmVh
bCIsDQogICAgICAiR3JhdmVzIiwNCiAgICAgICJKYXljZSIsDQogICAgICAiSmlueCIsDQogICAgICAiS29nTWF3IiwNCiAgICAgICJMdWNpYW4iLA0KICAgICAgIk1hc3RlcllpIiwNCiAgICAg
ICJNaXNzRm9ydHVuZSIsDQogICAgICAiUGFudGhlb24iLA0KICAgICAgIlF1aW5uIiwNCiAgICAgICJTaGFjbyIsDQogICAgICAiU2l2aXIiLA0KICAgICAgIlRhbG9uIiwNCiAgICAgICJUcnlu
ZGFtZXJlIiwNCiAgICAgICJUcmlzdGFuYSIsDQogICAgICAiVHdpdGNoIiwNCiAgICAgICJVcmdvdCIsDQogICAgICAiVmFydXMiLA0KICAgICAgIlZheW5lIiwNCiAgICAgICJZYXN1byIsDQog
ICAgICAiWmVkIiwNCiAgICAgICJLYWxpc3RhIg0KICAgIH0sDQogICAgQnJ1aXNlciA9IHsNCiAgICAgICJBYXRyb3giLA0KICAgICAgIkRhcml1cyIsDQogICAgICAiRWxpc2UiLA0KICAgICAg
IkZpb3JhIiwNCiAgICAgICJHYW5ncGxhbmsiLA0KICAgICAgIkdhcmVuIiwNCiAgICAgICJJcmVsaWEiLA0KICAgICAgIkphcnZhbklWIiwNCiAgICAgICJKYXgiLA0KICAgICAgIktoYXppeCIs
DQogICAgICAiTGVlU2luIiwNCiAgICAgICJOb2N0dXJuZSIsDQogICAgICAiT2xhZiIsDQogICAgICAiUG9wcHkiLA0KICAgICAgIlJlbmVrdG9uIiwNCiAgICAgICJSZW5nYXIiLA0KICAgICAg
IlJpdmVuIiwNCiAgICAgICJSdW1ibGUiLA0KICAgICAgIlNoeXZhbmEiLA0KICAgICAgIlRydW5kbGUiLA0KICAgICAgIlVkeXIiLA0KICAgICAgIlZpIiwNCiAgICAgICJNb25rZXlLaW5nIiwN
CiAgICAgICJYaW5aaGFvIg0KICAgIH0NCiAgfQ0KICBjYW5DYXN0U3BlbGxzID0gdHJ1ZQ0KICBSU2tpbGwgPSBuaWwNCiAgUlNraWxsVGltZSA9IG9zLmNsb2NrKCkNCiAgUlNraWxsUG9zID0g
bmlsDQogIGNhc3RlZFdUaHJvdWdoSGFyYXNzID0gew0KICAgIGJvb2wgPSBmYWxzZSwNCiAgICB0aW1lID0gb3MuY2xvY2soKQ0KICB9DQogIGNhc3RlZEUgPSBmYWxzZQ0KICBjYXN0ZWRFVGlt
ZSA9IG9zLmNsb2NrKCkNCiAgaWYgYWRhIHRoZW4NCiAgICBiZGEgPSBWUHJlZGljdGlvbigpDQogIGVuZA0KICBpZiBiY2EgdGhlbg0KICAgIExvYWREaXZpbmVQcmVkaWN0aW9uKCkNCiAgZW5k
DQogIGlmIHNQcmVkTG9hZGVkIHRoZW4NCiAgICBjZGEgPSBTUHJlZGljdGlvbigpDQogIGVuZA0KICBpZiBjY2EgdGhlbg0KICAgIEhQX1csIEhQX0UgPSBuaWwsIG5pbA0KICAgIF9kYSA9IEhQ
cmVkaWN0aW9uKCkNCiAgICBMb2FkSFByZWRpY3Rpb24oKQ0KICBlbmQNCiAgY3VycmVudFByZWRpY3Rpb24gPSBuaWwNCmVuZA0KZnVuY3Rpb24gUlN0YXRlKGRkYSkNCiAgbG9jYWwgX19iID0g
bXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZQ0KICByZXR1cm4gZGRhIGFuZCAoZGRhID09ICJRIiBhbmQgX19iID09IFNwZWxscy5SLlFuYW1lIG9yIGRkYSA9PSAiVyIgYW5kIF9fYiA9PSBT
cGVsbHMuUi5XbmFtZSBvciBkZGEgPT0gIkUiIGFuZCBfX2IgPT0gU3BlbGxzLlIuRW5hbWUpDQplbmQNCmZ1bmN0aW9uIExvYWRIUHJlZGljdGlvbigpDQogIEhQX0UgPSBIUFNraWxsc2hvdCh7
DQogICAgdHlwZSA9ICJEZWxheUxpbmUiLA0KICAgIGRlbGF5ID0gMC4yNSwNCiAgICByYW5nZSA9IDk1MCwNCiAgICBzcGVlZCA9IDE2MDAsDQogICAgY29sbGlzaW9uTSA9IHRydWUsDQogICAg
Y29sbGlzaW9uSCA9IHRydWUsDQogICAgd2lkdGggPSAxNDANCiAgfSkNCiAgSFBfVyA9IEhQU2tpbGxzaG90KHsNCiAgICB0eXBlID0gIkRlbGF5Q2lyY2xlIiwNCiAgICBkZWxheSA9IFNwZWxs
cy5XLmRlbGF5LA0KICAgIHJhbmdlID0gU3BlbGxzLlcucmFuZ2UgKyA1MCwNCiAgICBzcGVlZCA9IFNwZWxscy5XLnNwZWVkLA0KICAgIHJhZGl1cyA9IFNwZWxscy5XLnJhZGl1cw0KICB9KQ0K
ZW5kDQpmdW5jdGlvbiBMb2FkRGl2aW5lUHJlZGljdGlvbigpDQogIGlmIGJjYSB0aGVuDQogICAgRFAgPSBEaXZpbmVQcmVkKCkNCiAgICBlU1MgPSBMaW5lU1MoU3BlbGxzLkUuc3BlZWQsIFNw
ZWxscy5FLnJhbmdlLCBTcGVsbHMuRS5yYWRpdXMsIFNwZWxscy5FLmRlbGF5ICogMTAwMCwgMCkNCiAgICB3U1MgPSBDaXJjbGVTUyhTcGVsbHMuVy5zcGVlZCwgU3BlbGxzLlcucmFuZ2UsIFNw
ZWxscy5XLnJhZGl1cywgU3BlbGxzLlcuZGVsYXkgKiAxMDAwLCBtYXRoLmh1Z2UpDQogICAgRFA6YmluZFNTKCJlU2tpbGxTaG90IiwgZVNTLCAxKQ0KICAgIERQOmJpbmRTUygid1NraWxsU2hv
dCIsIHdTUywgMSkNCiAgICBwcmVkVGltZXIgPSBUaW1lckMoNTAwKQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gQ2hlY2tPcmJXYWxrZXIoKQ0KICBpZiBfRy5SZWJvcm5fSW5pdGlhbGlzZWQgdGhl
bg0KICAgIFNBQ0xvYWRlZCA9IHRydWUNCiAgICBNZW51Lm9yYndhbGtlcjphZGRQYXJhbSgiaW5mbzYiLCAiRGV0ZWN0ZWQgU0FDIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KICAgIF9HLkF1
dG9DYXJyeS5Ta2lsbHM6RGlzYWJsZUFsbCgpDQogICAgU2F5KCJTQUMgRGV0ZWN0ZWQuIikNCiAgZWxzZWlmIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAg
ICByZXF1aXJlKCJTeE9yYldhbGsiKQ0KICAgIGRiYSA9IHRydWUNCiAgICBfRy5TeE9yYjpMb2FkVG9NZW51KE1lbnUub3Jid2Fsa2VyKQ0KICAgIFNheSgiU3hPcmIgZGV0ZWN0ZWQuIikNCiAg
ZW5kDQogIGlmIFNBQ0xvYWRlZCBvciBkYmEgdGhlbg0KICAgIG9yYldhbGtMb2FkZWQgPSB0cnVlDQogIGVuZA0KICBpZiBub3Qgb3JiV2Fsa0xvYWRlZCB0aGVuDQogICAgU2F5KCJZb3UgbmVl
ZCBlaXRoZXIgU0FDIG9yIFN4T3JiV2FsayBmb3IgdGhpcyBzY3JpcHQuIFBsZWFzZSBkb3dubG9hZCBvbmUgb2YgdGhlbS4iKQ0KICBlbHNlDQogICAgaWYgZGFhIHRoZW4NCiAgICAgIFNheSgi
V2VsY29tZSAiIC4uIEdldFVzZXIoKSAuLiAiOiBQcm9tb3Rpb24gLSBGcmVlIERheSIpDQogICAgZWxzZWlmIGJhYSB0aGVuDQogICAgICBTYXkoIldlbGNvbWUgIiAuLiBHZXRVc2VyKCkgLi4g
IjogVHJpYWwgdXNlciIpDQogICAgZW5kDQogICAgaWYgY2FhIHRoZW4NCiAgICAgIFNheSgiV2VsY29tZSAiIC4uIEdldFVzZXIoKSAuLiAiOiBQYWlkIHVzZXIiKQ0KICAgIGVuZA0KICBlbmQN
CmVuZA0KZnVuY3Rpb24gT25Mb2FkKCkNCiAgaWYgX0cuTGVCbGFuY19QZXJmb3JtQXV0b1VwZGF0ZSB0aGVuDQogICAgQXV0b1VwZGF0ZSgpDQogIGVuZA0KICBEZWNsYXJlVmFyaWFibGVzKCkN
CiAgU3VtbW9uZXJzKCkNCiAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKQ0KICAgIENoZWNrT3JiV2Fsa2VyKCkNCiAgZW5kLCAxMCkNCiAgRHJhd01lbnUoKQ0KICBjdXJyZW50UHJlZGljdGlvbiA9
IE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uDQogIGlmIGhlcm9NYW5hZ2VyLmlDb3VudCA9PSAxMCB0aGVuDQogICAgYXJyYW5nZVByaW9yaXR5cygpDQogIGVsc2VpZiBoZXJvTWFuYWdl
ci5pQ291bnQgPT0gNiB0aGVuDQogICAgYXJyYW5nZVByaW9yaXR5c1RUKCkNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIE9uRHJhdygpDQogIGlmIG15SGVyby5kZWFkIHRoZW4NCiAgICByZXR1cm4N
CiAgZW5kDQogIGlmIE1lbnUuZHJhd2luZ3MuZHJhdyB0aGVuDQogICAgaWYgTWVudS5kcmF3aW5ncy5kcmF3USBhbmQgQ2FuRHJhd1NwZWxsKF9RKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlKG15
SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNwZWxscy5RLnJhbmdlLCBSR0IoMjU1LCAxMDIsIDEwMikpDQogICAgZW5kDQogICAgaWYgTWVudS5kcmF3aW5ncy5kcmF3VyBhbmQgQ2FuRHJh
d1NwZWxsKF9XKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNwZWxscy5XLnJhbmdlLCBSR0IoMjU1LCA1MSwgMTUzKSkNCiAgICBlbmQNCiAg
ICBpZiBNZW51LmRyYXdpbmdzLmRyYXdUYXJnZXQgYW5kIHRhcmdldCBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQogICAgICBsb2NhbCBkZGEgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNU
T1IzKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnopKQ0KICAgICAgbG9jYWwgX19iID0gZGRhLnggLSAzNQ0KICAgICAgbG9jYWwgYV9iID0gZGRhLnkgLSA0MA0KICAgICAgaWYgZm9yY2Vk
VGFyZ2V0IGFuZCBmb3JjZWRUYXJnZXQubmV0d29ya0lEID09IHRhcmdldC5uZXR3b3JrSUQgdGhlbg0KICAgICAgICBEcmF3VGV4dCgiRm9yY2VkOiAiIC4uIHRhcmdldC5jaGFyTmFtZSAuLiAi
IC0gIiAuLiAiRGlzdGFuY2UgOiAiIC4uIG1hdGguY2VpbChHZXREaXN0YW5jZSh0YXJnZXQpKSwgMTIsIF9fYiwgYV9iLCBSR0IoMjU1LCAwLCAwKSkNCiAgICAgIGVsc2UNCiAgICAgICAgRHJh
d1RleHQodGFyZ2V0LmNoYXJOYW1lIC4uICIgLSAiIC4uICJEaXN0YW5jZSA6ICIgLi4gbWF0aC5jZWlsKEdldERpc3RhbmNlKHRhcmdldCkpLCAxMiwgX19iLCBhX2IsIFJHQigyNTUsIDAsIDAp
KQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgTWVudS5kcmF3aW5ncy5kcmF3RSBhbmQgQ2FuRHJhd1NwZWxsKF9FKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8u
eSwgbXlIZXJvLnosIGN1cnJlbnRSYW5nZSwgUkdCKDI1NSwgMTUzLCAxNTMpKQ0KICAgIGVuZA0KICAgIGlmIE1lbnUuY29tYm8uZXNldHRpbmdzLmRyYXcgdGhlbg0KICAgICAgbG9jYWwgZGRh
ID0gVmVjdG9yKG15SGVybykgKyAoVmVjdG9yKG1vdXNlUG9zKSAtIG15SGVybyk6bm9ybWFsaXplZCgpICogY3VycmVudFJhbmdlDQogICAgICBEcmF3TGluZTNEKG15SGVyby5wb3MueCwgbXlI
ZXJvLnBvcy55LCBteUhlcm8ucG9zLnosIGRkYS54LCBkZGEueSwgZGRhLnosIDEwLCBSR0IoMjU1LCAzLCAxNCkpDQogICAgZW5kDQogICAgaWYgTWVudS5kcmF3aW5ncy5kcmF3S2lsbGFibGUg
dGhlbg0KICAgICAgZm9yIGRkYSwgX19iIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGlmIF9fYiBhbmQgVmFsaWRUYXJnZXQoX19iLCAzMDAwKSB0aGVuDQogICAgICAg
ICAgbG9jYWwgYV9iID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyhfX2IueCwgX19iLnksIF9fYi56KSkNCiAgICAgICAgICBsb2NhbCBiX2IgPSBhX2IueCAtIDM1DQogICAgICAgICAgbG9j
YWwgY19iID0gYV9iLnkgLSA1MA0KICAgICAgICAgIERyYXdUZXh0KEtpbGxUZXh0W19fYi5uZXR3b3JrSURdLCBNZW51LmRyYXdpbmdzLmRyYXdLaWxsYWJsZVdpZHRoLCBiX2IsIGNfYiwgQVJH
QigyNTUsIDI1NSwgMjA0LCAwKSkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIENhbkRyYXdTcGVsbChkZGEpDQogIGlmIE1lbnUuZHJhd2lu
Z3MuZHJhd1NwZWxsUmVhZHkgdGhlbg0KICAgIGlmIGRkYSA9PSBfUSB0aGVuDQogICAgICBpZiBub3QgUXJlYWR5IHRoZW4NCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICBlbmQNCiAgICBl
bHNlaWYgZGRhID09IF9XIHRoZW4NCiAgICAgIGlmIG5vdCBJc1dSZWFkeSgpIHRoZW4NCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICBlbmQNCiAgICBlbHNlaWYgZGRhID09IF9FIGFuZCBu
b3QgRXJlYWR5IHRoZW4NCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgcmV0dXJuIHRydWUNCmVuZA0KZnVuY3Rpb24gQ2hlY2tGb3JjZWRUYXJnZXQoKQ0KICBpZiBmb3Jj
ZWRUYXJnZXQgdGhlbg0KICAgIGlmIGZvcmNlZFRhcmdldC5kZWFkIHRoZW4NCiAgICAgIGZvcmNlZFRhcmdldCA9IG5pbA0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgbXlIZXJvLmRl
YWQgdGhlbg0KICAgICAgZm9yY2VkVGFyZ2V0ID0gbmlsDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoR2V0RGlzdGFuY2UoZm9yY2VkVGFyZ2V0
KSkgPT0gMSB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBHZXREaXN0YW5jZVNxcihmb3JjZWRUYXJnZXQpID49IDQwMDAwMDAgdGhlbg0KICAgICAgU2F5KCJGb3JjZWQgdGFy
Z2V0IHJhbiBvdXQgb2YgcmFuZ2UuIikNCiAgICAgIFNheSgiRGVzZWxlY3RlZDogIiAuLiBmb3JjZWRUYXJnZXQuY2hhck5hbWUpDQogICAgICBmb3JjZWRUYXJnZXQgPSBuaWwNCiAgICAgIHJl
dHVybg0KICAgIGVsc2VpZiBmb3JjZWRUYXJnZXRUaW1lICsgMTUgPCBvcy5jbG9jaygpIHRoZW4NCiAgICAgIFNheSgiVGltZSBleHBpcmVkLiBEZXNlbGVjdGVkOiAiIC4uIGZvcmNlZFRhcmdl
dC5jaGFyTmFtZSkNCiAgICAgIGZvcmNlZFRhcmdldCA9IG5pbA0KICAgICAgcmV0dXJuDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBBdXRvTGV2ZWwoKQ0KICBpZiBteUhlcm8ubGV2
ZWwgPiBsYXN0TGV2ZWwgdGhlbg0KICAgIExldmVsU3BlbGwoYXV0b0xldmVsVGFibGVzW01lbnUubWlzYy5hdXRvbGV2ZWwuc2VxdWVuY2VdW215SGVyby5sZXZlbF0pDQogICAgbGFzdExldmVs
ID0gbXlIZXJvLmxldmVsDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBDb250cm9sRVJhbmdlKCkNCiAgbG9jYWwgZGRhID0gTWVudS5jb21iby5lc2V0dGluZ3MucmFuZ2UNCiAgbG9jYWwgX19iID0g
TWVudS5jb21iby5lc2V0dGluZ3Mud2lkdGgNCiAgbG9jYWwgYV9iID0gZmFsc2UNCiAgaWYgY3VycmVudFJhbmdlIH49IGRkYSB0aGVuDQogICAgYV9iID0gdHJ1ZQ0KICAgIGN1cnJlbnRSYW5n
ZSA9IGRkYQ0KICBlbmQNCiAgaWYgY3VycmVudFdpZHRoIH49IF9fYiB0aGVuDQogICAgYV9iID0gdHJ1ZQ0KICAgIGN1cnJlbnRXaWR0aCA9IF9fYg0KICBlbmQNCiAgaWYgYV9iIHRoZW4NCiAg
ICBpZiBjY2EgdGhlbg0KICAgICAgSFBfRSA9IEhQU2tpbGxzaG90KHsNCiAgICAgICAgdHlwZSA9ICJEZWxheUxpbmUiLA0KICAgICAgICBkZWxheSA9IDAuMjUsDQogICAgICAgIHJhbmdlID0g
Y3VycmVudFJhbmdlLA0KICAgICAgICBzcGVlZCA9IDE2MDAsDQogICAgICAgIGNvbGxpc2lvbk0gPSB0cnVlLA0KICAgICAgICBjb2xsaXNpb25IID0gdHJ1ZSwNCiAgICAgICAgd2lkdGggPSBj
dXJyZW50V2lkdGgNCiAgICAgIH0pDQogICAgZW5kDQogICAgaWYgYmNhIHRoZW4NCiAgICAgIExpbmVTUyhTcGVsbHMuRS5zcGVlZCwgY3VycmVudFJhbmdlLCBjdXJyZW50V2lkdGgsIFNwZWxs
cy5FLmRlbGF5ICogMTAwMCwgMCkNCiAgICBlbmQNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIE9uVGljaygpDQogIGlmIG15SGVyby5kZWFkIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIENoZWNr
cygpDQogIENoZWNrSWduaXRlKCkNCiAgSWduaXRlV2lsbEtpbGxNZSgpDQogIGlmIE1lbnUubWlzYy5hdXRvbGV2ZWwudXNlQXV0b0xldmVsIHRoZW4NCiAgICBBdXRvTGV2ZWwoKQ0KICBlbmQN
CiAgaWYgTWVudS5rZXlzZXR0aW5ncy51c2VDb21ibyBvciBNZW51LmtleXNldHRpbmdzLnVzZUNvbWJvR2FwQ2xvc2Ugb3IgTWVudS5rZXlzZXR0aW5ncy51c2VDb21ib0NoYWluIHRoZW4NCiAg
ICBDb21ibygpDQogIGVuZA0KICBpZiBNZW51LnNldHRpbmdzVy51c2VPcHRpb25hbCB0aGVuDQogICAgTGVCbGFuY1NwZWNpZmljU3BlbGxDaGVja3MoKQ0KICBlbmQNCiAgaWYgTWVudS5rZXlz
ZXR0aW5ncy51c2VDb21ib0dhcENsb3NlIG9yIE1lbnUua2V5c2V0dGluZ3MudXNlQ29tYm9DaGFpbiB0aGVuDQogICAgaWYgdGFyZ2V0IHRoZW4NCiAgICAgIE9yYldhbGtlcjpPcmJ3YWxrKHRh
cmdldCkNCiAgICBlbHNlDQogICAgICBPcmJXYWxrZXI6T3Jid2FsaygpDQogICAgZW5kDQogIGVuZA0KICBpZiBNZW51LmtleXNldHRpbmdzLnVzZUhhcmFzcyB0aGVuDQogICAgSGFyYXNzKCkN
CiAgZW5kDQogIGlmIE1lbnUua2V5c2V0dGluZ3MudXNlTGFuZUNsZWFyIHRoZW4NCiAgICBMYW5lQ2xlYXIoKQ0KICBlbmQNCiAgaWYgQ2FuUGVybWZvcm1LaWxsU3RlYWwoKSB0aGVuDQogICAg
S2lsbFN0ZWFsKCkNCiAgZW5kDQogIGlmIE1lbnUubWlzYy56aG9ueWFzLnpob255YXMgYW5kIG5vdCBJbkZvdW50YWluKCkgdGhlbg0KICAgIFpob255YXMoKQ0KICBlbmQNCiAgaWYgaWduaXRl
IH49IG5pbCBhbmQgTWVudS5taXNjLmF1dG9pZ25pdGUudXNlSWduaXRlIHRoZW4NCiAgICBVc2VJZ25pdGUoKQ0KICBlbmQNCiAgaWYgbm90IG9yYldhbGtMb2FkZWQgdGhlbg0KICAgIHJldHVy
bg0KICBlbmQNCiAgaWYgTWVudS5jb21iby5jb21ib0FBIGFuZCAoZGJhIGFuZCBfRy5TeE9yYjpHZXRNb2RlKCkgPT0gMSBvciBTQUNMb2FkZWQgYW5kIF9HLkF1dG9DYXJyeS5LZXlzLkF1dG9D
YXJyeSkgYW5kIEFBZGlzYWJsZWQgdGhlbg0KICAgIGlmIGRiYSB0aGVuDQogICAgICBfRy5TeE9yYjpFbmFibGVBdHRhY2tzKCkNCiAgICBlbHNlaWYgU0FDTG9hZGVkIHRoZW4NCiAgICAgIF9H
LkF1dG9DYXJyeS5NeUhlcm86QXR0YWNrc0VuYWJsZWQodHJ1ZSkNCiAgICBlbmQNCiAgICBBQWRpc2FibGVkID0gZmFsc2UNCiAgZW5kDQogIGlmIChkYmEgYW5kIF9HLlN4T3JiOkdldE1vZGUo
KSA9PSAxIG9yIFNBQ0xvYWRlZCBhbmQgX0cuQXV0b0NhcnJ5LktleXMuQXV0b0NhcnJ5KSBhbmQgbm90IE1lbnUuY29tYm8uY29tYm9BQSBhbmQgbm90IEFBZGlzYWJsZWQgdGhlbg0KICAgIGlm
IGRiYSB0aGVuDQogICAgICBfRy5TeE9yYjpEaXNhYmxlQXR0YWNrcygpDQogICAgZWxzZWlmIFNBQ0xvYWRlZCB0aGVuDQogICAgICBfRy5BdXRvQ2FycnkuTXlIZXJvOkF0dGFja3NFbmFibGVk
KGZhbHNlKQ0KICAgIGVuZA0KICAgIEFBZGlzYWJsZWQgPSB0cnVlDQogIGVuZA0KICBpZiBNZW51LmtleXNldHRpbmdzLnVzZUZhcm0gYW5kIChkYmEgYW5kIG5vdCBfRy5TeE9yYjpHZXRNb2Rl
KCkgPT0gMSBhbmQgbm90IF9HLlN4T3JiOkdldE1vZGUoKSA9PSAyIGFuZCBub3QgX0cuU3hPcmI6R2V0TW9kZSgpID09IDMgb3IgU0FDTG9hZGVkIGFuZCBub3QgX0cuQXV0b0NhcnJ5LktleXMu
QXV0b0NhcnJ5IGFuZCBub3QgX0cuQXV0b0NhcnJ5LktleXMuTWl4ZWRNb2RlIGFuZCBub3QgX0cuQXV0b0NhcnJ5LktleXMuTGFuZUNsZWFyKSB0aGVuDQogICAgRmFybSgpDQogIGVuZA0KZW5k
DQpmdW5jdGlvbiBJc1NwZWxsUmVhZHkoZGRhLCBfX2IpDQogIHJldHVybiBkZGE6R2V0U3BlbGxEYXRhKF9fYikubGV2ZWwgYW5kIGRkYTpHZXRTcGVsbERhdGEoX19iKS5sZXZlbCA+PSAxIGFu
ZCBkZGE6R2V0U3BlbGxEYXRhKF9fYikuY3VycmVudENkIGFuZCBtYXRoLmZsb29yKGRkYTpHZXRTcGVsbERhdGEoX19iKS5jdXJyZW50Q2QpID09IDANCmVuZA0KZnVuY3Rpb24gVG9vRGFuZ2Vy
b3VzKGRkYSkNCiAgbG9jYWwgX19iID0gMA0KICBmb3IgYl9iLCBjX2IgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBjX2IgYW5kIGNfYi52aXNpYmxlIGFuZCBub3QgY19i
LmRlYWQgYW5kIEdldERpc3RhbmNlU3FyKGNfYikgPD0gNjQwMDAwIHRoZW4NCiAgICAgIGZvciBkX2IsIF9hYiBpbiBwYWlycyh7DQogICAgICAgIF9RLA0KICAgICAgICBfVywNCiAgICAgICAg
X0UsDQogICAgICAgIF9SDQogICAgICB9KSBkbw0KICAgICAgICBpZiBJc1NwZWxsUmVhZHkoY19iLCBfYWIpIHRoZW4NCiAgICAgICAgICBsb2NhbCBhYWIgPSBjX2I6R2V0U3BlbGxEYXRhKF9h
YikucmFuZ2UNCiAgICAgICAgICBsb2NhbCBiYWIgPSBhYWIgYW5kIGFhYiBvciA1MDANCiAgICAgICAgICBpZiBiYWIgYW5kIHR5cGUoYmFiKSA9PSAibnVtYmVyIiBhbmQgYmFiID49IEdldERp
c3RhbmNlKGNfYiwgZGRhKSB0aGVuDQogICAgICAgICAgICBsb2NhbCBjYWIgPSBnZXREbWcoU3BlbGxUb1N0cmluZyhfYWIpLCBteUhlcm8sIGNfYikNCiAgICAgICAgICAgIGlmIG5vdCBjYWIg
b3Igbm90IGNhYiB0aGVuDQogICAgICAgICAgICAgIGNhYiA9IDANCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgX19iID0gX19iICsgY2FiDQogICAgICAgICAgZW5kDQogICAgICAgIGVu
ZA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBsb2NhbCBhX2IgPSBfX2IgLyBteUhlcm8uaGVhbHRoICogMTAwDQogIGFfYiA9IGFfYiBhbmQgbWF0aC5mbG9vcihhX2IpIG9yIDANCiAg
aWYgYV9iIHRoZW4NCiAgICBpZiBhX2IgPj0gNzAwIHRoZW4NCiAgICAgIHJldHVybiAxMA0KICAgIGVsc2VpZiBhX2IgPj0gNjAwIHRoZW4NCiAgICAgIHJldHVybiA5DQogICAgZWxzZWlmIGFf
YiA+PSA1MDAgdGhlbg0KICAgICAgcmV0dXJuIDgNCiAgICBlbHNlaWYgYV9iID49IDQwMCB0aGVuDQogICAgICByZXR1cm4gNw0KICAgIGVsc2VpZiBhX2IgPj0gMzAwIHRoZW4NCiAgICAgIHJl
dHVybiA2DQogICAgZWxzZWlmIGFfYiA+PSAyMDAgdGhlbg0KICAgICAgcmV0dXJuIDUNCiAgICBlbHNlaWYgYV9iID49IDE1MCB0aGVuDQogICAgICByZXR1cm4gNA0KICAgIGVsc2VpZiBhX2Ig
Pj0gMTAwIHRoZW4NCiAgICAgIHJldHVybiAzDQogICAgZWxzZWlmIGFfYiA8PSA3MCBhbmQgYV9iID49IDUwIHRoZW4NCiAgICAgIHJldHVybiAxDQogICAgZWxzZWlmIGFfYiA8PSA1MCB0aGVu
DQogICAgICByZXR1cm4gMA0KICAgIGVsc2VpZiBhX2IgPD0gMTAwIHRoZW4NCiAgICAgIHJldHVybiAyDQogICAgZW5kDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCmVuZA0KZnVuY3Rp
b24gSXNLaWxsYWJsZShkZGEpDQogIGxvY2FsIF9fYiA9IDANCiAgbG9jYWwgYV9iID0gZGRhLmhlYWx0aA0KICBmb3IgYl9iLCBjX2IgaW4gcGFpcnMoew0KICAgIF9RLA0KICAgIF9XLA0KICAg
IF9FLA0KICAgIF9SDQogIH0pIGRvDQogICAgaWYgY19iIHRoZW4NCiAgICAgIGlmIGNfYiA9PSBfUiBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGNfYikgPT0gUkVBRFkgdGhlbg0KICAgICAgICBf
X2IgPSBfX2IgKyBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUlEiLCBkZGEpDQogICAgICBlbHNlaWYgY19iID09IF9SIG9yIG15SGVybzpDYW5Vc2VTcGVsbChjX2IpIH49IFJFQURZIG9yIGNfYiA9
PSBfVyBhbmQgd1VzZWQoKSB0aGVuDQogICAgICBlbHNlaWYgY19iID09IF9RIHRoZW4NCiAgICAgICAgX19iID0gX19iICsgU3BlbGxEbWdDYWxjdWxhdGlvbnMoU3BlbGxUb1N0cmluZyhjX2Ip
LCBkZGEpDQogICAgICAgIF9fYiA9IF9fYiArIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJRUHJvYyIsIGRkYSkNCiAgICAgIGVsc2UNCiAgICAgICAgX19iID0gX19iICsgU3BlbGxEbWdDYWxjdWxh
dGlvbnMoU3BlbGxUb1N0cmluZyhjX2IpLCBkZGEpDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGlmIG5vdCBkYW1nZSBvciBub3QgX19iIHRoZW4NCiAgICBfX2IgPSAwDQogIGVuZA0K
ICByZXR1cm4gX19iIGFuZCB0eXBlKF9fYikgPT0gIm51bWJlciIgYW5kIGFfYiBhbmQgdHlwZShhX2IpID09ICJudW1iZXIiIGFuZCBhX2IgPD0gX19iIG9yIGZhbHNlDQplbmQNCmZ1bmN0aW9u
IERhbWFnZVRvTWUoZGRhKQ0KICBsb2NhbCBfX2IgPSAwDQogIGZvciBhX2IsIGJfYiBpbiBwYWlycyh7DQogICAgX1EsDQogICAgX1csDQogICAgX0UsDQogICAgX1INCiAgfSkgZG8NCiAgICBp
ZiBiX2IgYW5kIGRkYTpDYW5Vc2VTcGVsbChiX2IpID09IFJFQURZIHRoZW4NCiAgICAgIF9fYiA9IF9fYiArIGdldERtZyhTcGVsbFRvU3RyaW5nKGJfYiksIG15SGVybywgZGRhKQ0KICAgIGVu
ZA0KICBlbmQNCiAgX19iID0gZGRhOkNhbGNNYWdpY0RhbWFnZShteUhlcm8sIF9fYikNCiAgaWYgbm90IGRhbWdlIG9yIG5vdCBfX2IgdGhlbg0KICAgIF9fYiA9IDANCiAgZW5kDQogIHJldHVy
biBfX2IgYW5kIHR5cGUoX19iKSA9PSAibnVtYmVyIiBhbmQgaGVhbHRoIGFuZCB0eXBlKGhlYWx0aCkgPT0gIm51bWJlciIgYW5kIF9fYiBvciAwDQplbmQNCmZ1bmN0aW9uIENoZWNrQURDVGFy
Z2V0KGRkYSkNCiAgbG9jYWwgX19iID0gZmFsc2UNCiAgbG9jYWwgYV9iDQogIGZvciBiX2IsIGNfYiBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIGNfYiBhbmQgY19iLnR5
cGUgYW5kIGNfYi50eXBlID09IG15SGVyby50eXBlIGFuZCBHZXREaXN0YW5jZVNxcihjX2IpIDw9IGNfYi5yYW5nZSAqIGNfYi5yYW5nZSBhbmQgdGFibGUuY29udGFpbnMocHJpb3JpdHlUYWJs
ZS5BRF9DYXJyeSwgY19iLmNoYXJOYW1lKSB0aGVuDQogICAgICBfX2IgPSB0cnVlDQogICAgICBhX2IgPSBjX2INCiAgICAgIGJyZWFrDQogICAgZW5kDQogIGVuZA0KICBpZiBfX2IgdGhlbg0K
ICAgIGxvY2FsIGJfYiA9IHt9DQogICAgbG9jYWwgY19iID0gR2V0TGF0ZW5jeSgpDQogICAgZm9yIGJhYiwgY2FiIGluIHBhaXJzKHsNCiAgICAgIF9RLA0KICAgICAgX1csDQogICAgICBfRSwN
CiAgICAgIF9SDQogICAgfSkgZG8NCiAgICAgIGlmIGNhYiBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGNhYikgPT0gUkVBRFkgdGhlbg0KICAgICAgICB0YWJsZS5pbnNlcnQoYl9iLCBjYWIpDQog
ICAgICBlbmQNCiAgICBlbmQNCiAgICBsb2NhbCBkX2IgPSAwDQogICAgZm9yIGJhYiwgY2FiIGluIHBhaXJzKGJfYikgZG8NCiAgICAgIGxvY2FsIGRhYiA9IFNwZWxsc1tTcGVsbFRvU3RyaW5n
KGNhYildLmRlbGF5DQogICAgICBsb2NhbCBfYmIgPSBTcGVsbHNbU3BlbGxUb1N0cmluZyhjYWIpXS5zcGVlZA0KICAgICAgaWYgZGFiID09IG5pbCB0aGVuDQogICAgICAgIGRhYiA9IDAuMg0K
ICAgICAgZW5kDQogICAgICBpZiBfYmIgPT0gbmlsIHRoZW4NCiAgICAgICAgX2JiID0gMTgwMA0KICAgICAgZW5kDQogICAgICBkX2IgPSBkX2IgKyBkYWIgKyBjX2IgLyAyMDAwICsgR2V0RGlz
dGFuY2UoYV9iKSAvIF9iYg0KICAgIGVuZA0KICAgIGxvY2FsIF9hYiA9IG1hdGguY2VpbChteUhlcm8uaGVhbHRoIC8gZ2V0RG1nKCJBRCIsIG15SGVybywgYV9iKSkNCiAgICBsb2NhbCBhYWIg
PSAwDQogICAgaWYgQmFzZVdpbmRVcFRpbWVbYV9iLm5ldHdvcmtJRF0gYW5kIEJhc2VBbmltYXRpb25UaW1lW2FfYi5uZXR3b3JrSURdIHRoZW4NCiAgICAgIGFhYiA9ICgxIC8gKGFfYi5hdHRh
Y2tTcGVlZCAqIEJhc2VXaW5kVXBUaW1lW2FfYi5uZXR3b3JrSURdKSArIDEgLyAoYV9iLmF0dGFja1NwZWVkICogQmFzZUFuaW1hdGlvblRpbWVbYV9iLm5ldHdvcmtJRF0pICsgY19iIC8gMjAw
MCkgKiBfYWINCiAgICBlbHNlDQogICAgICBhYWIgPSBfYWIgLyBhX2IuYXR0YWNrU3BlZWQNCiAgICBlbmQNCiAgICBpZiBkX2IgPD0gYWFiIC8gNSB0aGVuDQogICAgICByZXR1cm4gdHJ1ZQ0K
ICAgIGVuZA0KICBlbmQNCiAgcmV0dXJuIGZhbHNlDQplbmQNCmZ1bmN0aW9uIFNwZWxsVG9TdHJpbmcoZGRhKQ0KICByZXR1cm4gZGRhID09IF9RIGFuZCAiUSIgb3IgZGRhID09IF9XIGFuZCAi
VyIgb3IgZGRhID09IF9FIGFuZCAiRSIgb3IgZGRhID09IF9SIGFuZCAiUiINCmVuZA0KZnVuY3Rpb24gT25BcHBseUJ1ZmYoZGRhLCBfX2IsIGFfYikNCiAgaWYgX19iIGFuZCBfX2IudHlwZSA9
PSBteUhlcm8udHlwZSBhbmQgYV9iIGFuZCBhX2IudHlwZSBhbmQgX19iLm5ldHdvcmtJRCBhbmQgdGFibGUuY29udGFpbnMoYnVmZlR5cGVzLCBhX2IudHlwZSkgYW5kIF9fYi52YWxpZCBhbmQg
X19iLmJUYXJnZXRhYmxlIHRoZW4NCiAgICBpc1N0dW5uZWRbX19iLm5ldHdvcmtJRF0gPSB0cnVlDQogIGVuZA0KICBpZiBkZGEgYW5kIGRkYS5pc01lIGFuZCBfX2IgYW5kIF9fYi50ZWFtIGFu
ZCBfX2IudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgX19iLnR5cGUgYW5kIF9fYi50eXBlID09IG15SGVyby50eXBlIGFuZCBub3QgX19iLmRlYWQgYW5kIGFfYiBhbmQgYV9iLm5hbWUgdGhlbg0K
ICAgIGlmIGFfYi5uYW1lOmZpbmQoIkxlYmxhbmNTb3VsU2hhY2tsZSIpIHRoZW4NCiAgICAgIGNoYWluVGFyZ2V0ID0gX19iDQogICAgICBjYXN0ZWRFVGltZSA9IG9zLmNsb2NrKCkNCiAgICBl
bmQNCiAgICBpZiBhX2IubmFtZTpmaW5kKFNwZWxscy5RLmJ1ZmZRKSBvciBhX2IubmFtZTpmaW5kKFNwZWxscy5RLmJ1ZmZSKSB0aGVuDQogICAgICBlbmVtaWVzQnVmZnNbX19iLm5ldHdvcmtJ
RF0ucmVjZWl2ZWQgPSB0cnVlDQogICAgICBlbmVtaWVzQnVmZnNbX19iLm5ldHdvcmtJRF0uZW5kVGltZSA9IG9zLmNsb2NrKCkgKiAzNTAwDQogICAgZW5kDQogICAgaWYgYV9iLm5hbWU6bG93
ZXIoKTpmaW5kKCJzdW1tb25lcmRvdCIpIHRoZW4NCiAgICAgIGlnbml0ZVRpY2tbX19iLm5ldHdvcmtJRF0uaXNJZ25pdGVkID0gdHJ1ZQ0KICAgICAgaWduaXRlVGlja1tfX2IubmV0d29ya0lE
XS5zdGFydFQgPSBvcy5jbG9jaygpDQogICAgZW5kDQogIGVuZA0KICBpZiBfX2IgYW5kIF9fYi5pc01lIGFuZCBhX2IgYW5kIGFfYi5uYW1lID09ICJSZWdlbmVyYXRpb25Qb3Rpb24iIHRoZW4N
CiAgICBoYXNQb3Rpb25BY3RpdmUgPSB0cnVlDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBPblJlbW92ZUJ1ZmYoZGRhLCBfX2IpDQogIGlmIHRhcmdldCBhbmQgdGFyZ2V0LnR5cGUgPT0gbXlIZXJv
LnR5cGUgYW5kIF9fYiBhbmQgX19iLnR5cGUgYW5kIHRhcmdldC5uZXR3b3JrSUQgYW5kIHRhYmxlLmNvbnRhaW5zKGJ1ZmZUeXBlcywgX19iLnR5cGUpIHRoZW4NCiAgICBpc1N0dW5uZWRbdGFy
Z2V0Lm5ldHdvcmtJRF0gPSBmYWxzZQ0KICBlbmQNCiAgaWYgZGRhIGFuZCBkZGEudHlwZSBhbmQgZGRhLnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIF9fYiBhbmQgX19iLm5hbWUgdGhlbg0KICAg
IGlmIGNoYWluVGFyZ2V0IGFuZCBfX2IubmFtZTpmaW5kKCJMZWJsYW5jU291bFNoYWNrbGUiKSBhbmQgZGRhLm5ldHdvcmtJRCA9PSBjaGFpblRhcmdldC5uZXR3b3JrSUQgdGhlbg0KICAgICAg
Y2hhaW5UYXJnZXQgPSBuaWwNCiAgICBlbmQNCiAgICBpZiBpZ25pdGVkVGFibGUuaWduaXRlZCBhbmQgZGRhLmlzTWUgYW5kIF9fYi5uYW1lID09ICJzdW1tb25lcmRvdCIgdGhlbg0KICAgICAg
aWduaXRlZFRhYmxlLmlnbml0ZWQgPSBmYWxzZQ0KICAgICAgaWduaXRlZFRhYmxlLnNvdXJjZSA9IG5pbA0KICAgICAgaWduaXRlZFRhYmxlLmhhc1NhaWQgPSBmYWxzZQ0KICAgICAgaWduaXRl
ZFRhYmxlLndpbGxLaWxsTWUgPSBmYWxzZQ0KICAgIGVuZA0KICAgIGlmIGRkYS50ZWFtIGFuZCBkZGEudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgaWduaXRlVGlja1tkZGEubmV0d29ya0lEXS5p
c0lnbml0ZWQgPT0gdHJ1ZSBhbmQgX19iLm5hbWU6bG93ZXIoKTpmaW5kKCJzdW1tb25lcmRvdCIpIHRoZW4NCiAgICAgIGlnbml0ZVRpY2tbZGRhLm5ldHdvcmtJRF0uaXNJZ25pdGVkID0gZmFs
c2UNCiAgICBlbmQNCiAgICBpZiBkZGEuaXNNZSBhbmQgX19iLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIGhhc1BvdGlvbkFjdGl2ZSB0aGVuDQogICAgICBoYXNQb3Rpb25BY3Rp
dmUgPSBmYWxzZQ0KICAgIGVuZA0KICAgIGlmIGRkYS50ZWFtIGFuZCBkZGEudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgZW5lbWllc0J1ZmZzW2RkYS5uZXR3b3JrSURdLnJlY2VpdmVkID09IHRy
dWUgYW5kIChfX2IubmFtZTpmaW5kKFNwZWxscy5RLmJ1ZmZRKSBvciBfX2IubmFtZTpmaW5kKFNwZWxscy5RLmJ1ZmZSKSkgdGhlbg0KICAgICAgZW5lbWllc0J1ZmZzW2RkYS5uZXR3b3JrSURd
LnJlY2VpdmVkID0gZmFsc2UNCiAgICBlbmQNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIFNwZWxsQXZhaWxhYmxlKCkNCiAgcmV0dXJuIFFyZWFkeSBvciBJc1dSZWFkeSgpIG9yIFJyZWFkeSBvciBF
cmVhZHkNCmVuZA0KZnVuY3Rpb24gSWduaXRlV2lsbEtpbGxFbmVteShkZGEpDQogIGlmIGRkYSBhbmQgZGRhLnR5cGUgYW5kIGRkYS50eXBlID09IG15SGVyby50eXBlIGFuZCBkZGEubmV0d29y
a0lEIHRoZW4NCiAgICBpZiBpZ25pdGUgPT0gbmlsIHRoZW4NCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KICAgIGlmIGlnbml0ZVRpY2tbZGRhLm5ldHdvcmtJRF0uaXNJZ25pdGVkIHRo
ZW4NCiAgICAgIGxvY2FsIF9fYiA9IDUgKyBpZ25pdGVUaWNrW2RkYS5uZXR3b3JrSURdLnN0YXJ0VCAtIG9zLmNsb2NrKCkNCiAgICAgIGlmIF9fYiA8PSAwIHRoZW4NCiAgICAgICAgaWduaXRl
VGlja1tkZGEubmV0d29ya0lEXS5pc0lnbml0ZWQgPSBmYWxzZQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIGVuZA0KICAgICAgbG9jYWwgYV9iID0gMTAgKyBteUhlcm8ubGV2ZWwgKiA0
DQogICAgICBsb2NhbCBiX2IgPSBfX2IgKiBhX2INCiAgICAgIGxvY2FsIGNfYiA9IG15SGVyby5oZWFsdGggLyBteUhlcm8ubWF4SGVhbHRoDQogICAgICBpZiBiX2IgPiBkZGEuaGVhbHRoIGFu
ZCBjX2IgPiAwLjIgdGhlbg0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICByZXR1cm4gZmFsc2UNCmVuZA0KZnVuY3Rpb24gQ291bnRNaW5pb25zQXR0
YWNraW5nbWUoKQ0KICBsb2NhbCBkZGEgPSAwDQogIGxvY2FsIF9fYiA9IDANCiAgZm9yIGFfYiwgYl9iIGluIHBhaXJzKGFjdGl2ZU1pbmlvbnNBdHRhY2tzKSBkbw0KICAgIGlmIGJfYiBhbmQg
Yl9iLm1pbmlvbiBhbmQgYl9iLm1pbmlvbi50b3RhbERhbWFnZSBhbmQgYl9iLm1pbmlvbi52YWxpZCB0aGVuDQogICAgICBsb2NhbCBjX2IgPSAxMDAgLyAoMTAwICsgbXlIZXJvLmFybW9yKQ0K
ICAgICAgY19iID0gY19iIG9yIDENCiAgICAgIGRkYSA9IGRkYSArIDENCiAgICAgIF9fYiA9IGJfYi5taW5pb24udG90YWxEYW1hZ2UgKiBjX2INCiAgICBlbmQNCiAgZW5kDQogIHJldHVybiBk
ZGEsIF9fYg0KZW5kDQpmdW5jdGlvbiBNaW5pb25zQXR0YWNraW5nTWUoKQ0KICBmb3IgZGRhLCBfX2IgaW4gcGFpcnMoYWN0aXZlTWluaW9uc0F0dGFja3MpIGRvDQogICAgbG9jYWwgYV9iID0g
ZmFsc2UNCiAgICBpZiBfX2IgYW5kIF9fYi5taW5pb24gYW5kIF9fYi5taW5pb24udmFsaWQgdGhlbg0KICAgICAgaWYgX19iLnNwZWxsIGFuZCBub3QgX19iLm1pbmlvbi5kZWFkIHRoZW4NCiAg
ICAgICAgaWYgVmFsaWRUYXJnZXQoX19iLm1pbmlvbikgdGhlbg0KICAgICAgICAgIGxvY2FsIGJfYiA9IF9fYi5zcGVsbC53aW5kVXBUaW1lDQogICAgICAgICAgYl9iID0gYl9iIG9yIDANCiAg
ICAgICAgICBsb2NhbCBjX2IgPSBfX2Iuc3BlbGwuYW5pbWF0aW9uVGltZQ0KICAgICAgICAgIGNfYiA9IGNfYiBvciAwDQogICAgICAgICAgbG9jYWwgZF9iID0gX19iLnN0YXJ0VCArIGJfYiAr
IEdldExhdGVuY3koKSAvIDIwMDAgKyBHZXREaXN0YW5jZShfX2IubWluaW9uKSAvIG1hdGguaHVnZSArIGNfYg0KICAgICAgICAgIGlmIGRfYiA8IG9zLmNsb2NrKCkgdGhlbg0KICAgICAgICAg
ICAgYV9iID0gdHJ1ZQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlDQogICAgICAgICAgYV9iID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICAgIGVsc2UNCiAgICAgICAgYV9iID0gdHJ1ZQ0K
ICAgICAgZW5kDQogICAgZWxzZQ0KICAgICAgYV9iID0gdHJ1ZQ0KICAgIGVuZA0KICAgIGlmIGFfYiB0aGVuDQogICAgICB0YWJsZS5yZW1vdmUoYWN0aXZlTWluaW9uc0F0dGFja3MsIGRkYSkN
CiAgICBlbmQNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIE9uUHJvY2Vzc1NwZWxsKGRkYSwgX19iKQ0KICBpZiBkZGEgYW5kIGRkYS50eXBlIGFuZCBkZGEudHlwZSA9PSBteUhlcm8udHlwZSBhbmQg
ZGRhLnRlYW0gYW5kIGRkYS50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBfX2IgYW5kIF9fYi5uYW1lIGFuZCBfX2IubmFtZTpsb3dlcigpOmZpbmQoImF0dGFjayIpIHRoZW4NCiAgICBCYXNlQW5p
bWF0aW9uVGltZVtkZGEubmV0d29ya0lEXSA9IDEgLyAoX19iLmFuaW1hdGlvblRpbWUgKiBkZGEuYXR0YWNrU3BlZWQpDQogICAgQmFzZVdpbmRVcFRpbWVbZGRhLm5ldHdvcmtJRF0gPSAxIC8g
KF9fYi53aW5kVXBUaW1lICogZGRhLmF0dGFja1NwZWVkKQ0KICBlbmQNCiAgaWYgZGRhIGFuZCBkZGEudHlwZSBhbmQgZGRhLnR5cGUgPT0gIm9ial9BSV9UdXJyZXQiIGFuZCBfX2IgYW5kIF9f
Yi50YXJnZXQgYW5kIF9fYi50YXJnZXQuaXNNZSB0aGVuDQogICAgdHVycmV0Rm9jdXMuZm9jdXNlZCA9IHRydWUNCiAgICB0dXJyZXRGb2N1cy5zdGFydFQgPSBvcy5jbG9jaygpDQogICAgdHVy
cmV0Rm9jdXMudHVycmV0ID0gZGRhDQogICAgdHVycmV0Rm9jdXMuc3BlbGwgPSBfX2INCiAgZW5kDQogIGlmIGRkYSBhbmQgZGRhLnR5cGUgYW5kIGRkYS50eXBlID09ICJvYmpfQUlfTWluaW9u
IiBhbmQgZGRhLnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIF9fYiBhbmQgX19iLnRhcmdldCBhbmQgX19iLnRhcmdldC5pc01lIHRoZW4NCiAgICBmb3IgYV9iLCBiX2IgaW4gcGFpcnMoYWN0aXZl
TWluaW9uc0F0dGFja3MpIGRvDQogICAgICBpZiBiX2IgYW5kIGJfYi5taW5pb24gYW5kIGJfYi5taW5pb24ubmV0d29ya0lEIGFuZCBiX2IubWluaW9uLm5ldHdvcmtJRCA9PSBkZGEubmV0d29y
a0lEIHRoZW4NCiAgICAgICAgdGFibGUucmVtb3ZlKGFjdGl2ZU1pbmlvbnNBdHRhY2tzLCBhX2IpDQogICAgICBlbmQNCiAgICBlbmQNCiAgICB0YWJsZS5pbnNlcnQoYWN0aXZlTWluaW9uc0F0
dGFja3MsIHsNCiAgICAgIG1pbmlvbiA9IGRkYSwNCiAgICAgIHN0YXJ0VCA9IG9zLmNsb2NrKCksDQogICAgICBzcGVsbCA9IF9fYg0KICAgIH0pDQogIGVuZA0KICBpZiBkZGEgYW5kIGRkYS50
eXBlIGFuZCBkZGEudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgZGRhLnRlYW0gYW5kIGRkYS50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBfX2IgYW5kIF9fYi5uYW1lIGFuZCBfX2IudGFyZ2V0IGFu
ZCBfX2IudGFyZ2V0LmlzTWUgYW5kIF9fYi5uYW1lID09ICJzdW1tb25lcmRvdCIgdGhlbg0KICAgIGlmIGdldERtZygiSUdOSVRFIiwgbXlIZXJvLCBkZGEpID49IG15SGVyby5oZWFsdGggdGhl
bg0KICAgICAgU2F5KGRkYS5jaGFyTmFtZSAuLiAiIGlnbml0ZWQgbWUuIElnbml0ZSBXSUxMIGtpbGwgbWUuIikNCiAgICAgIGlnbml0ZWRUYWJsZS5oYXNTYWlkID0gdHJ1ZQ0KICAgICAgaWdu
aXRlZFRhYmxlLndpbGxLaWxsTWUgPSB0cnVlDQogICAgZWxzZQ0KICAgICAgU2F5KGRkYS5jaGFyTmFtZSAuLiAiIGlnbml0ZWQgbWUuIEkgd2lsbCBzdXJ2aXZlLiIpDQogICAgZW5kDQogICAg
aWduaXRlZFRhYmxlLmlnbml0ZWQgPSB0cnVlDQogICAgaWduaXRlZFRhYmxlLnNvdXJjZSA9IGRkYQ0KICAgIGlnbml0ZWRUYWJsZS50aW1lID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYgZGRh
IGFuZCBkZGEuaXNNZSBhbmQgX19iIGFuZCBfX2IubmFtZSBhbmQgbm90IF9fYi5uYW1lOmxvd2VyKCk6ZmluZCgiYXR0YWNrIikgdGhlbg0KICAgIGlmIF9fYi5uYW1lID09IFNwZWxscy5FLnNw
ZWxsbmFtZSBvciBfX2IubmFtZSA9PSBTcGVsbHMuUi5FbmFtZSB0aGVuDQogICAgICBpQ2FzdGVkRVRpbWUgPSBvcy5jbG9jaygpDQogICAgZW5kDQogICAgaWYgKGNhbkNhc3RTcGVsbHMgPT0g
ZmFsc2Ugb3IgUlNraWxsIH49IG5pbCBvciBjYW5DYXN0U3BlbGxzID09IGZhbHNlIGFuZCBSU2tpbGwgfj0gbmlsKSBhbmQgclNwZWxsTmFtZVtfX2IubmFtZV0gfj0gbmlsIHRoZW4NCiAgICAg
IGNhbkNhc3RTcGVsbHMgPSB0cnVlDQogICAgICBSU2tpbGwgPSBuaWwNCiAgICAgIFJTa2lsbFBvcyA9IG5pbA0KICAgIGVuZA0KICAgIGlmIF9fYi50YXJnZXQgYW5kIF9fYi50YXJnZXQudHlw
ZSBhbmQgX19iLnRhcmdldC50eXBlID09IG15SGVyby50eXBlIGFuZCBfX2IudGFyZ2V0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIF9fYi50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICAgIGlmIF9f
Yi5uYW1lID09IFNwZWxscy5RLnNwZWxsbmFtZSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlEiLCBfX2IudGFyZ2V0KSA+PSBfX2IudGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgICAgIGlzS2ls
bGVkW19fYi50YXJnZXQubmV0d29ya0lEXSA9IHRydWUNCiAgICAgIGVsc2VpZiBfX2IubmFtZSA9PSBTcGVsbHMuUS5zcGVsbG5hbWUgYW5kIGVuZW1pZXNCdWZmc1tfX2IudGFyZ2V0Lm5ldHdv
cmtJRF0ucmVjZWl2ZWQgPT0gdHJ1ZSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlEiLCBfX2IudGFyZ2V0KSArIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJRUHJvYyIsIF9fYi50YXJnZXQpID49
IF9fYi50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICAgICAgaXNLaWxsZWRbX19iLnRhcmdldC5uZXR3b3JrSURdID0gdHJ1ZQ0KICAgICAgZWxzZWlmIF9fYi5uYW1lID09IFNwZWxscy5SLlFuYW1l
IGFuZCBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUlEiLCBfX2IudGFyZ2V0KSA+PSBfX2IudGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgICAgIGlzS2lsbGVkW19fYi50YXJnZXQubmV0d29ya0lEXSA9
IHRydWUNCiAgICAgIGVsc2VpZiBfX2IubmFtZSA9PSBTcGVsbHMuUi5RbmFtZSBhbmQgZW5lbWllc0J1ZmZzW19fYi50YXJnZXQubmV0d29ya0lEXS5yZWNlaXZlZCA9PSB0cnVlIGFuZCBTcGVs
bERtZ0NhbGN1bGF0aW9ucygiUlEiLCBfX2IudGFyZ2V0KSArIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJRUHJvYyIsIF9fYi50YXJnZXQpID49IF9fYi50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICAg
ICAgaXNLaWxsZWRbX19iLnRhcmdldC5uZXR3b3JrSURdID0gdHJ1ZQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgdGFyZ2V0IGFuZCBfX2IubmFtZSA9PSBTcGVsbHMuVy5zcGVsbG5hbWUg
YW5kIF9fYi5lbmRQb3MgYW5kIEdldERpc3RhbmNlKHRhcmdldCwgX19iLmVuZFBvcykgPD0gU3BlbGxzLlcucmFkaXVzIC0gNTAgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJXIiwgX19iLnRh
cmdldCkgPj0gdGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgICBpc0tpbGxlZFt0YXJnZXQubmV0d29ya0lEXSA9IHRydWUNCiAgICBlbmQNCiAgICBpZiAoX19iLm5hbWUgPT0gU3BlbGxzLlEuc3Bl
bGxuYW1lIG9yIF9fYi5uYW1lID09IFNwZWxscy5SLlFuYW1lKSBhbmQgV3JlYWR5IGFuZCB0YXJnZXQgYW5kIF9fYi50YXJnZXQgYW5kIF9fYi50YXJnZXQubmV0d29ya0lEIGFuZCBfX2IudGFy
Z2V0Lm5ldHdvcmtJRCA9PSB0YXJnZXQubmV0d29ya0lEIHRoZW4NCiAgICAgIGxvY2FsIGFfYiA9IEdldFdQcmVkaWN0aW9uKHRhcmdldCkNCiAgICAgIGlmIGFfYiB+PSBuaWwgdGhlbg0KICAg
ICAgICBsb2NhbCBiX2IgPSBvcy5jbG9jaygpDQogICAgICAgIGxvY2FsIGNfYiA9IFNwZWxscy5RLmRlbGF5DQogICAgICAgIGxvY2FsIGRfYiA9IEdldERpc3RhbmNlKHRhcmdldCkNCiAgICAg
ICAgbG9jYWwgX2FiID0gU3BlbGxzLlEuc3BlZWQNCiAgICAgICAgbG9jYWwgYWFiID0gZF9iIC8gX2FiICsgY19iDQogICAgICAgIGxvY2FsIGJhYiA9IGJfYiArIGFhYg0KICAgICAgICBsYXN0
UUNhc3QgPSB7DQogICAgICAgICAgdGFyZ2V0ID0gX19iLnRhcmdldCwNCiAgICAgICAgICBlbmRUID0gYmFiDQogICAgICAgIH0NCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGlmIF9fYi5uYW1l
ID09IFNwZWxscy5XLnNwZWxsbmFtZSB0aGVuDQogICAgICBTcGVsbHMuVy5zdGFydFBvcyA9IF9fYi5zdGFydFBvcw0KICAgICAgaWYgTWVudS5rZXlzZXR0aW5ncy51c2VIYXJhc3MgdGhlbg0K
ICAgICAgICBjYXN0ZWRXVGhyb3VnaEhhcmFzcy5ib29sID0gdHJ1ZQ0KICAgICAgICBjYXN0ZWRXVGhyb3VnaEhhcmFzcy50aW1lID0gb3MuY2xvY2soKQ0KICAgICAgZW5kDQogICAgZWxzZWlm
IF9fYi5uYW1lID09IFNwZWxscy5XUi5zcGVsbG5hbWUgdGhlbg0KICAgICAgU3BlbGxzLldSLnN0YXJ0UG9zID0gX19iLnN0YXJ0UG9zDQogICAgZW5kDQogICAgaWYgX19iLm5hbWUgPT0gU3Bl
bGxzLlEuc3BlbGxuYW1lIG9yIF9fYi5uYW1lID09IFNwZWxscy5XLnNwZWxsbmFtZSBvciBfX2IubmFtZSA9PSBTcGVsbHMuRS5zcGVsbG5hbWUgdGhlbg0KICAgICAgbGFzdEFjdGl2YXRlZCA9
IF9fYi5uYW1lDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBDb21ibygpDQogIGlmIG15SGVyby5kZWFkIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGlmIG5vdCB0YXJnZXQgdGhl
bg0KICAgIHJldHVybg0KICBlbmQNCiAgaWYgdGFyZ2V0IH49IG5pbCBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwKSB0aGVuDQogICAgaWYgdGFyZ2V0IGFuZCBub3QgdGFyZ2V0LnR5cGUg
dGhlbg0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgdGFyZ2V0IGFuZCBub3QgdGFyZ2V0Lm5ldHdvcmtJRCB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBpc0tpbGxl
ZFt0YXJnZXQubmV0d29ya0lEXSB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBJZ25pdGVXaWxsS2lsbEVuZW15KHRhcmdldCkgdGhlbg0KICAgICAgcmV0dXJuDQogICAgZW5k
DQogICAgaWYgTWVudS5jb21iby5jb21ib0l0ZW1zIHRoZW4NCiAgICAgIFVzZUl0ZW1zKHRhcmdldCkNCiAgICBlbmQNCiAgICBpZiAoY2FuQ2FzdFNwZWxscyA9PSBmYWxzZSBvciBSU2tpbGwg
fj0gbmlsKSBhbmQgUlNraWxsVGltZSArIDEuNSA8IG9zLmNsb2NrKCkgdGhlbg0KICAgICAgY2FuQ2FzdFNwZWxscyA9IHRydWUNCiAgICAgIFJTa2lsbCA9IG5pbA0KICAgICAgUlNraWxsUG9z
ID0gbmlsDQogICAgZW5kDQogICAgaWYgbm90IFJyZWFkeSBhbmQgKGNhbkNhc3RTcGVsbHMgPT0gZmFsc2Ugb3IgUlNraWxsIH49IG5pbCkgdGhlbg0KICAgICAgUlNraWxsID0gbmlsDQogICAg
ICBjYW5DYXN0U3BlbGxzID0gdHJ1ZQ0KICAgICAgUlNraWxsUG9zID0gbmlsDQogICAgZW5kDQogICAgaWYgUnJlYWR5IGFuZCBub3QgY2FuQ2FzdFNwZWxscyBhbmQgUlNraWxsIH49IG5pbCB0
aGVuDQogICAgICBpZiBSU2tpbGwgPT0gIlEiIHRoZW4NCiAgICAgICAgaWYgUlN0YXRlKCJRIikgdGhlbg0KICAgICAgICAgIENhc3RSUSh0YXJnZXQpDQogICAgICAgIGVsc2VpZiBRcmVhZHkg
dGhlbg0KICAgICAgICAgIGlmIENhc3RRKHRhcmdldCkgdGhlbg0KICAgICAgICAgICAgQ2FzdFJRKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIG5vdCBRcmVhZHkgYW5k
IG5vdCBSU3RhdGUoIlEiKSBvciBub3QgUnJlYWR5IHRoZW4NCiAgICAgICAgICBjYW5DYXN0U3BlbGxzID0gdHJ1ZQ0KICAgICAgICAgIFJTa2lsbCA9IG5pbA0KICAgICAgICBlbmQNCiAgICAg
IGVsc2VpZiBSU2tpbGwgPT0gIlciIHRoZW4NCiAgICAgICAgaWYgUlN0YXRlKCJXIikgdGhlbg0KICAgICAgICAgIGlmIFJTa2lsbFBvcyB0aGVuDQogICAgICAgICAgICBDYXN0UlcoUlNraWxs
UG9zLngsIFJTa2lsbFBvcy56KQ0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIENhc3RSVyh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBJc1dSZWFkeSgpIHRoZW4N
CiAgICAgICAgICBpZiBSU2tpbGxQb3MgdGhlbg0KICAgICAgICAgICAgaWYgQ2FzdFcoUlNraWxsUG9zLngsIFJTa2lsbFBvcy56KSB0aGVuDQogICAgICAgICAgICAgIENhc3RSVyhSU2tpbGxQ
b3MueCwgUlNraWxsUG9zLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbHNlaWYgQ2FzdFcodGFyZ2V0KSB0aGVuDQogICAgICAgICAgICBDYXN0UlcodGFyZ2V0KQ0KICAgICAgICAg
IGVuZA0KICAgICAgICBlbHNlaWYgbm90IFJTdGF0ZSgiVyIpIGFuZCBub3QgV3JlYWR5IG9yIG5vdCBScmVhZHkgdGhlbg0KICAgICAgICAgIGNhbkNhc3RTcGVsbHMgPSB0cnVlDQogICAgICAg
ICAgUlNraWxsID0gbmlsDQogICAgICAgICAgUlNraWxsUG9zID0gbmlsDQogICAgICAgIGVuZA0KICAgICAgZWxzZWlmIFJTa2lsbCA9PSAiRSIgdGhlbg0KICAgICAgICBpZiBSU3RhdGUoIkUi
KSB0aGVuDQogICAgICAgICAgQ2FzdFJFKHRhcmdldCkNCiAgICAgICAgZWxzZWlmIEVyZWFkeSB0aGVuDQogICAgICAgICAgaWYgQ2FzdEUodGFyZ2V0KSB0aGVuDQogICAgICAgICAgICBDYXN0
UkUodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgbm90IFJTdGF0ZSgiRSIpIGFuZCBub3QgRXJlYWR5IG9yIG5vdCBScmVhZHkgdGhlbg0KICAgICAgICAgIGNhbkNhc3RT
cGVsbHMgPSB0cnVlDQogICAgICAgICAgUlNraWxsID0gbmlsDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBub3QgY2FuQ2FzdFNwZWxscyBh
bmQgUlNraWxsIH49IG5pbCB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBNZW51LmtleXNldHRpbmdzLnVzZUNvbWJvIHRoZW4NCiAgICAgIFBlcmZvcm1Ob3JtYWxTbWFydENv
bWJvKHRhcmdldCkNCiAgICBlbHNlaWYgTWVudS5rZXlzZXR0aW5ncy51c2VDb21ib0dhcENsb3NlIHRoZW4NCiAgICAgIFNtYXJ0R2FwQ2xvc2VDb21ibyh0YXJnZXQpDQogICAgZWxzZWlmIE1l
bnUua2V5c2V0dGluZ3MudXNlQ29tYm9DaGFpbiB0aGVuDQogICAgICBTbWFydENoYWluQ29tYm8odGFyZ2V0KQ0KICAgIGVuZA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gUGVyZm9ybU5vcm1hbFNt
YXJ0Q29tYm8oZGRhKQ0KICBpZiBNZW51LmNvbWJvLmNvbWJvV2F5ID09IDEgdGhlbg0KICAgIFNtYXJ0Q29tYm8oZGRhKQ0KICBlbHNlaWYgTWVudS5jb21iby5jb21ib1dheSA9PSAyIHRoZW4N
CiAgICBDb21ib1FSV0UoZGRhKQ0KICBlbHNlaWYgTWVudS5jb21iby5jb21ib1dheSA9PSAzIHRoZW4NCiAgICBDb21ib1FXUkUoZGRhKQ0KICBlbHNlaWYgTWVudS5jb21iby5jb21ib1dheSA9
PSA0IHRoZW4NCiAgICBDb21ib1dRUkUoZGRhKQ0KICBlbHNlaWYgTWVudS5jb21iby5jb21ib1dheSA9PSA1IHRoZW4NCiAgICBDb21ib1dSUUUoZGRhKQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24g
U21hcnRHYXBDbG9zZUNvbWJvKGRkYSkNCiAgaWYgbm90IGRkYSB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICBpZiBkZGEgYW5kIG5vdCBkZGEudHlwZSB0aGVuDQogICAgcmV0dXJuDQogIGVu
ZA0KICBpZiBkZGEgYW5kIG5vdCBkZGEubmV0d29ya0lEIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGlmIGlzS2lsbGVkW2RkYS5uZXR3b3JrSURdIHRoZW4NCiAgICByZXR1cm4NCiAgZW5k
DQogIGlmIElnbml0ZVdpbGxLaWxsRW5lbXkoZGRhKSB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICBpZiBHZXREaXN0YW5jZVNxcihkZGEpID49IFNwZWxscy5XLnJhbmdlU3FyIGFuZCBHZXRE
aXN0YW5jZShkZGEpIDw9IFNwZWxscy5XLnJhbmdlICsgU3BlbGxzLlEucmFuZ2UgdGhlbg0KICAgIGlmIEdhcENsb3NlKGRkYSkgdGhlbg0KICAgICAgZ2FwQ2xvc2VTZXR0aW5ncy50aW1lID0g
b3MuY2xvY2soKQ0KICAgIGVuZA0KICBlbHNlDQogICAgUGVyZm9ybU5vcm1hbFNtYXJ0Q29tYm8oZGRhKQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gU21hcnRDaGFpbkNvbWJvKGRkYSkNCiAgaWYg
bm90IGRkYSB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICBpZiBkZGEgYW5kIG5vdCBkZGEudHlwZSB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICBpZiBkZGEgYW5kIG5vdCBkZGEubmV0d29y
a0lEIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGlmIGlzS2lsbGVkW2RkYS5uZXR3b3JrSURdIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGlmIElnbml0ZVdpbGxLaWxsRW5lbXkoZGRh
KSB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICBpZiBFcmVhZHkgYW5kIFJyZWFkeSB0aGVuDQogICAgaWYgRG91YmxlQ2hhaW5DaGVjayhkZGEpIGFuZCBDYXN0RShkZGEpIHRoZW4NCiAgICAg
IHJldHVybg0KICAgIGVuZA0KICAgIGlmIERvdWJsZUNoYWluQ2hlY2soZGRhKSBhbmQgQ2FzdFJFKGRkYSkgdGhlbg0KICAgICAgcmV0dXJuDQogICAgZW5kDQogIGVsc2VpZiBjaGFpblRhcmdl
dCBhbmQgUnJlYWR5IGFuZCBSU3RhdGUoIkUiKSB0aGVuDQogICAgaWYgRG91YmxlQ2hhaW5DaGVjayhjaGFpblRhcmdldCkgdGhlbg0KICAgICAgQ2FzdFJFKGNoYWluVGFyZ2V0KQ0KICAgIGVu
ZA0KICBlbHNlaWYgY2hhaW5UYXJnZXQgYW5kIEVyZWFkeSB0aGVuDQogICAgaWYgRG91YmxlQ2hhaW5DaGVjayhjaGFpblRhcmdldCkgdGhlbg0KICAgICAgQ2FzdEUoY2hhaW5UYXJnZXQpDQog
ICAgZW5kDQogIGVsc2VpZiBFcmVhZHkgYW5kIG5vdCBScmVhZHkgdGhlbg0KICAgIGlmIERvdWJsZUNoYWluQ2hlY2soZGRhKSB0aGVuDQogICAgICBDYXN0RShkZGEpDQogICAgZW5kDQogIGVs
c2VpZiBScmVhZHkgYW5kIG5vdCBFcmVhZHkgYW5kIFJTdGF0ZSgiRSIpIHRoZW4NCiAgICBpZiBEb3VibGVDaGFpbkNoZWNrKGRkYSkgdGhlbg0KICAgICAgQ2FzdFJFKGRkYSkNCiAgICBlbmQN
CiAgZWxzZWlmIEVyZWFkeSBhbmQgU3BlbGxBYm91dFRvQ29tZVVwKF9SKSBvciBScmVhZHkgYW5kIFNwZWxsQWJvdXRUb0NvbWVVcChfRSkgdGhlbg0KICAgIENhc3RRKGRkYSkNCiAgICBDYXN0
VyhkZGEpDQogIGVsc2VpZiBub3QgU3BlbGxBYm91dFRvQ29tZVVwKF9FKSB0aGVuDQogICAgUGVyZm9ybU5vcm1hbFNtYXJ0Q29tYm8oZGRhKQ0KICBlbHNlDQogICAgQ2FzdFEoZGRhKQ0KICAg
IENhc3RSUShkZGEpDQogICAgaWYgbm90IFFyZWFkeSBhbmQgKG5vdCBScmVhZHkgb3Igbm90IFJTdGF0ZSgiUSIpKSB0aGVuDQogICAgICBDYXN0VyhkZGEpDQogICAgZW5kDQogIGVuZA0KZW5k
DQpmdW5jdGlvbiBEb3VibGVDaGFpbkNoZWNrKGRkYSkNCiAgaWYgbm90IGRkYSB0aGVuDQogICAgcmV0dXJuIHRydWUNCiAgZW5kDQogIGlmIGRkYSBhbmQgbm90IGRkYS50eXBlIHRoZW4NCiAg
ICByZXR1cm4gdHJ1ZQ0KICBlbmQNCiAgaWYgaUNhc3RlZEVUaW1lICsgMC41ID4gb3MuY2xvY2soKSB0aGVuDQogICAgcmV0dXJuIGZhbHNlDQogIGVuZA0KICBpZiBpQ2FzdGVkRVRpbWUgKyAx
LjUgPiBvcy5jbG9jaygpIGFuZCBub3QgY2hhaW5UYXJnZXQgdGhlbg0KICAgIHJldHVybiB0cnVlDQogIGVuZA0KICBpZiBjaGFpblRhcmdldCBhbmQgY2hhaW5UYXJnZXQubmV0d29ya0lEIGFu
ZCBjaGFpblRhcmdldC5uZXR3b3JrSUQgPT0gZGRhLm5ldHdvcmtJRCB0aGVuDQogICAgbG9jYWwgX19iID0gR2V0RGlzdGFuY2UoZGRhKSAvIFNwZWxscy5FLnNwZWVkICsgU3BlbGxzLkUuZGVs
YXkNCiAgICBpZiBjYXN0ZWRFVGltZSArICgyLjggLSBfX2IpID4gb3MuY2xvY2soKSB0aGVuDQogICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCiAgZW5kDQogIHJldHVybiB0cnVlDQplbmQN
CmZ1bmN0aW9uIENvbWJvUVJXRShkZGEpDQogIGlmIFFyZWFkeSBhbmQgUnJlYWR5IGFuZCBHZXREaXN0YW5jZShkZGEpIDw9IFNwZWxscy5RLnJhbmdlIHRoZW4NCiAgICBpZiBDYXN0UShkZGEp
IHRoZW4NCiAgICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgICAgUlNraWxsID0gIlEiDQogICAgICBSU2tpbGxUaW1lID0gb3MuY2xvY2soKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQog
IGVsc2VpZiBRcmVhZHkgYW5kIG5vdCBScmVhZHkgdGhlbg0KICAgIENhc3RRKGRkYSkNCiAgZWxzZWlmIFJyZWFkeSBhbmQgbm90IFFyZWFkeSBhbmQgUlN0YXRlKCJRIikgdGhlbg0KICAgIENh
c3RSUShkZGEpDQogIGVsc2VpZiBub3QgUXJlYWR5IGFuZCAobm90IFJyZWFkeSBvciBub3QgUlN0YXRlKCJRIikpIHRoZW4NCiAgICBpZiBJc1dSZWFkeSgpIHRoZW4NCiAgICAgIENhc3RXKGRk
YSkNCiAgICBlbmQNCiAgICBDYXN0RShkZGEpDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBDb21ib1FXUkUoZGRhKQ0KICBpZiBRcmVhZHkgYW5kIG5vdCBSU3RhdGUoIlciKSB0aGVuDQogICAgQ2Fz
dFEoZGRhKQ0KICBlbHNlaWYgSXNXUmVhZHkoKSBhbmQgUnJlYWR5IGFuZCBub3Qgd3JVc2VkKCkgYW5kIEdldERpc3RhbmNlU3FyKGRkYSkgPD0gU3BlbGxzLlcucmFuZ2VTcXIgdGhlbg0KICAg
IGlmIENhc3RXKGRkYSkgdGhlbg0KICAgICAgY2FuQ2FzdFNwZWxscyA9IGZhbHNlDQogICAgICBSU2tpbGwgPSAiVyINCiAgICAgIFJTa2lsbFRpbWUgPSBvcy5jbG9jaygpDQogICAgICByZXR1
cm4NCiAgICBlbmQNCiAgZWxzZWlmIElzV1JlYWR5KCkgYW5kIG5vdCBScmVhZHkgYW5kIG5vdCB3VXNlZCgpIHRoZW4NCiAgICBDYXN0VyhkZGEpDQogIGVsc2VpZiBScmVhZHkgYW5kIFJTdGF0
ZSgiVyIpIGFuZCBHZXREaXN0YW5jZVNxcihkZGEpIDw9IFNwZWxscy5XLnJhbmdlU3FyIGFuZCBub3Qgd3JVc2VkKCkgdGhlbg0KICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgIFJTa2ls
bCA9ICJXIg0KICAgIFJTa2lsbFRpbWUgPSBvcy5jbG9jaygpDQogICAgcmV0dXJuDQogIGVsc2VpZiBub3QgUXJlYWR5IGFuZCBub3QgSXNXUmVhZHkoKSBhbmQgKG5vdCBScmVhZHkgb3Igbm90
IFJTdGF0ZSgiVyIpKSB0aGVuDQogICAgQ2FzdEUoZGRhKQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gQ29tYm9XUVJFKGRkYSkNCiAgaWYgSXNXUmVhZHkoKSB0aGVuDQogICAgQ2FzdFcoZGRhKQ0K
ICBlbHNlaWYgUXJlYWR5IGFuZCBScmVhZHkgYW5kIEdldERpc3RhbmNlKGRkYSkgPD0gU3BlbGxzLlEucmFuZ2UgYW5kIG5vdCBJc1dSZWFkeSgpIHRoZW4NCiAgICBpZiBDYXN0UShkZGEpIHRo
ZW4NCiAgICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgICAgUlNraWxsID0gIlEiDQogICAgICBSU2tpbGxUaW1lID0gb3MuY2xvY2soKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQogIGVs
c2VpZiBRcmVhZHkgYW5kIG5vdCBScmVhZHkgYW5kIG5vdCBJc1dSZWFkeSgpIHRoZW4NCiAgICBDYXN0UShkZGEpDQogIGVsc2VpZiBScmVhZHkgYW5kIG5vdCBRcmVhZHkgYW5kIFJTdGF0ZSgi
USIpIHRoZW4NCiAgICBDYXN0UlEoZGRhKQ0KICBlbHNlaWYgbm90IElzV1JlYWR5KCkgYW5kIG5vdCBRcmVhZHkgYW5kIChub3QgUnJlYWR5IG9yIG5vdCBSU3RhdGUoIlEiKSkgdGhlbg0KICAg
IENhc3RFKGRkYSkNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIENvbWJvV1JRRShkZGEpDQogIGlmIG5vdCB3clVzZWQoKSBhbmQgSXNXUmVhZHkoKSBhbmQgUnJlYWR5IHRoZW4NCiAgICBpZiBDYXN0
VyhkZGEpIHRoZW4NCiAgICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgICAgUlNraWxsID0gIlciDQogICAgICBSU2tpbGxUaW1lID0gb3MuY2xvY2soKQ0KICAgICAgcmV0dXJuDQogICAg
ZW5kDQogIGVsc2VpZiBub3QgUnJlYWR5IGFuZCBJc1dSZWFkeSgpIHRoZW4NCiAgICBDYXN0VyhkZGEpDQogIGVsc2VpZiBub3Qgd3JVc2VkKCkgYW5kIFJyZWFkeSBhbmQgbm90IElzV1JlYWR5
KCkgYW5kIFJTdGF0ZSgiVyIpIHRoZW4NCiAgICBjYW5DYXN0U3BlbGxzID0gZmFsc2UNCiAgICBSU2tpbGwgPSAiVyINCiAgICBSU2tpbGxUaW1lID0gb3MuY2xvY2soKQ0KICAgIHJldHVybg0K
ICBlbHNlaWYgbm90IElzV1JlYWR5KCkgYW5kIChub3QgUnJlYWR5IG9yIHdyVXNlZCgpIG9yIG5vdCBSU3RhdGUoIlciKSkgdGhlbg0KICAgIENhc3RRKGRkYSkNCiAgICBDYXN0RShkZGEpDQog
IGVuZA0KZW5kDQpmdW5jdGlvbiBDaGVja1N0dW5uZWQoKQ0KICBsb2NhbCBkZGEgPSAwDQogIGxvY2FsIF9fYiA9IHt9DQogIGxvY2FsIGFfYg0KICBmb3IgYl9iLCBjX2IgaW4gcGFpcnMoR2V0
RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBjX2IgYW5kIGlzU3R1bm5lZFtjX2IubmV0d29ya0lEXSBhbmQgR2V0RGlzdGFuY2VTcXIoY19iKSA8PSBTcGVsbHMuVy5yYW5nZVNxciB0aGVuDQog
ICAgICBkZGEgPSBkZGEgKyAxDQogICAgICB0YWJsZS5pbnNlcnQoX19iLCBjX2IpDQogICAgZW5kDQogIGVuZA0KICBpZiBfX2IgdGhlbg0KICAgIGFfYiA9IEdldENlbnRlcihfX2IpDQogIGVu
ZA0KICByZXR1cm4gZGRhID4gMywgYV9iDQplbmQNCmZ1bmN0aW9uIEdldENlbnRlcihkZGEpDQogIGxvY2FsIF9fYiA9IDANCiAgbG9jYWwgYV9iID0gMA0KICBmb3IgaSA9IDEsICNkZGEgZG8N
CiAgICBfX2IgPSBfX2IgKyBkZGFbaV0ueA0KICAgIGFfYiA9IGFfYiArIGRkYVtpXS56DQogIGVuZA0KICBsb2NhbCBiX2IgPSB7DQogICAgeCA9IF9fYiAvICNkZGEsDQogICAgeSA9IDAsDQog
ICAgeiA9IGFfYiAvICNkZGENCiAgfQ0KICByZXR1cm4gYl9iDQplbmQNCmZ1bmN0aW9uIFNtYXJ0Q29tYm8oZGRhKQ0KICBpZiBub3QgZGRhIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGlm
IGRkYSBhbmQgbm90IGRkYS50eXBlIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGlmIGRkYSBhbmQgbm90IGRkYS5uZXR3b3JrSUQgdGhlbg0KICAgIHJldHVybg0KICBlbmQNCiAgaWYgaXNL
aWxsZWRbZGRhLm5ldHdvcmtJRF0gdGhlbg0KICAgIHJldHVybg0KICBlbmQNCiAgaWYgSWduaXRlV2lsbEtpbGxFbmVteShkZGEpIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGxvY2FsIF9f
YiwgYV9iID0gQ2hlY2tTdHVubmVkKCkNCiAgaWYgX19iIGFuZCBhX2IgYW5kIChXcmVhZHkgb3IgUnJlYWR5KSB0aGVuDQogICAgaWYgV3JlYWR5IGFuZCBScmVhZHkgdGhlbg0KICAgICAgaWYg
Q2FzdFcoYV9iLngsIGFfYi56KSB0aGVuDQogICAgICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgICAgICBSU2tpbGwgPSAiVyINCiAgICAgICAgUlNraWxsVGltZSA9IG9zLmNsb2NrKCkN
CiAgICAgICAgUlNraWxsUG9zID0gYV9iDQogICAgICAgIHJldHVybg0KICAgICAgZW5kDQogICAgZWxzZWlmIFdyZWFkeSB0aGVuDQogICAgICBDYXN0VyhhX2IueCwgYV9iLnopDQogICAgZWxz
ZWlmIFJyZWFkeSBhbmQgUlN0YXRlKCJXIikgdGhlbg0KICAgICAgY2FuQ2FzdFNwZWxscyA9IGZhbHNlDQogICAgICBSU2tpbGwgPSAiVyINCiAgICAgIFJTa2lsbFRpbWUgPSBvcy5jbG9jaygp
DQogICAgICBSU2tpbGxQb3MgPSBhX2INCiAgICAgIHJldHVybg0KICAgIGVuZA0KICBlbmQNCiAgbG9jYWwgYl9iLCBjX2IsIGRfYiA9IFJldHVybkJlc3RUYXJnZXRQb3NpdGlvbigzLCBTcGVs
bHMuVy5yYW5nZSkNCiAgaWYgYl9iIH49IG5pbCBhbmQgY19iIH49IG5pbCBhbmQgR2V0RGlzdGFuY2VTcXIoYl9iKSA8IFNwZWxscy5XLnJhbmdlU3FyIGFuZCBub3Qgd3JVc2VkKCkgYW5kIElz
V1JlYWR5KCkgYW5kIFJyZWFkeSBhbmQgZF9iID49IDMgYW5kIENhc3RXKGJfYi54LCBiX2IueikgdGhlbg0KICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgIFJTa2lsbCA9ICJXIg0KICAg
IFJTa2lsbFRpbWUgPSBvcy5jbG9jaygpDQogICAgcmV0dXJuDQogIGVuZA0KICBsb2NhbCBfYWIgPSBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUSIsIGRkYSkNCiAgbG9jYWwgYWFiID0gU3BlbGxE
bWdDYWxjdWxhdGlvbnMoIlFQcm9jIiwgZGRhKQ0KICBsb2NhbCBiYWIgPSBTcGVsbERtZ0NhbGN1bGF0aW9ucygiVyIsIGRkYSkNCiAgbG9jYWwgY2FiID0gU3BlbGxEbWdDYWxjdWxhdGlvbnMo
IkUiLCBkZGEpDQogIGxvY2FsIGRhYiA9IFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJSUSIsIGRkYSkNCiAgbG9jYWwgX2JiID0gU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlJXIiwgZGRhKQ0KICBsb2Nh
bCBhYmIgPSBHZXREaXN0YW5jZVNxcihkZGEpDQogIGxvY2FsIGJiYiA9ICJRIg0KICBpZiBfYWIgKyBkYWIgKyBhYWIgKyBhYWIgKyBiYWIgKyBjYWIgPCBfYWIgKyBhYWIgKyBiYWIgKyBfYmIg
KyBjYWIgdGhlbg0KICAgIGJiYiA9ICJXIg0KICBlbmQNCiAgaWYgUXJlYWR5IGFuZCBJc1dSZWFkeSgpIGFuZCBScmVhZHkgYW5kIGJiYiA9PSAiUSIgdGhlbg0KICAgIGlmIENhc3RRKGRkYSkg
dGhlbg0KICAgICAgY2FuQ2FzdFNwZWxscyA9IGZhbHNlDQogICAgICBSU2tpbGwgPSAiUSINCiAgICAgIFJTa2lsbFRpbWUgPSBvcy5jbG9jaygpDQogICAgZW5kDQogIGVsc2VpZiBRcmVhZHkg
YW5kIFJyZWFkeSBhbmQgSXNXUmVhZHkoKSBhbmQgbm90IHdyVXNlZCgpIGFuZCBhYmIgPCBTcGVsbHMuVy5yYW5nZVNxciBhbmQgYmJiID09ICJXIiB0aGVuDQogICAgQ2FzdFEoZGRhKQ0KICAg
IGlmIENhc3RXKGRkYSkgdGhlbg0KICAgICAgY2FuQ2FzdFNwZWxscyA9IGZhbHNlDQogICAgICBSU2tpbGwgPSAiVyINCiAgICAgIFJTa2lsbFRpbWUgPSBvcy5jbG9jaygpDQogICAgZW5kDQog
IGVsc2VpZiBhYmIgPCBjdXJyZW50UmFuZ2UgKiBjdXJyZW50UmFuZ2UgYW5kIGFiYiA+IFNwZWxscy5RLnJhbmdlICogU3BlbGxzLlEucmFuZ2UgdGhlbg0KICAgIENhc3RFKGRkYSkNCiAgZWxz
ZWlmIFFyZWFkeSBhbmQgUnJlYWR5IGFuZCBHZXREaXN0YW5jZVNxcihkZGEpIDwgU3BlbGxzLlEucmFuZ2UgKiBTcGVsbHMuUS5yYW5nZSBhbmQgKGJiYiA9PSAiVyIgYW5kIG5vdCBXcmVhZHkg
YW5kIG5vdCBTcGVsbEFib3V0VG9Db21lVXAoX1cpIG9yIGJiYiA9PSAiUSIpIHRoZW4NCiAgICBpZiBDYXN0UShkZGEpIHRoZW4NCiAgICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgICAg
UlNraWxsID0gIlEiDQogICAgICBSU2tpbGxUaW1lID0gb3MuY2xvY2soKQ0KICAgIGVuZA0KICBlbHNlaWYgV3JlYWR5IGFuZCBScmVhZHkgYW5kIEdldERpc3RhbmNlU3FyKGRkYSkgPCBTcGVs
bHMuVy5yYW5nZVNxciBhbmQgKGJiYiA9PSAiUSIgYW5kIG5vdCBRcmVhZHkgYW5kIG5vdCBTcGVsbEFib3V0VG9Db21lVXAoX1EpIG9yIGJiYiA9PSAiVyIpIHRoZW4NCiAgICBpZiBDYXN0Vyhk
ZGEpIHRoZW4NCiAgICAgIGNhbkNhc3RTcGVsbHMgPSBmYWxzZQ0KICAgICAgUlNraWxsID0gIlciDQogICAgICBSU2tpbGxUaW1lID0gb3MuY2xvY2soKQ0KICAgIGVuZA0KICBlbHNlaWYgYmJi
ID09ICJRIiBhbmQgUnJlYWR5IGFuZCBSU3RhdGUoIlEiKSB0aGVuDQogICAgQ2FzdFJRKGRkYSkNCiAgZWxzZWlmIGJiYiA9PSAiVyIgYW5kIFJyZWFkeSBhbmQgbm90IHdyVXNlZCgpIGFuZCBS
U3RhdGUoIlciKSB0aGVuDQogICAgQ2FzdFJXKGRkYSkNCiAgZWxzZWlmIGJiYiA9PSAiUSIgYW5kIFFyZWFkeSBhbmQgbm90IFJyZWFkeSBhbmQgbm90IElzS2lsbGFibGUoZGRhKSBhbmQgU3Bl
bGxBYm91dFRvQ29tZVVwKF9SKSB0aGVuDQogICAgQ2FzdFcoZGRhKQ0KICAgIENhc3RFKGRkYSkNCiAgZWxzZWlmIGJiYiA9PSAiVyIgYW5kIFdyZWFkeSBhbmQgbm90IFJyZWFkeSBhbmQgbm90
IElzS2lsbGFibGUoZGRhKSBhbmQgU3BlbGxBYm91dFRvQ29tZVVwKF9SKSB0aGVuDQogICAgQ2FzdFEoZGRhKQ0KICAgIENhc3RFKGRkYSkNCiAgZWxzZWlmIElzV1JlYWR5KCkgYW5kIG5vdCBF
cmVhZHkgYW5kIG5vdCBRcmVhZHkgYW5kIG5vdCBScmVhZHkgYW5kIFNwZWxsQWJvdXRUb0NvbWVVcChfUSkgYW5kIG5vdCBTcGVsbEFib3V0VG9Db21lVXAoX0UpIGFuZCBub3QgU3BlbGxBYm91
dFRvQ29tZVVwKF9SKSBhbmQgbm90IElzS2lsbGFibGUoZGRhKSBhbmQgbm90IChfYWIgKyBiYWIgPj0gZGRhLmhlYWx0aCkgdGhlbg0KICAgIHJldHVybg0KICBlbHNlaWYgRXJlYWR5IGFuZCBu
b3QgSXNXUmVhZHkoKSBhbmQgbm90IFFyZWFkeSBhbmQgbm90IFJyZWFkeSBhbmQgU3BlbGxBYm91dFRvQ29tZVVwKF9RKSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkuY3VycmVudENkID49
IFNwZWxscy5FLnByb2NUaW1lIGFuZCBub3QgU3BlbGxBYm91dFRvQ29tZVVwKF9XKSBhbmQgbm90IElzS2lsbGFibGUoZGRhKSBhbmQgbm90IChfYWIgKyBjYWIgPj0gZGRhLmhlYWx0aCkgYW5k
IEdldEVQcmVkaWN0aW9uKGRkYSkgfj0gbmlsIHRoZW4NCiAgICByZXR1cm4NCiAgZWxzZQ0KICAgIGlmIENhc3RRKGRkYSkgYW5kIF9hYiA+IGRkYS5oZWFsdGggdGhlbg0KICAgICAgaXNLaWxs
ZWRbZGRhLm5ldHdvcmtJRF0gPSB0cnVlDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBDYXN0UlEoZGRhKSBhbmQgZGFiID4gZGRhLmhlYWx0aCB0aGVuDQogICAgICBpc0tpbGxlZFtk
ZGEubmV0d29ya0lEXSA9IHRydWUNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIENhc3RXKGRkYSkgYW5kIGJhYiA+IGRkYS5oZWFsdGggdGhlbg0KICAgICAgaXNLaWxsZWRbZGRhLm5l
dHdvcmtJRF0gPSB0cnVlDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBDYXN0RShkZGEpDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBTcGVsbEFib3V0VG9Db21lVXAoZGRhKQ0KICByZXR1cm4g
bXlIZXJvOkdldFNwZWxsRGF0YShkZGEpLmxldmVsIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKGRkYSkubGV2ZWwgPj0gMSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShkZGEpLmN1cnJlbnRDZCBh
bmQgbWF0aC5mbG9vcihteUhlcm86R2V0U3BlbGxEYXRhKGRkYSkuY3VycmVudENkKSA8PSAyDQplbmQNCmZ1bmN0aW9uIFNwZWxsTk9UQWJvdXRUb0NvbWVVcChkZGEpDQogIHJldHVybiBteUhl
cm86R2V0U3BlbGxEYXRhKGRkYSkubGV2ZWwgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoZGRhKS5sZXZlbCA+PSAxIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKGRkYSkuY3VycmVudENkIGFuZCBt
YXRoLmZsb29yKG15SGVybzpHZXRTcGVsbERhdGEoZGRhKS5jdXJyZW50Q2QpID49IDUNCmVuZA0KZnVuY3Rpb24gQ2FzdFJRKGRkYSkNCiAgaWYgUlN0YXRlKCJRIikgYW5kIGRkYSBhbmQgUnJl
YWR5IGFuZCBHZXREaXN0YW5jZVNxcihkZGEpIDw9IFNwZWxscy5RLnJhbmdlICogU3BlbGxzLlEucmFuZ2UgdGhlbg0KICAgIENhc3RTcGVsbChfUiwgZGRhKQ0KICBlbmQNCmVuZA0KZnVuY3Rp
b24gQ2FzdFJXKGRkYSwgX19iKQ0KICBpZiBSU3RhdGUoIlciKSBhbmQgZGRhIGFuZCBScmVhZHkgdGhlbg0KICAgIGlmIG5vdCBfX2IgdGhlbg0KICAgICAgbG9jYWwgYV9iID0gR2V0V1ByZWRp
Y3Rpb24oZGRhKQ0KICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoZGRhKSA8PSBTcGVsbHMuVy5yYW5nZVNxciBhbmQgYV9iIH49IG5pbCBhbmQgbm90IHdyVXNlZCgpIHRoZW4NCiAgICAgICAgQ2Fz
dFNwZWxsKF9SLCBhX2IueCwgYV9iLnopDQogICAgICBlbmQNCiAgICBlbHNlaWYgR2V0RGlzdGFuY2VTcXIoUG9pbnQoZGRhLCBfX2IpKSA8PSBTcGVsbHMuVy5yYW5nZVNxciB0aGVuDQogICAg
ICBDYXN0U3BlbGwoX1IsIGRkYSwgX19iKQ0KICAgIGVuZA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gQ2FzdFJFKGRkYSkNCiAgaWYgUlN0YXRlKCJFIikgYW5kIGRkYSB0aGVuDQogICAgbG9jYWwg
X19iID0gR2V0RVByZWRpY3Rpb24oZGRhKQ0KICAgIGlmIFJyZWFkeSBhbmQgR2V0RGlzdGFuY2UoZGRhKSA8PSBTcGVsbHMuRS5yYW5nZSBhbmQgX19iIH49IG5pbCB0aGVuDQogICAgICBDYXN0
U3BlbGwoX1IsIF9fYi54LCBfX2IueikNCiAgICBlbmQNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIEhhcmFzcygpDQogIGlmIHRhcmdldCB+PSBuaWwgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCkgYW5k
IE1hbmFNYW5hZ2VyKCkgdGhlbg0KICAgIGlmIE1lbnUuaGFyYXNzLmhhcmFzc0UgdGhlbg0KICAgICAgQ2FzdEUodGFyZ2V0KQ0KICAgIGVuZA0KICAgIGlmIE1lbnUuaGFyYXNzLmhhcmFzc1Eg
dGhlbg0KICAgICAgQ2FzdFEodGFyZ2V0KQ0KICAgIGVuZA0KICAgIGlmIE1lbnUuaGFyYXNzLmhhcmFzc1cgYW5kIG5vdCBRcmVhZHkgdGhlbg0KICAgICAgQ2FzdFcodGFyZ2V0KQ0KICAgIGVu
ZA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVCbGFuY1NwZWNpZmljU3BlbGxDaGVja3MoKQ0KICBpZiB3VXNlZCgpIGFuZCBjYXN0ZWRXVGhyb3VnaEhhcmFzcy5ib29sIGFuZCAobm90IHRhcmdl
dCBvciBub3QgSXNLaWxsYWJsZSh0YXJnZXQpKSB0aGVuDQogICAgQ2FzdFNwZWxsKF9XKQ0KICAgIGNhc3RlZFdUaHJvdWdoSGFyYXNzLmJvb2wgPSBmYWxzZQ0KICAgIHJldHVybg0KICBlbmQN
CiAgbG9jYWwgZGRhID0gMA0KICBsb2NhbCBfX2IgPSAwDQogIGlmIHRhcmdldCBhbmQgQ291bnRFbmVteUhlcm9JblJhbmdlKDE1MDApID09IDEgYW5kIHdVc2VkKCkgdGhlbg0KICAgIF9fYiA9
IERhbWFnZVRvTWUodGFyZ2V0KQ0KICBlbmQNCiAgbG9jYWwgYV9iLCBiX2IgPSAwLCAwDQogIGlmIHdVc2VkKCkgdGhlbg0KICAgIGFfYiwgYl9iID0gQ291bnRNaW5pb25zQXR0YWNraW5nbWUo
KQ0KICBlbmQNCiAgaWYgYl9iID09IG5pbCB0aGVuDQogICAgYl9iID0gMA0KICBlbmQNCiAgaWYgd1VzZWQoKSBvciB3clVzZWQoKSB0aGVuDQogICAgZGRhID0gVG9vRGFuZ2Vyb3VzKG15SGVy
by5wb3MpDQogIGVuZA0KICBsb2NhbCBjX2IgPSAwDQogIGlmIHdVc2VkKCkgdGhlbg0KICAgIGNfYiA9IFRvb0Rhbmdlcm91cyhTcGVsbHMuVy5zdGFydFBvcykNCiAgZW5kDQogIGlmIENvdW50
RW5lbXlIZXJvSW5SYW5nZSg4MDApID09IDAgYW5kIFVuZGVyVHVycmV0KG15SGVybykgYW5kIHR1cnJldEZvY3VzLmZvY3VzZWQgdGhlbg0KICAgIENhc3RTcGVsbChfVykNCiAgICByZXR1cm4N
CiAgZW5kDQogIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg4MDApID09IDAgYW5kIGJfYiBhbmQgYl9iIC8gbXlIZXJvLmhlYWx0aCA8PSAwLjUgdGhlbg0KICAgIHJldHVybg0KICBlbmQNCiAg
aWYgY2FzdGVkRVRpbWUgKyAxLjIgPiBvcy5jbG9jaygpIGFuZCB3VXNlZCgpIGFuZCBkZGEgPD0gNSBhbmQgY19iIDw9IDMgYW5kIChub3QgVW5kZXJUdXJyZXQobXlIZXJvKSBvciBub3QgdHVy
cmV0Rm9jdXMuZm9jdXNlZCkgdGhlbg0KICAgIHJldHVybg0KICBlbmQNCiAgaWYgY2hhaW5UYXJnZXQgYW5kIGNhc3RlZEVUaW1lICsgMiA8IG9zLmNsb2NrKCkgdGhlbg0KICAgIGNoYWluVGFy
Z2V0ID0gbmlsDQogIGVuZA0KICBpZiB3VXNlZCgpIGFuZCBjaGFpblRhcmdldCB+PSBuaWwgYW5kIEdldERpc3RhbmNlKFNwZWxscy5XLnN0YXJ0UG9zLCBjaGFpblRhcmdldCkgPj0gU3BlbGxz
LkUucmFuZ2UgYW5kIGRkYSA8PSAzIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGlmIHdyVXNlZCgpIGFuZCBub3Qgd1VzZWQoKSBhbmQgY2hhaW5UYXJnZXQgfj0gbmlsIGFuZCBHZXREaXN0
YW5jZShTcGVsbHMuV1Iuc3RhcnRQb3MsIGNoYWluVGFyZ2V0KSA+PSBTcGVsbHMuRS5yYW5nZSB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICBpZiB3VXNlZCgpIGFuZCB3clVzZWQoKSBhbmQg
Y2hhaW5UYXJnZXQgYW5kIEdldERpc3RhbmNlKFNwZWxscy5XLnN0YXJ0UG9zLCBjaGFpblRhcmdldCkgPj0gU3BlbGxzLkUucmFuZ2UgYW5kIEdldERpc3RhbmNlKFNwZWxscy5XUi5zdGFydFBv
cywgY2hhaW5UYXJnZXQpID49IFNwZWxscy5FLnJhbmdlIGFuZCBkZGEgPD0gMyB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICBpZiB3VXNlZCgpIGFuZCBXcmVhZHkgdGhlbg0KICAgIGxvY2Fs
IGRfYiA9IG15SGVyby5oZWFsdGggLyBteUhlcm8ubWF4SGVhbHRoDQogICAgbG9jYWwgX2FiID0gKG15SGVyby5oZWFsdGggLSBiX2IpIC8gbXlIZXJvLm1heEhlYWx0aA0KICAgIGlmIGdhcENs
b3NlU2V0dGluZ3MudGltZSArIDEgPiBvcy5jbG9jaygpIHRoZW4NCiAgICAgIGlmIG5vdCBRcmVhZHkgYW5kIG5vdCBScmVhZHkgYW5kIChub3QgdGFyZ2V0IG9yIHRhcmdldCBhbmQgbm90IElz
S2lsbGFibGUodGFyZ2V0KSkgYW5kIDEgPCBDb3VudEVuZW15SGVyb0luUmFuZ2UoU3BlbGxzLlEucmFuZ2UpIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICByZXR1cm4NCiAg
ICAgIGVuZA0KICAgICAgaWYgZF9iIDw9IDAuMTUgYW5kIChub3QgdGFyZ2V0IG9yIG5vdCBJc0tpbGxhYmxlKHRhcmdldCkgb3IgQ291bnRFbmVteUhlcm9JblJhbmdlKFNwZWxscy5RLnJhbmdl
KSB+PSAxKSB0aGVuDQogICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgcmV0dXJuDQogICAgICBlbmQNCiAgICAgIGlmIGRkYSA+PSA1IHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XKQ0K
ICAgICAgICByZXR1cm4NCiAgICAgIGVuZA0KICAgICAgaWYgZF9iID49IDAuOCBhbmQgZGRhIDw9IDcgdGhlbg0KICAgICAgICByZXR1cm4NCiAgICAgIGVuZA0KICAgICAgaWYgZF9iIDw9IDAu
MyBhbmQgdGFyZ2V0IGFuZCBJc0tpbGxhYmxlKHRhcmdldCkgYW5kIENvdW50RW5lbXlIZXJvSW5SYW5nZShTcGVsbHMuUS5yYW5nZSkgPT0gMSB0aGVuDQogICAgICAgIHJldHVybg0KICAgICAg
ZW5kDQogICAgICBpZiBkX2IgPD0gMC4zIGFuZCBub3QgUXJlYWR5IGFuZCBub3QgUnJlYWR5IHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICByZXR1cm4NCiAgICAgIGVuZA0K
ICAgICAgaWYgZF9iID49IF9hYiBhbmQgX2FiIDw9IDAuMyBhbmQgbm90IHRhcmdldCB0aGVuDQogICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgcmV0dXJuDQogICAgICBlbmQNCiAgICAg
IHJldHVybg0KICAgIGVuZA0KICAgIGxvY2FsIGFhYiA9IChteUhlcm8uaGVhbHRoIC0gYl9iKSAvIG15SGVyby5oZWFsdGgNCiAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoMTAwMCkgPT0g
MCBhbmQgKG5vdCBVbmRlclR1cnJldChteUhlcm8sIHRydWUpIG9yIG5vdCB0dXJyZXRGb2N1cy5mb2N1c2VkKSBhbmQgYV9iIGFuZCBhX2IgPD0gNSB0aGVuDQogICAgICByZXR1cm4NCiAgICBl
bmQNCiAgICBpZiBkX2IgPj0gMC42IGFuZCBub3QgdGFyZ2V0IGFuZCAobm90IFVuZGVyVHVycmV0KG15SGVybykgb3Igbm90IHR1cnJldEZvY3VzLmZvY3VzZWQpIGFuZCBkX2IgPD0gX2FiICsg
MC4yIHRoZW4NCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIGRfYiA8PSAwLjIgYW5kIDIgPj0gQ291bnRFbmVteUhlcm9JblJhbmdlKDYwMCkgYW5kIG5vdCBVbmRlclR1cnJldChteUhl
cm8sIHRydWUpIHRoZW4NCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIGRfYiA8PSAwLjMgYW5kIHRhcmdldCBhbmQgSXNLaWxsYWJsZSh0YXJnZXQpIGFuZCBHZXREaXN0YW5jZSh0YXJn
ZXQpIDw9IDUwMCBhbmQgZGRhIDw9IDQgdGhlbg0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgZF9iIDw9IDAuNCBhbmQgdGFyZ2V0IGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IFNw
ZWxscy5RLnJhbmdlIGFuZCBJc0tpbGxhYmxlKHRhcmdldCkgYW5kIFVuZGVyVHVycmV0KG15SGVybywgdHJ1ZSkgdGhlbg0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgZF9iID49IDAu
NiBhbmQgdGFyZ2V0IGFuZCBJc0tpbGxhYmxlKHRhcmdldCkgYW5kIDgwMCA+PSBHZXREaXN0YW5jZSh0YXJnZXQpIGFuZCBkZGEgPD0gMyB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAg
ICBpZiB0YXJnZXQgYW5kIENvdW50RW5lbXlIZXJvSW5SYW5nZSgxNTAwKSA9PSAxIGFuZCAoSWduaXRlV2lsbEtpbGxFbmVteSh0YXJnZXQpIG9yIGlzS2lsbGVkW3RhcmdldC5uZXR3b3JrSURd
KSB0aGVuDQogICAgICBDYXN0U3BlbGwoX1cpDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiB0YXJnZXQgYW5kIG5vdCBTcGVsbEF2YWlsYWJsZSgpIGFuZCB0YXJnZXQuaGVhbHRoID4g
MzAwIGFuZCBub3QgU3BlbGxBYm91dFRvQ29tZVVwKF9RKSBhbmQgbm90IFNwZWxsQWJvdXRUb0NvbWVVcChfUikgYW5kIG5vdCBTcGVsbEFib3V0VG9Db21lVXAoX0UpIGFuZCBHZXREaXN0YW5j
ZShTcGVsbHMuVy5zdGFydFBvcykgPj0gMzAwIHRoZW4NCiAgICAgIENhc3RTcGVsbChfVykNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIGFhYiA8PSAwLjYgYW5kIFVuZGVyVHVycmV0
KG15SGVybywgdHJ1ZSkgYW5kIHR1cnJldEZvY3VzLmZvY3VzZWQgYW5kIChub3QgdGFyZ2V0IG9yIHRhcmdldCBhbmQgODAwIDw9IEdldERpc3RhbmNlKHRhcmdldCkpIHRoZW4NCiAgICAgIENh
c3RTcGVsbChfVykNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIGFhYiA8PSAwLjUgYW5kIENvdW50RW5lbXlIZXJvSW5SYW5nZSgxMDAwKSA9PSAwIHRoZW4NCiAgICAgIENhc3RTcGVs
bChfVykNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIGFhYiA8PSAwLjMgYW5kIChub3QgdGFyZ2V0IG9yIG5vdCBJc0tpbGxhYmxlKHRhcmdldCkpIHRoZW4NCiAgICAgIENhc3RTcGVs
bChfVykNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSgxNTAwKSA9PSAwIGFuZCBVbmRlclR1cnJldChteUhlcm8sIHRydWUpIGFuZCB0dXJyZXRG
b2N1cy5mb2N1c2VkIHRoZW4NCiAgICAgIENhc3RTcGVsbChfVykNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSgxNTAwKSA+PSAxIGFuZCBVbmRl
clR1cnJldChteUhlcm8sIHRydWUpIGFuZCBub3QgVW5kZXJUdXJyZXQoU3BlbGxzLlcuc3RhcnRQb3MsIHRydWUpIGFuZCB0YXJnZXQgYW5kIG5vdCBJc0tpbGxhYmxlKHRhcmdldCkgYW5kIHR1
cnJldEZvY3VzLmZvY3VzZWQgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgYWFiIDw9IDAuNSBhbmQgdGFyZ2V0IGFuZCBub3QgSXNLaWxs
YWJsZSh0YXJnZXQpIGFuZCBHZXREaXN0YW5jZShTcGVsbHMuVy5zdGFydFBvcykgPj0gMzAwIHRoZW4NCiAgICAgIENhc3RTcGVsbChfVykNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlm
IGRfYiA8PSAwLjEgYW5kIHRhcmdldCB0aGVuDQogICAgICBDYXN0U3BlbGwoX1cpDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBfYWIgYW5kIF9hYiA8PSAwLjMgYW5kIGRfYiA+PSBf
YWIgYW5kIChub3QgdGFyZ2V0IG9yIG5vdCBJc0tpbGxhYmxlKHRhcmdldCkgb3IgQ291bnRFbmVteUhlcm9JblJhbmdlKDgwMCkgfj0gMSkgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAg
ICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgZF9iIDw9IDAuNCBhbmQgdGFyZ2V0IGFuZCBub3QgSXNLaWxsYWJsZSh0YXJnZXQpIGFuZCBVbmRlclR1cnJldChteUhlcm8sIHRydWUpIGFuZCBu
b3QgVW5kZXJUdXJyZXQoU3BlbGxzLlcuc3RhcnRQb3MsIHRydWUpIHRoZW4NCiAgICAgIENhc3RTcGVsbChfVykNCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIGlmIDQgPD0gQ291bnRFbmVt
eUhlcm9JblJhbmdlKDMwMCwgbXlIZXJvLnBvcykgYW5kIENvdW50RW5lbXlIZXJvSW5SYW5nZSgzMDAsIG15SGVyby5wb3MpID49IENvdW50RW5lbXlIZXJvSW5SYW5nZSgzMDAsIFNwZWxscy5X
LnN0YXJ0UG9zKSBhbmQgR2V0RGlzdGFuY2UoU3BlbGxzLlcuc3RhcnRQb3MpID49IDMwMCBhbmQgZGRhID49IGNfYiB0aGVuDQogICAgICBDYXN0U3BlbGwoX1cpDQogICAgICByZXR1cm4NCiAg
ICBlbmQNCiAgICBpZiBDaGVja0FEQ1RhcmdldChTcGVsbHMuVy5zdGFydFBvcykgYW5kIG5vdCBDaGVja0FEQ1RhcmdldChteUhlcm8ucG9zKSBhbmQgZGRhIDw9IDQgdGhlbg0KICAgICAgcmV0
dXJuDQogICAgZWxzZWlmIENoZWNrQURDVGFyZ2V0KG15SGVyby5wb3MpIGFuZCBub3QgQ2hlY2tBRENUYXJnZXQoU3BlbGxzLlcuc3RhcnRQb3MpIGFuZCBUb29EYW5nZXJvdXMoU3BlbGxzLlcu
c3RhcnRQb3MpIDw9IDQgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgIGVuZA0KICAgIGlmIGRkYSA+PSBUb29EYW5nZXJvdXMoU3BlbGxzLlcuc3RhcnRQb3MpIGFuZCBkZGEgPj0gNCB0
aGVuDQogICAgICBDYXN0U3BlbGwoX1cpDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBpZiBkZGEgPj0gNiB0aGVuDQogICAgICBDYXN0U3BlbGwoX1cpDQogICAgICByZXR1cm4NCiAgICBl
bmQNCiAgICBpZiBkX2IgPD0gMC4zIGFuZCBVbmRlclR1cnJldChteUhlcm8pIGFuZCAobm90IHRhcmdldCBvciBub3QgdGFyZ2V0IG9yIG5vdCBJc0tpbGxhYmxlKHRhcmdldCkgb3IgdGFyZ2V0
IGFuZCBpc0tpbGxlZFt0YXJnZXQubmV0d29ya0lEXSkgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdl
KDMwMCkgPT0gI0dldEVuZW15SGVyb2VzKCkgYW5kIEdldERpc3RhbmNlKFNwZWxscy5XLnN0YXJ0UG9zKSA+PSAzMDAgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgcmV0dXJuDQog
ICAgZW5kDQogICAgaWYgZF9iIDw9IDAuNSBhbmQgX19iID49IG15SGVyby5oZWFsdGggdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgZGRh
ID49IDYgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQogIGVuZA0KICBpZiB3clVzZWQoKSBhbmQgbm90IHdVc2VkKCkgYW5kIFJyZWFkeSB0aGVuDQog
ICAgaWYgQ2hlY2tBRENUYXJnZXQobXlIZXJvLnBvcykgYW5kIG5vdCBDaGVja0FEQ1RhcmdldChTcGVsbHMuV1Iuc3RhcnRQb3MpIHRoZW4NCiAgICAgIENhc3RTcGVsbChfUikNCiAgICBlbmQN
CiAgICBpZiBkZGEgPj0gVG9vRGFuZ2Vyb3VzKFNwZWxscy5XUi5zdGFydFBvcykgYW5kIGRkYSA+PSA0IHRoZW4NCiAgICAgIENhc3RTcGVsbChfUikNCiAgICBlbmQNCiAgZW5kDQogIGlmIHdV
c2VkKCkgYW5kIENvdW50RW5lbXlIZXJvSW5SYW5nZSg2MDApID09IDEgYW5kIGRkYSA+PSA0IHRoZW4NCiAgICBDYXN0U3BlbGwoX1cpDQogIGVuZA0KICBpZiBNZW51LnNldHRpbmdzVy51c2VP
cHRpb25hbFcgPT0gMSB0aGVuDQogICAgaWYgd1VzZWQoKSBhbmQgd3JVc2VkKCkgdGhlbg0KICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDQwMCwgU3BlbGxzLldSLnN0YXJ0UG9zKSA8
IENvdW50RW5lbXlIZXJvSW5SYW5nZSg0MDAsIFNwZWxscy5XLnN0YXJ0UG9zKSBhbmQgQ291bnRFbmVteUhlcm9JblJhbmdlKDQwMCwgU3BlbGxzLldSLnN0YXJ0UG9zKSA8IENvdW50RW5lbXlI
ZXJvSW5SYW5nZSg0MDApIHRoZW4NCiAgICAgICAgaWYgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuDQogICAgICAgICAgQ2FzdFNwZWxsKF9SKQ0KICAgICAgICBlbmQNCiAgICAgIGVs
c2VpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNDAwLCBTcGVsbHMuVy5zdGFydFBvcykgPiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNDAwLCBTcGVsbHMuV1Iuc3RhcnRQb3MpIGFuZCBDb3VudEVu
ZW15SGVyb0luUmFuZ2UoNDAwLCBTcGVsbHMuVy5zdGFydFBvcykgPCBDb3VudEVuZW15SGVyb0luUmFuZ2UoNDAwKSBhbmQgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuDQogICAgICAg
IENhc3RTcGVsbChfVykNCiAgICAgIGVuZA0KICAgIGVsc2VpZiB3VXNlZCgpIHRoZW4NCiAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg0MDAsIFNwZWxscy5XLnN0YXJ0UG9zKSA8IENv
dW50RW5lbXlIZXJvSW5SYW5nZSg0MDApIGFuZCAobm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSBvciBkZGEgPiBUb29EYW5nZXJvdXMoU3BlbGxzLlcuc3RhcnRQb3MpKSB0aGVuDQogICAgICAg
IENhc3RTcGVsbChfVykNCiAgICAgIGVuZA0KICAgIGVsc2VpZiB3clVzZWQoKSBhbmQgQ291bnRFbmVteUhlcm9JblJhbmdlKDQwMCwgU3BlbGxzLldSLnN0YXJ0UG9zKSA8IENvdW50RW5lbXlI
ZXJvSW5SYW5nZSg0MDApIGFuZCBub3QgUXJlYWR5IGFuZCBub3QgRXJlYWR5IHRoZW4NCiAgICAgIENhc3RTcGVsbChfVykNCiAgICBlbmQNCiAgZWxzZWlmIE1lbnUuc2V0dGluZ3NXLnVzZU9w
dGlvbmFsVyA9PSAzIG9yIE1lbnUuc2V0dGluZ3NXLnVzZU9wdGlvbmFsVyA9PSA0IHRoZW4NCiAgICBpZiB3VXNlZCgpIGFuZCB3clVzZWQoKSB0aGVuDQogICAgICBpZiBub3QgUXJlYWR5IGFu
ZCBub3QgRXJlYWR5IHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgZW5kDQogICAgZWxzZWlmIHdVc2VkKCkgdGhlbg0KICAgICAgaWYgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFk
eSB0aGVuDQogICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgIGVuZA0KICAgIGVsc2VpZiB3clVzZWQoKSBhbmQgbm90IFFyZWFkeSBhbmQgbm90IEVyZWFkeSB0aGVuDQogICAgICBDYXN0U3Bl
bGwoX1cpDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBGYXJtKCkNCiAgbG9jYWwgZGRhID0gZmFsc2UNCiAgaWYgTWVudS5mYXJtLmZhcm1BQSBhbmQgKGRiYSBhbmQgX0cuU3hPcmI6
Q2FuQXR0YWNrKCkgPT0gdHJ1ZSBvciBTQUNMb2FkZWQgYW5kIF9HLkF1dG9DYXJyeS5PcmJ3YWxrZXI6Q2FuU2hvb3QoKSkgdGhlbg0KICAgIHJldHVybg0KICBlbmQNCiAgaWYgTWVudS5mYXJt
LmZhcm1RIHRoZW4NCiAgICBmb3IgX19iLCBhX2IgaW4gcGFpcnMoZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICBpZiBhX2IgYW5kIE1lbnUuZmFybS5mYXJtUmFuZ2UgYW5kIEdldERp
c3RhbmNlU3FyKGFfYikgPCBTcGVsbHMuQUEucmFuZ2UgKiBTcGVsbHMuQUEucmFuZ2UgYW5kIEdldERpc3RhbmNlU3FyKGFfYikgPCBTcGVsbHMuUS5yYW5nZSAqIFNwZWxscy5RLnJhbmdlIHRo
ZW4NCiAgICAgICAgaWYgZ2V0RG1nKCJRIiwgYV9iLCBteUhlcm8pID4gYV9iLmhlYWx0aCBhbmQgQ2FzdFEoYV9iKSB0aGVuDQogICAgICAgICAgZGRhID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAg
ICAgIGVuZA0KICAgICAgaWYgZGRhIH49IHRydWUgdGhlbg0KICAgICAgICBpZiBub3QgTWVudS5mYXJtLmZhcm1SYW5nZSBhbmQgR2V0RGlzdGFuY2VTcXIoYV9iKSA8IFNwZWxscy5RLnJhbmdl
ICogU3BlbGxzLlEucmFuZ2UgdGhlbg0KICAgICAgICAgIGlmIGdldERtZygiUSIsIGFfYiwgbXlIZXJvKSA+IGFfYi5oZWFsdGggdGhlbg0KICAgICAgICAgICAgaWYgQ2FzdFEoYV9iKSB0aGVu
DQogICAgICAgICAgICAgIGRkYSA9IHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgZGRhIHRoZW4NCiAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICAgICAg
ZW5kDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBpZiBkZGEgfj0gdHJ1ZSB0aGVuDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGlmIGRkYSB0aGVu
DQogICAgUXJlYWR5ID0gZmFsc2UNCiAgICByZXR1cm4NCiAgZW5kDQogIGlmIE1lbnUuZmFybS5mYXJtVyB0aGVuDQogICAgZm9yIF9fYiwgYV9iIGluIHBhaXJzKGVuZW15TWluaW9ucy5vYmpl
Y3RzKSBkbw0KICAgICAgaWYgYV9iIGFuZCBNZW51LmZhcm0uZmFybVJhbmdlIGFuZCBHZXREaXN0YW5jZVNxcihhX2IpIDwgU3BlbGxzLkFBLnJhbmdlICogU3BlbGxzLkFBLnJhbmdlIGFuZCBH
ZXREaXN0YW5jZVNxcihhX2IpIDwgU3BlbGxzLlcucmFuZ2VTcXIgYW5kIElzV1JlYWR5KCkgYW5kIGdldERtZygiVyIsIGFfYiwgbXlIZXJvKSA+IGFfYi5oZWFsdGggYW5kIENhc3RXKGFfYikg
dGhlbg0KICAgICAgICBDYXN0U3BlbGwoX1cpDQogICAgICAgIGRkYSA9IHRydWUNCiAgICAgICAgZG8gYnJlYWsgZW5kDQogICAgICAgIHJldHVybg0KICAgICAgZW5kDQogICAgICBpZiBub3Qg
TWVudS5mYXJtLmZhcm1SYW5nZSBhbmQgR2V0RGlzdGFuY2VTcXIoYV9iKSA8IFNwZWxscy5XLnJhbmdlU3FyIGFuZCBJc1dSZWFkeSgpIGFuZCBnZXREbWcoIlciLCBhX2IsIG15SGVybykgPiBh
X2IuaGVhbHRoIGFuZCBDYXN0VyhhX2IpIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICBkZGEgPSB0cnVlDQogICAgICAgIGJyZWFrDQogICAgICBlbmQNCiAgICBlbmQNCiAg
ZW5kDQogIGlmIGRkYSB0aGVuDQogICAgV3JlYWR5ID0gZmFsc2UNCiAgICByZXR1cm4NCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExhbmVDbGVhcigpDQogIGlmIE1lbnUubGFuZWNsZWFyLmxhbmVj
bGVhclEgdGhlbg0KICAgIGZvciBkZGEsIF9fYiBpbiBpcGFpcnMoZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICBpZiBHZXREaXN0YW5jZVNxcihfX2IpIDwgU3BlbGxzLlEucmFuZ2Ug
KiBTcGVsbHMuUS5yYW5nZSB0aGVuDQogICAgICAgIENhc3RTcGVsbChfUSwgX19iKQ0KICAgICAgICBicmVhaw0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBpZiBNZW51LmxhbmVjbGVh
ci5sYW5lY2xlYXJXIGFuZCBNZW51LmxhbmVjbGVhci5sYW5lY2xlYXJSIGFuZCBScmVhZHkgYW5kIFdyZWFkeSB0aGVuDQogICAgaWYgbm90IHdVc2VkKCkgYW5kIG5vdCB3clVzZWQoKSB0aGVu
DQogICAgICBsb2NhbCBkZGEsIF9fYiA9IEdldEJlc3RBT0VQb3NpdGlvbihlbmVteU1pbmlvbnMub2JqZWN0cywgU3BlbGxzLlcucmFuZ2UsIFNwZWxscy5XLnJhZGl1cywgbXlIZXJvKQ0KICAg
ICAgaWYgX19iIGFuZCBfX2IgPj0gTWVudS5sYW5lY2xlYXIubGFuZWNsZWFyV1JBbW91bnQgdGhlbg0KICAgICAgICBpZiBkZGEgfj0gbmlsIHRoZW4NCiAgICAgICAgICBDYXN0U3BlbGwoX1cs
IGRkYS54LCBkZGEueikNCiAgICAgICAgZW5kDQogICAgICAgIGRkYSwgX19iID0gR2V0QmVzdEFPRVBvc2l0aW9uKGVuZW15TWluaW9ucy5vYmplY3RzLCBTcGVsbHMuVy5yYW5nZSwgU3BlbGxz
LlcucmFkaXVzLCBteUhlcm8pDQogICAgICAgIGlmIGRkYSB+PSBuaWwgdGhlbg0KICAgICAgICAgIENhc3RTcGVsbChfUiwgZGRhLngsIGRkYS56KQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0K
ICAgIGVuZA0KICAgIGlmIHdVc2VkKCkgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgIGVuZA0KICBlbHNlaWYgTWVudS5sYW5lY2xlYXIubGFuZWNsZWFyVyBhbmQgSXNXUmVhZHkoKSB0
aGVuDQogICAgbG9jYWwgZGRhLCBfX2IgPSBHZXRCZXN0QU9FUG9zaXRpb24oZW5lbXlNaW5pb25zLm9iamVjdHMsIFNwZWxscy5XLnJhbmdlLCBTcGVsbHMuVy5yYWRpdXMsIG15SGVybykNCiAg
ICBpZiBkZGEgfj0gbmlsIGFuZCBfX2IgPj0gTWVudS5sYW5lY2xlYXIubGFuZWNsZWFyV0Ftb3VudCB0aGVuDQogICAgICBDYXN0U3BlbGwoX1csIGRkYS54LCBkZGEueikNCiAgICAgIENhc3RT
cGVsbChfVykNCiAgICBlbmQNCiAgZWxzZWlmIE1lbnUubGFuZWNsZWFyLmxhbmVjbGVhclIgYW5kIFJyZWFkeSBhbmQgUlN0YXRlKCJXIikgYW5kIG5vdCB3clVzZWQoKSB0aGVuDQogICAgbG9j
YWwgZGRhLCBfX2IgPSBHZXRCZXN0QU9FUG9zaXRpb24oZW5lbXlNaW5pb25zLm9iamVjdHMsIFNwZWxscy5XLnJhbmdlLCBTcGVsbHMuVy5yYWRpdXMsIG15SGVybykNCiAgICBpZiBkZGEgfj0g
bmlsIGFuZCBfX2IgPj0gTWVudS5sYW5lY2xlYXIubGFuZWNsZWFyUkFtb3VudCB0aGVuDQogICAgICBDYXN0U3BlbGwoX1IsIGRkYS54LCBkZGEueikNCiAgICAgIENhc3RTcGVsbChfUikNCiAg
ICBlbmQNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIEtpbGxTdGVhbCgpDQogIGlmIG5vdCBjYW5DYXN0U3BlbGxzIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIGZvciBkZGEsIF9fYiBpbiBwYWly
cyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIFZhbGlkVGFyZ2V0KF9fYikgYW5kIG5vdCBfX2IuZGVhZCBhbmQgX19iLnZpc2libGUgYW5kIE1lbnUua2lsbHN0ZWFsLmVuZW1pZXNbX19i
LmNoYXJOYW1lXSBhbmQgX19iLm5ldHdvcmtJRCBhbmQgX19iLmhlYWx0aCBhbmQgKG5vdCBJZ25pdGVXaWxsS2lsbEVuZW15KF9fYikgYW5kIG5vdCBpc0tpbGxlZFtfX2IubmV0d29ya0lEXSBv
ciBteUhlcm8uaGVhbHRoIC8gbXlIZXJvLm1heEhlYWx0aCA8PSAwLjIpIHRoZW4NCiAgICAgIGxvY2FsIGFfYiwgYl9iLCBjX2IsIGRfYiwgX2FiLCBhYWIgPSAwLCBuaWwsIG5pbCwgbmlsLCBu
aWwsIG5pbA0KICAgICAgaWYgR2V0RGlzdGFuY2UoX19iKSA8PSBTcGVsbHMuUS5yYW5nZSArIChTcGVsbHMuVy5yYW5nZSAtIDEyNSkgdGhlbg0KICAgICAgICBhX2IgPSBRcmVhZHkgYW5kIE1l
bnUua2lsbHN0ZWFsLmtpbGxzdGVhbFEgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJRIiwgX19iKSBvciAwDQogICAgICAgIGJfYiA9IFJyZWFkeSBhbmQgUlN0YXRlKCJRIikgYW5kIFNwZWxs
RG1nQ2FsY3VsYXRpb25zKCJSUSIsIF9fYikgb3IgMA0KICAgICAgICBjX2IgPSBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUVByb2MiLCBfX2IpDQogICAgICAgIGRfYiA9IElzV1JlYWR5KCkgYW5k
IE1lbnUua2lsbHN0ZWFsLmtpbGxzdGVhbFcgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJXIiwgX19iKSBvciAwDQogICAgICAgIF9hYiA9IFJyZWFkeSBhbmQgTWVudS5raWxsc3RlYWwua2ls
bHN0ZWFsUiBhbmQgbm90IHdyVXNlZCgpIGFuZCBSU3RhdGUoIlciKSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlJXIiwgX19iKSBvciAwDQogICAgICBlbmQNCiAgICAgIGlmIEdldERpc3Rh
bmNlU3FyKF9fYikgPD0gNDIyNTAwIHRoZW4NCiAgICAgICAgaWYgYV9iID4gZF9iIGFuZCBkX2IgPiBfX2IuaGVhbHRoIHRoZW4NCiAgICAgICAgICBDYXN0VyhfX2IpDQogICAgICAgIGVsc2Vp
ZiBhX2IgPiBfX2IuaGVhbHRoIHRoZW4NCiAgICAgICAgICBDYXN0UShfX2IpDQogICAgICAgIGVsc2VpZiBlbmVtaWVzQnVmZnNbX19iLm5ldHdvcmtJRF0ucmVjZWl2ZWQgYW5kIGFfYiArIGNf
YiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICAgIENhc3RRKF9fYikNCiAgICAgICAgZWxzZWlmIGVuZW1pZXNCdWZmc1tfX2IubmV0d29ya0lEXS5yZWNlaXZlZCBhbmQgZF9iICsgY19iID4g
X19iLmhlYWx0aCB0aGVuDQogICAgICAgICAgQ2FzdFcoX19iKQ0KICAgICAgICBlbHNlaWYgYl9iID4gX2FiIGFuZCBfYWIgPiBfX2IuaGVhbHRoIGFuZCBSU3RhdGUoIlciKSB0aGVuDQogICAg
ICAgICAgQ2FzdFJXKF9fYikNCiAgICAgICAgZWxzZWlmIGJfYiA+IF9fYi5oZWFsdGggYW5kIFJTdGF0ZSgiUSIpIHRoZW4NCiAgICAgICAgICBDYXN0UlEoX19iKQ0KICAgICAgICBlbHNlaWYg
ZW5lbWllc0J1ZmZzW19fYi5uZXR3b3JrSURdLnJlY2VpdmVkIGFuZCBjX2IgKyBiX2IgPiBfX2IuaGVhbHRoIGFuZCBSU3RhdGUoIlEiKSB0aGVuDQogICAgICAgICAgQ2FzdFJRKF9fYikNCiAg
ICAgICAgZWxzZWlmIGJfYiArIGNfYiArIGFfYiA+IF9fYi5oZWFsdGggYW5kIFFyZWFkeSBhbmQgUnJlYWR5IHRoZW4NCiAgICAgICAgICBDYXN0UShfX2IpDQogICAgICAgICAgQ2FzdFJRKF9f
YikNCiAgICAgICAgZW5kDQogICAgICBlbHNlaWYgTWVudS5raWxsc3RlYWwua2lsbHN0ZWFsR2FwIGFuZCBHZXREaXN0YW5jZVNxcihfX2IpID49IDM2MDAwMCBhbmQgR2V0RGlzdGFuY2UoX19i
KSA8PSBTcGVsbHMuUS5yYW5nZSArIFNwZWxscy5XLnJhbmdlIC0gMTI1IGFuZCBJc1dSZWFkeSgpIGFuZCBIYXNNYW5hVG9HYXBDbG9zZSgpIHRoZW4NCiAgICAgICAgaWYgYV9iID4gX19iLmhl
YWx0aCB0aGVuDQogICAgICAgICAgaWYgR2FwQ2xvc2UoX19iKSB0aGVuDQogICAgICAgICAgICBDYXN0UShfX2IpDQogICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBHZXREaXN0YW5jZShf
X2IpIDwgU3BlbGxzLlcucmFuZ2UgKyBTcGVsbHMuVy5yYW5nZSAtIDEwMCBhbmQgYl9iID4gX2FiIGFuZCBfYWIgPiBfX2IuaGVhbHRoIGFuZCBScmVhZHkgdGhlbg0KICAgICAgICAgIGlmIEdh
cENsb3NlKF9fYikgYW5kIFJTdGF0ZSgiVyIpIHRoZW4NCiAgICAgICAgICAgIENhc3RSVyhfX2IpDQogICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBNZW51LmtpbGxzdGVhbC5raWxsc3Rl
YWxRUiBhbmQgYl9iICsgY19iICsgYV9iID4gX19iLmhlYWx0aCBhbmQgUXJlYWR5IGFuZCBScmVhZHkgdGhlbg0KICAgICAgICAgIGlmIEdldERpc3RhbmNlU3FyKF9fYikgPj0gU3BlbGxzLlEu
cmFuZ2UgKiBTcGVsbHMuUS5yYW5nZSBhbmQgR2V0RGlzdGFuY2VTcXIoX19iKSA8PSAoU3BlbGxzLlEucmFuZ2UgKyBTcGVsbHMuVy5yYW5nZSAtIDIwMCkgKiAoU3BlbGxzLlEucmFuZ2UgKyBT
cGVsbHMuVy5yYW5nZSAtIDIwMCkgdGhlbg0KICAgICAgICAgICAgR2FwQ2xvc2UoX19iKQ0KICAgICAgICAgICAgQ2FzdFEoX19iKQ0KICAgICAgICAgICAgQ2FzdFJRKF9fYikNCiAgICAgICAg
ICBlbHNlaWYgR2V0RGlzdGFuY2VTcXIoX19iKSA8PSBTcGVsbHMuUS5yYW5nZSAqIFNwZWxscy5RLnJhbmdlIHRoZW4NCiAgICAgICAgICAgIENhc3RRKF9fYikNCiAgICAgICAgICAgIENhc3RS
UShfX2IpDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBHZXRPcmJUYXJnZXQoKQ0KICBsb2NhbCBkZGEsIF9fYg0K
ICBpZiBmb3JjZWRUYXJnZXQgYW5kIEdldERpc3RhbmNlU3FyKGZvcmNlZFRhcmdldCkgPD0gKFNwZWxscy5RLnJhbmdlICsgU3BlbGxzLlcucmFuZ2UpICogKFNwZWxscy5RLnJhbmdlICsgU3Bl
bGxzLlcucmFuZ2UpIHRoZW4NCiAgICByZXR1cm4gZm9yY2VkVGFyZ2V0DQogIGVuZA0KICBpZiB0YXJnZXQgYW5kIHRhcmdldC52aXNpYmxlIGFuZCBub3QgdGFyZ2V0LmRlYWQgYW5kIEdldERp
c3RhbmNlU3FyKHRhcmdldCkgPD0gU3BlbGxzLlEucmFuZ2UgKiBTcGVsbHMuUS5yYW5nZSBhbmQgKG5vdCB0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLkJydWlzZXIsIHRhcmdldC5jaGFy
TmFtZSkgYW5kIG5vdCB0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLlRhbmssIHRhcmdldC5jaGFyTmFtZSkgb3IgSXNLaWxsYWJsZSh0YXJnZXQpKSB0aGVuDQogICAgcmV0dXJuIHRhcmdl
dA0KICBlbmQNCiAgdHM6dXBkYXRlKCkNCiAgdHNMb25nOnVwZGF0ZSgpDQogIGRkYSA9IHRzTG9uZy50YXJnZXQNCiAgX19iID0gZGRhDQogIGlmIGRkYSB0aGVuDQogICAgaWYgR2V0RGlzdGFu
Y2UoZGRhKSA+IDcwMCBhbmQgQ291bnRFbmVteUhlcm9JblJhbmdlKDYwMCkgPj0gMyBhbmQgbm90IHRhYmxlLmNvbnRhaW5zKHByaW9yaXR5VGFibGUuQVAsIGRkYS5jaGFyTmFtZSkgYW5kIG5v
dCB0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLlN1cHBvcnQsIGRkYS5jaGFyTmFtZSkgYW5kIG5vdCB0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLkFEX0NhcnJ5LCBkZGEuY2hhck5h
bWUpIHRoZW4NCiAgICAgIGRkYSA9IG5pbA0KICAgIGVsc2UNCiAgICAgIGxvY2FsIGFfYiA9IFFyZWFkeSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlEiLCBkZGEpIG9yIDANCiAgICAgIGxv
Y2FsIGJfYiA9IFFyZWFkeSBhbmQgUlN0YXRlKCJRIikgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJSUSIsIGRkYSkgb3IgMA0KICAgICAgbG9jYWwgY19iID0gKFFyZWFkeSBvciBScmVhZHkp
IGFuZCBTcGVsbERtZ0NhbGN1bGF0aW9ucygiUVByb2MiLCBkZGEpIG9yIDANCiAgICAgIGxvY2FsIGRfYiA9IFJyZWFkeSBhbmQgUXJlYWR5IGFuZCBhX2IgKyBiX2IgKyBjX2Igb3IgMA0KICAg
ICAgaWYgR2V0RGlzdGFuY2UoZGRhKSA+IDcwMCBhbmQgMyA8PSBDb3VudEVuZW15SGVyb0luUmFuZ2UoMzAwLCBkZGEpIGFuZCBkX2IgPCBkZGEuaGVhbHRoIHRoZW4NCiAgICAgICAgZGRhID0g
bmlsDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiBub3QgSGFzTWFuYVRvR2FwQ2xvc2UoKSBvciBkZGEgPT0gbmlsIHRoZW4NCiAgICAgIGRkYSA9IHRzLnRhcmdldA0KICAgIGVuZA0KICAg
IGlmIGRkYSBhbmQgR2V0RGlzdGFuY2VTcXIoZGRhKSA+PSA0OTAwMDAgYW5kIHRzLnRhcmdldCB+PSBuaWwgYW5kICh0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLkFQLCB0cy50YXJnZXQu
Y2hhck5hbWUpIG9yIHRhYmxlLmNvbnRhaW5zKHByaW9yaXR5VGFibGUuU3VwcG9ydCwgdHMudGFyZ2V0LmNoYXJOYW1lKSBvciB0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLkFEX0NhcnJ5
LCB0cy50YXJnZXQuY2hhck5hbWUpKSB0aGVuDQogICAgICBkZGEgPSB0cy50YXJnZXQNCiAgICBlbmQNCiAgICBpZiBkZGEgPT0gbmlsIGFuZCBfX2Igfj0gbmlsIHRoZW4NCiAgICAgIGRkYSA9
IF9fYg0KICAgIGVuZA0KICAgIGlmIGRkYSBhbmQgSWduaXRlV2lsbEtpbGxFbmVteShkZGEpIHRoZW4NCiAgICAgIGRkYSA9IG5pbA0KICAgIGVuZA0KICAgIGlmIGRkYSBhbmQgKGRkYS50eXBl
IGFuZCBkZGEudHlwZSB+PSBteUhlcm8udHlwZSBvciBub3QgZGRhLnR5cGUpIHRoZW4NCiAgICAgIGRkYSA9IG5pbA0KICAgIGVuZA0KICBlbmQNCiAgaWYgTWVudS5jb21iby5mb3JjZUFEQyB0
aGVuDQogICAgbG9jYWwgYV9iID0gZmFsc2UNCiAgICBmb3IgYl9iLCBjX2IgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGlmIGNfYiBhbmQgY19iLnR5cGUgYW5kIFZhbGlk
VGFyZ2V0KGNfYiwgU3BlbGxzLkUucmFuZ2UpIGFuZCBjX2IudmlzaWJsZSBhbmQgbm90IGNfYi5kZWFkIGFuZCAodGFibGUuY29udGFpbnMocHJpb3JpdHlUYWJsZS5BUCwgY19iLmNoYXJOYW1l
KSBvciB0YWJsZS5jb250YWlucyhwcmlvcml0eVRhYmxlLkFEX0NhcnJ5LCBjX2IuY2hhck5hbWUpKSB0aGVuDQogICAgICAgIGlmIGRkYSBhbmQgSXNLaWxsYWJsZShkZGEpIGFuZCBub3QgSXNL
aWxsYWJsZShjX2IpIHRoZW4NCiAgICAgICAgICBicmVhaw0KICAgICAgICBlbmQNCiAgICAgICAgZGRhID0gY19iDQogICAgICAgIGFfYiA9IHRydWUNCiAgICAgICAgYnJlYWsNCiAgICAgIGVu
ZA0KICAgIGVuZA0KICBlbmQNCiAgcmV0dXJuIGRkYQ0KZW5kDQpmdW5jdGlvbiBaaG9ueWFzKCkNCiAgbG9jYWwgZGRhID0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzE1NykNCiAgaWYgZGRhIH49
IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGRkYSkgPT0gUkVBRFkgYW5kIG15SGVyby5oZWFsdGggLyBteUhlcm8ubWF4SGVhbHRoIDw9IE1lbnUubWlzYy56aG9ueWFzLnpob255YXN1bmRl
ciB0aGVuDQogICAgQ2FzdFNwZWxsKGRkYSkNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIFVzZUlnbml0ZSgpDQogIGxvY2FsIGRkYSA9IDUwICsgMjAgKiBteUhlcm8ubGV2ZWwNCiAgZm9yIF9fYiwg
YV9iIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgYV9iIGFuZCBHZXREaXN0YW5jZShhX2IsIG15SGVybykgPCA2MDAgYW5kIFZhbGlkVGFyZ2V0KGFfYiwgNjAwKSBhbmQg
TWVudS5taXNjLmF1dG9pZ25pdGVbYV9iLmNoYXJOYW1lXSBhbmQgSXJlYWR5IGFuZCBkZGEgPiBhX2IuaGVhbHRoIHRoZW4NCiAgICAgIENhc3RTcGVsbChpZ25pdGUsIGFfYikNCiAgICBlbmQN
CiAgZW5kDQplbmQNCmZ1bmN0aW9uIE1hbmFNYW5hZ2VyKCkNCiAgaWYgbXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA8PSBNZW51LmhhcmFzcy5oYXJhc3NNYW5hIHRoZW4NCiAgICByZXR1
cm4gZmFsc2UNCiAgZW5kDQogIHJldHVybiB0cnVlDQplbmQNCmZ1bmN0aW9uIENoZWNrSWduaXRlKCkNCiAgaWYgTWVudS5taXNjLmNvdW50ZXJMb2dpYy51c2VQb3Rpb24gYW5kIGlnbml0ZWRU
YWJsZS5pZ25pdGVkIGFuZCBpZ25pdGVkVGFibGUuc291cmNlIHRoZW4NCiAgICBsb2NhbCBkZGEgPSBpZ25pdGVkVGFibGUudGltZSArIDUgLSBvcy5jbG9jaygpDQogICAgaWYgZGRhIDwgMCB0
aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBsb2NhbCBfX2IgPSBkZGEgKiAoMTAgKyBpZ25pdGVkVGFibGUuc291cmNlLmxldmVsICogNCkNCiAgICBpZiBfX2IgPiBteUhlcm8uaGVh
bHRoIGFuZCBfX2IgLSAzNyA8PSBteUhlcm8uaGVhbHRoIG9yIF9fYiA+PSBteUhlcm8uaGVhbHRoICogMC4zIHRoZW4NCiAgICAgIGxvY2FsIGFfYiA9IEdldEludmVudG9yeVNsb3RJdGVtKDIw
MDMpDQogICAgICBpZiBhX2Igfj0gbmlsIGFuZCBub3QgaGFzUG90aW9uQWN0aXZlIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKGFfYikNCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCmVuZA0K
ZnVuY3Rpb24gSWduaXRlV2lsbEtpbGxNZSgpDQogIGlmIGlnbml0ZWRUYWJsZS5pZ25pdGVkIGFuZCBpZ25pdGVkVGFibGUuc291cmNlIGFuZCBpZ25pdGVkVGFibGUuc291cmNlLmxldmVsIHRo
ZW4NCiAgICBsb2NhbCBkZGEgPSBpZ25pdGVkVGFibGUudGltZSArIDUgLSBvcy5jbG9jaygpDQogICAgaWYgZGRhIDwgMCB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICBsb2NhbCBf
X2IgPSBkZGEgKiAoMTAgKyBpZ25pdGVkVGFibGUuc291cmNlLmxldmVsICogNCkNCiAgICBpZiBfX2IgPiBteUhlcm8uaGVhbHRoIHRoZW4NCiAgICAgIGlmIG5vdCBpZ25pdGVkVGFibGUuaGFz
U2FpZCB0aGVuDQogICAgICAgIFNheShpZ25pdGVkVGFibGUuc291cmNlLmNoYXJOYW1lIC4uICIncyBpZ25pdGUgd2lsbCBraWxsIG1lLiIpDQogICAgICAgIGlnbml0ZWRUYWJsZS5oYXNTYWlk
ID0gdHJ1ZQ0KICAgICAgZW5kDQogICAgICBpZiBub3QgaWduaXRlZFRhYmxlLndpbGxLaWxsTWUgdGhlbg0KICAgICAgICBpZ25pdGVkVGFibGUud2lsbEtpbGxNZSA9IHRydWUNCiAgICAgIGVu
ZA0KICAgIGVsc2UNCiAgICAgIGlmIGlnbml0ZWRUYWJsZS5oYXNTYWlkIHRoZW4NCiAgICAgICAgU2F5KGlnbml0ZWRUYWJsZS5zb3VyY2UuY2hhck5hbWUgLi4gIidzIGlnbml0ZSB3aWxsIE5P
IExPTkdFUiBraWxsIG1lLiIpDQogICAgICAgIGlnbml0ZWRUYWJsZS5oYXNTYWlkID0gZmFsc2UNCiAgICAgIGVuZA0KICAgICAgaWYgaWduaXRlZFRhYmxlLndpbGxLaWxsTWUgdGhlbg0KICAg
ICAgICBpZ25pdGVkVGFibGUud2lsbEtpbGxNZSA9IGZhbHNlDQogICAgICBlbmQNCiAgICBlbmQNCiAgZWxzZWlmIGlnbml0ZWRUYWJsZS53aWxsS2lsbE1lIHRoZW4NCiAgICBpZ25pdGVkVGFi
bGUud2lsbEtpbGxNZSA9IGZhbHNlDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBTZXRQcmlvcml0eShkZGEsIF9fYiwgYV9iKQ0KICBmb3IgaSA9IDEsICNkZGEgZG8NCiAgICBpZiBfX2IuY2hhck5h
bWU6ZmluZChkZGFbaV0pIH49IG5pbCB0aGVuDQogICAgICBUU19TZXRIZXJvUHJpb3JpdHkoYV9iLCBfX2IuY2hhck5hbWUpDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBhcnJhbmdl
UHJpb3JpdHlzKCkNCiAgZm9yIGRkYSwgX19iIGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIFNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQURfQ2FycnksIF9fYiwgMSkNCiAg
ICBTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFQLCBfX2IsIDIpDQogICAgU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5TdXBwb3J0LCBfX2IsIDMpDQogICAgU2V0UHJpb3JpdHkocHJpb3Jp
dHlUYWJsZS5CcnVpc2VyLCBfX2IsIDQpDQogICAgU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5UYW5rLCBfX2IsIDUpDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBhcnJhbmdlUHJpb3JpdHlzVFQo
KQ0KICBmb3IgZGRhLCBfX2IgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BRF9DYXJyeSwgX19iLCAxKQ0KICAgIFNldFByaW9y
aXR5KHByaW9yaXR5VGFibGUuQVAsIF9fYiwgMSkNCiAgICBTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlN1cHBvcnQsIF9fYiwgMikNCiAgICBTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkJy
dWlzZXIsIF9fYiwgMikNCiAgICBTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlRhbmssIF9fYiwgMykNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIFVzZUl0ZW1zKGRkYSkNCiAgaWYgZGRhIH49IG5p
bCB0aGVuDQogICAgZm9yIF9fYiwgYV9iIGluIHBhaXJzKEl0ZW1zKSBkbw0KICAgICAgYV9iLnNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbShhX2IuaWQpDQogICAgICBpZiBhX2Iuc2xvdCB+
PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChhX2Iuc2xvdCkgPT0gUkVBRFkgdGhlbg0KICAgICAgICBpZiBhX2IucmVxVGFyZ2V0IGFuZCBHZXREaXN0YW5jZShkZGEpIDwgYV9iLnJhbmdl
IHRoZW4NCiAgICAgICAgICBDYXN0U3BlbGwoYV9iLnNsb3QsIGRkYSkNCiAgICAgICAgZWxzZWlmIG5vdCBhX2IucmVxVGFyZ2V0IGFuZCBHZXREaXN0YW5jZShkZGEpIC0gZ2V0SGl0Qm94UmFk
aXVzKG15SGVybykgLSBnZXRIaXRCb3hSYWRpdXMoZGRhKSA8IDUwIHRoZW4NCiAgICAgICAgICBDYXN0U3BlbGwoYV9iLnNsb3QpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgZW5kDQog
IGVuZA0KZW5kDQpmdW5jdGlvbiBDYWxjRGFtYWdlKCkNCiAgZm9yIGRkYSwgX19iIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgX19iIGFuZCBpc0tpbGxlZFtfX2IubmV0
d29ya0lEXSBhbmQgaXNLaWxsZWRbX19iLm5ldHdvcmtJRF0gPT0gdHJ1ZSB0aGVuDQogICAgICBpZiBfX2IuZGVhZCB0aGVuDQogICAgICAgIGlzS2lsbGVkW19fYi5uZXR3b3JrSURdID0gZmFs
c2UNCiAgICAgIGVsc2VpZiB0YXJnZXQgYW5kIF9fYi5uZXR3b3JrSUQgfj0gdGFyZ2V0Lm5ldHdvcmtJRCB0aGVuDQogICAgICAgIGlzS2lsbGVkW19fYi5uZXR3b3JrSURdID0gZmFsc2UNCiAg
ICAgIGVsc2VpZiBteUhlcm8uaGVhbHRoIC8gbXlIZXJvLm1heEhlYWx0aCA8PSAwLjI1IHRoZW4NCiAgICAgICAgaXNLaWxsZWRbX19iLm5ldHdvcmtJRF0gPSBmYWxzZQ0KICAgICAgZW5kDQog
ICAgZW5kDQogICAgaWYgZW5lbWllc0J1ZmZzW19fYi5uZXR3b3JrSURdLnJlY2VpdmVkIGFuZCBlbmVtaWVzQnVmZnNbX19iLm5ldHdvcmtJRF0ucmVjZWl2ZWQgPT0gdHJ1ZSBhbmQgZW5lbWll
c0J1ZmZzW19fYi5uZXR3b3JrSURdLmVuZFRpbWUgYW5kIGVuZW1pZXNCdWZmc1tfX2IubmV0d29ya0lEXS5lbmRUaW1lIDwgb3MuY2xvY2soKSB0aGVuDQogICAgICBlbmVtaWVzQnVmZnNbX19i
Lm5ldHdvcmtJRF0ucmVjZWl2ZWQgPSBmYWxzZQ0KICAgIGVuZA0KICAgIGlmIF9fYiBhbmQgVmFsaWRUYXJnZXQoX19iLCAzMDAwKSB0aGVuDQogICAgICBsb2NhbCBhX2IgPSBTcGVsbERtZ0Nh
bGN1bGF0aW9ucygiUSIsIF9fYikgb3IgMA0KICAgICAgbG9jYWwgYl9iID0gUlN0YXRlKCJRIikgYW5kIFNwZWxsRG1nQ2FsY3VsYXRpb25zKCJSUSIsIF9fYikgb3IgMA0KICAgICAgbG9jYWwg
Y19iID0gKFFyZWFkeSBvciBScmVhZHkgYW5kIFJTdGF0ZSgiUSIpKSBhbmQgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlFQcm9jIiwgX19iKSBvciAwDQogICAgICBsb2NhbCBkX2IgPSBJc1dSZWFk
eSgpIGFuZCBTcGVsbERtZ0NhbGN1bGF0aW9ucygiVyIsIF9fYikgb3IgMA0KICAgICAgbG9jYWwgX2FiID0gbm90IHdyVXNlZCgpIGFuZCBSU3RhdGUoIlciKSBhbmQgU3BlbGxEbWdDYWxjdWxh
dGlvbnMoIlJXIiwgX19iKSBvciAwDQogICAgICBsb2NhbCBhYWIgPSBTcGVsbERtZ0NhbGN1bGF0aW9ucygiRSIsIF9fYikgb3IgMA0KICAgICAgbG9jYWwgYmFiID0gNTAgKyAyMCAqIG15SGVy
by5sZXZlbCBvciAwDQogICAgICBpZiBteUhlcm8uZGFtYWdlID4gX19iLmhlYWx0aCB0aGVuDQogICAgICAgIEtpbGxUZXh0W19fYi5uZXR3b3JrSURdID0gIk1VUkRFUiBISU0iDQogICAgICBl
bHNlaWYgUXJlYWR5IGFuZCBhX2IgPCBkX2IgYW5kIGFfYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRID0ga2lsbCINCiAgICAgIGVsc2Vp
ZiBJc1dSZWFkeSgpIGFuZCBkX2IgPiBfX2IuaGVhbHRoIHRoZW4NCiAgICAgICAgS2lsbFRleHRbX19iLm5ldHdvcmtJRF0gPSAiVyA9IGtpbGwiDQogICAgICBlbHNlaWYgRXJlYWR5IGFuZCBh
YWIgPiBfX2IuaGVhbHRoIHRoZW4NCiAgICAgICAgS2lsbFRleHRbX19iLm5ldHdvcmtJRF0gPSAiRSA9IGtpbGwiDQogICAgICBlbHNlaWYgUXJlYWR5IGFuZCBJcmVhZHkgYW5kIGFfYiArIGJh
YiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgSWduaXRlID0ga2lsbCINCiAgICAgIGVsc2VpZiBJc1dSZWFkeSgpIGFuZCBJcmVhZHkg
YW5kIGRfYiArIGJhYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJXICsgSWduaXRlID0ga2lsbCINCiAgICAgIGVsc2VpZiBJc1dSZWFkeSgp
IGFuZCBRcmVhZHkgYW5kIGFfYiArIGNfYiArIGRfYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgVyA9IGtpbGwiDQogICAgICBlbHNl
aWYgUXJlYWR5IGFuZCBFcmVhZHkgYW5kIGRfYiArIGFhYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgRSA9IGtpbGwiDQogICAgICBl
bHNlaWYgUXJlYWR5IGFuZCBScmVhZHkgYW5kIGFfYiArIGJfYiArIGNfYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgUiA9IGtpbGwi
DQogICAgICBlbHNlaWYgSXNXUmVhZHkoKSBhbmQgUnJlYWR5IGFuZCBkX2IgKyBfYWIgPiBfX2IuaGVhbHRoIHRoZW4NCiAgICAgICAgS2lsbFRleHRbX19iLm5ldHdvcmtJRF0gPSAiVyArIFIg
PSBraWxsIg0KICAgICAgZWxzZWlmIFFyZWFkeSBhbmQgUnJlYWR5IGFuZCBJcmVhZHkgYW5kIGFfYiArIGJfYiArIGNfYiArIGJhYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4
dFtfX2IubmV0d29ya0lEXSA9ICJRICsgUiArIElnbml0ZSA9IGtpbGwiDQogICAgICBlbHNlaWYgUXJlYWR5IGFuZCBJc1dSZWFkeSgpIGFuZCBScmVhZHkgYW5kIGFfYiArIGNfYiArIGRfYiAr
IF9hYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgVyArIFIgPSBraWxsIg0KICAgICAgZWxzZWlmIFFyZWFkeSBhbmQgUnJlYWR5IGFu
ZCBJc1dSZWFkeSgpIGFuZCBhX2IgKyBiX2IgKyBjX2IgKyBjX2IgKyBkX2IgPiBfX2IuaGVhbHRoIHRoZW4NCiAgICAgICAgS2lsbFRleHRbX19iLm5ldHdvcmtJRF0gPSAiUSArIFIgKyBXID0g
a2lsbCINCiAgICAgIGVsc2VpZiBRcmVhZHkgYW5kIElzV1JlYWR5KCkgYW5kIFJyZWFkeSBhbmQgSXJlYWR5IGFuZCBhX2IgKyBjX2IgKyBkX2IgKyBfYWIgKyBiYWIgPiBfX2IuaGVhbHRoIHRo
ZW4NCiAgICAgICAgS2lsbFRleHRbX19iLm5ldHdvcmtJRF0gPSAiUSArIFcgKyBSICsgSWduaXRlID0ga2lsbCINCiAgICAgIGVsc2VpZiBRcmVhZHkgYW5kIElzV1JlYWR5KCkgYW5kIElyZWFk
eSBhbmQgYV9iICsgYl9iICsgY19iICsgY19iICsgZF9iICsgYmFiID4gX19iLmhlYWx0aCB0aGVuDQogICAgICAgIEtpbGxUZXh0W19fYi5uZXR3b3JrSURdID0gIlEgKyBSICsgVyArIElnbml0
ZSA9IGtpbGwiDQogICAgICBlbHNlaWYgUXJlYWR5IGFuZCBScmVhZHkgYW5kIElzV1JlYWR5KCkgYW5kIEVyZWFkeSBhbmQgYV9iICsgYl9iICsgY19iICsgY19iICsgZF9iICsgYWFiID4gX19i
LmhlYWx0aCB0aGVuDQogICAgICAgIEtpbGxUZXh0W19fYi5uZXR3b3JrSURdID0gIlEgKyBSICsgVyArIEUgPSBraWxsIg0KICAgICAgZWxzZWlmIElzV1JlYWR5KCkgYW5kIFFyZWFkeSBhbmQg
UnJlYWR5IGFuZCBFcmVhZHkgYW5kIGFfYiArIGNfYiArIGRfYiArIF9hYiArIGFhYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgVyAr
IFIgKyBFID0ga2lsbCINCiAgICAgIGVsc2VpZiBRcmVhZHkgYW5kIFJyZWFkeSBhbmQgRXJlYWR5IGFuZCBJc1dSZWFkeSgpIGFuZCBJcmVhZHkgYW5kIGFfYiArIGJfYiArIGNfYiArIGNfYiAr
IGRfYiArIGFhYiArIGJhYiA+IF9fYi5oZWFsdGggdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgUiArIFcgKyBFICsgSWduaXRlID0ga2lsbCINCiAgICAgIGVs
c2VpZiBRcmVhZHkgYW5kIFJyZWFkeSBhbmQgRXJlYWR5IGFuZCBJc1dSZWFkeSgpIGFuZCBJcmVhZHkgYW5kIGFfYiArIGNfYiArIGRfYiArIF9hYiArIGFhYiArIGJhYiA+IF9fYi5oZWFsdGgg
dGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJRICsgVyArIFIgKyBFICsgSWduaXRlID0ga2lsbCINCiAgICAgIGVsc2VpZiBRcmVhZHkgb3IgSXNXUmVhZHkoKSBvciBF
cmVhZHkgdGhlbg0KICAgICAgICBLaWxsVGV4dFtfX2IubmV0d29ya0lEXSA9ICJIYXJhc3MgaGltISINCiAgICAgIGVsc2UNCiAgICAgICAgS2lsbFRleHRbX19iLm5ldHdvcmtJRF0gPSAiU3Bl
bGxzIG9uIENEIg0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBnZXRIaXRCb3hSYWRpdXMoZGRhKQ0KICByZXR1cm4gR2V0RGlzdGFuY2UoZGRhLm1pbkJCb3gsIGRk
YS5tYXhCQm94KSAvIDINCmVuZA0KZnVuY3Rpb24gQ2FuUGVybWZvcm1LaWxsU3RlYWwoKQ0KICByZXR1cm4gTWVudS5raWxsc3RlYWwua2lsbHN0ZWFsIGFuZCAoTWVudS5raWxsc3RlYWwua2ls
bFN0ZWFsRXhjZWN1dGUgPT0gMSBvciBNZW51LmtpbGxzdGVhbC5raWxsU3RlYWxFeGNlY3V0ZSA9PSAyIGFuZCBub3QgTWVudS5rZXlzZXR0aW5ncy51c2VDb21ibyBhbmQgbm90IE1lbnUua2V5
c2V0dGluZ3MudXNlQ29tYm9HYXBDbG9zZSBhbmQgbm90IE1lbnUua2V5c2V0dGluZ3MudXNlQ29tYm9DaGFpbiBvciBNZW51LmtpbGxzdGVhbC5raWxsU3RlYWxFeGNlY3V0ZSA9PSAzIGFuZCBu
b3QgTWVudS5rZXlzZXR0aW5ncy51c2VDb21ibyBhbmQgbm90IE1lbnUua2V5c2V0dGluZ3MudXNlTGFuZUNsZWFyIGFuZCBub3QgTWVudS5rZXlzZXR0aW5ncy51c2VDb21ib0dhcENsb3NlIGFu
ZCBub3QgTWVudS5rZXlzZXR0aW5ncy51c2VDb21ib0NoYWluIGFuZCBub3QgTWVudS5rZXlzZXR0aW5ncy51c2VGYXJtIGFuZCBub3QgTWVudS5rZXlzZXR0aW5ncy51c2VIYXJhc3MpDQplbmQN
CmZ1bmN0aW9uIERyYXdNZW51KCkNCiAgTWVudSA9IHNjcmlwdENvbmZpZygiVG90YWxseSBMZUJsYW5jIC0gVG90YWxseSBMZWdpdCIsICJUb3RhbGx5TGVCbGFuYy5jZmciKQ0KICBsb2NhbCBk
ZGEgPSAiVG90YWxseSBMZUJsYW5jICAtICAiDQogIE1lbnU6YWRkU3ViTWVudShkZGEgLi4gIktleSBTZXR0aW5ncyIsICJrZXlzZXR0aW5ncyIpDQogIE1lbnUua2V5c2V0dGluZ3M6YWRkUGFy
YW0oImluZm8xMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIkNvbWJvIikNCiAgTWVudS5rZXlzZXR0aW5nczphZGRQYXJhbSgidXNlQ29tYm8iLCAiQ29tYm8gS2V5IiwgU0NSSVBUX1BBUkFN
X09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICBNZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJ1c2VDb21ib0dhcENsb3NlIiwgIkNvbWJvIEdhcENsb3NlIEtleSIsIFNDUklQVF9QQVJBTV9PTktF
WURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiTSIpKQ0KICBNZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJ1c2VDb21ib0NoYWluIiwgIkNvbWJvIENoYWluIEtleSIsIFNDUklQVF9QQVJBTV9P
TktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICBNZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJpbmZvMTQiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sICJIYXJhc3MiKQ0KICBN
ZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJ1c2VIYXJhc3MiLCAiSGFyYXNzIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICBNZW51Lmtl
eXNldHRpbmdzOmFkZFBhcmFtKCJpbmZvMTUiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sICJMYW5lQ2xlYXIiKQ0KICBNZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJ1c2VMYW5lQ2xlYXIiLCAi
TGFuZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiSyIpKQ0KICBNZW51LmtleXNldHRpbmdzOmFkZFBhcmFtKCJpbmZvMTYiLCAiIiwgU0NS
SVBUX1BBUkFNX0lORk8sICJGYXJtIikNCiAgTWVudS5rZXlzZXR0aW5nczphZGRQYXJhbSgidXNlRmFybSIsICJGYXJtIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0
cmluZy5ieXRlKCJMIikpDQogIE1lbnU6YWRkU3ViTWVudShkZGEgLi4gIkNvbWJvIiwgImNvbWJvIikNCiAgTWVudS5jb21ibzphZGRTdWJNZW51KFNwZWxscy5FLm5hbWUgLi4gIiAoRSkiLCAi
ZXNldHRpbmdzIikNCiAgTWVudS5jb21iby5lc2V0dGluZ3M6YWRkUGFyYW0oInJhbmdlIiwgIk1heCByYW5nZToiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIFNwZWxscy5FLnJhbmdlLCAwLCBTcGVs
bHMuRS5yYW5nZSwgMCkNCiAgTWVudS5jb21iby5lc2V0dGluZ3M6YWRkUGFyYW0oIndpZHRoIiwgIk1pbiB3aWR0aDoiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIFNwZWxscy5FLnJhZGl1cywgOTAs
IDIwMCwgMCkNCiAgTWVudS5jb21iby5lc2V0dGluZ3M6YWRkUGFyYW0oImRyYXciLCAiRHJhdyByYW5nZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogIE1lbnUuY29tYm86YWRkUGFy
YW0oImluZm8xMiIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQogIE1lbnUuY29tYm86YWRkUGFyYW0oImNvbWJvV2F5IiwgIlBlcmZvcm0gQ29tYm86IiwgU0NSSVBUX1BBUkFNX0xJU1Qs
IDEsIHsNCiAgICAiU21hcnQiLA0KICAgICJRUldFIiwNCiAgICAiUVdSRSIsDQogICAgIldRUkUiLA0KICAgICJXUlFFIg0KICB9KQ0KICBNZW51LmNvbWJvOmFkZFBhcmFtKCJpbmZvOCIsICIi
LCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQogIE1lbnUuY29tYm86YWRkUGFyYW0oImNvbWJvSXRlbXMiLCAiVXNlIEl0ZW1zIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBNZW51LmNv
bWJvOmFkZFBhcmFtKCJjb21ib0FBIiwgIlVzZSBBQXMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogIE1lbnUuY29tYm86YWRkUGFyYW0oImNvbWJvR2FwIiwgIlVzZSBXIHRvIEdhcENs
b3NlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBNZW51LmNvbWJvOmFkZFBhcmFtKCJpbmZvOSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQogIE1lbnUuY29tYm86YWRkUGFy
YW0oInNlbGVjdGVkVGFyZ2V0IiwgIkZvY3VzIFNlbGVjdGVkIFRhcmdldCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgTWVudS5jb21ibzphZGRQYXJhbSgiZm9yY2VBREMiLCAiRm9y
Y2UgQURDL0FQQyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogIE1lbnU6YWRkU3ViTWVudShkZGEgLi4gIlNldHRpbmdzOiBXIiwgInNldHRpbmdzVyIpDQogIE1lbnUuc2V0dGluZ3NX
OmFkZFBhcmFtKCJ1c2VPcHRpb25hbCIsICJVc2UgT3B0aW9uYWwgVyBTZXR0aW5ncyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgTWVudS5zZXR0aW5nc1c6YWRkUGFyYW0oInVzZU9w
dGlvbmFsVyIsICJSZXR1cm46ICIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7DQogICAgIlNtYXJ0IiwNCiAgICAiVGFyZ2V0IGRlYWQiLA0KICAgICJTa2lsbHMgdXNlZCIsDQogICAgIkJvdGgi
DQogIH0pDQogIE1lbnU6YWRkU3ViTWVudShkZGEgLi4gIkhhcmFzcyIsICJoYXJhc3MiKQ0KICBNZW51LmhhcmFzczphZGRQYXJhbSgiaGFyYXNzUSIsICJVc2UgIiAuLiBTcGVsbHMuUS5uYW1l
IC4uICIgKFEpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBNZW51LmhhcmFzczphZGRQYXJhbSgiaGFyYXNzVyIsICJVc2UgIiAuLiBTcGVsbHMuVy5uYW1lIC4uICIgKFcpIiwgU0NS
SVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgTWVudS5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc0UiLCAiVXNlICIgLi4gU3BlbGxzLkUubmFtZSAuLiAiIChFKSIsIFNDUklQVF9QQVJBTV9PTk9G
RiwgZmFsc2UpDQogIE1lbnUuaGFyYXNzOmFkZFBhcmFtKCJpbmZvOCIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQogIE1lbnUuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NNYW5hIiwgIk1h
bmEgTWFuYWdlciAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAwLjI1LCAwLCAxLCAyKQ0KICBNZW51OmFkZFN1Yk1lbnUoZGRhIC4uICJGYXJtaW5nIiwgImZhcm0iKQ0KICBNZW51LmZhcm06YWRk
UGFyYW0oImZhcm1RIiwgIlVzZSAiIC4uIFNwZWxscy5RLm5hbWUgLi4gIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogIE1lbnUuZmFybTphZGRQYXJhbSgiZmFybVciLCAiVXNl
ICIgLi4gU3BlbGxzLlcubmFtZSAuLiAiIChXKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgTWVudS5mYXJtOmFkZFBhcmFtKCJmYXJtUmFuZ2UiLCAiTWluaW9ucyBvdXRzaWRlIEFB
IHJhbmdlIG9ubHkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICBNZW51LmZhcm06YWRkUGFyYW0oImZhcm1BQSIsICJGYXJtIGlmIEFBIGlzIG9uIENEIiwgU0NSSVBUX1BBUkFNX09O
T0ZGLCBmYWxzZSkNCiAgTWVudTphZGRTdWJNZW51KGRkYSAuLiAiTGFuZWNsZWFyIiwgImxhbmVjbGVhciIpDQogIE1lbnUubGFuZWNsZWFyOmFkZFBhcmFtKCJsYW5lY2xlYXJRIiwgIlVzZSAi
IC4uIFNwZWxscy5RLm5hbWUgLi4gIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogIE1lbnUubGFuZWNsZWFyOmFkZFBhcmFtKCJsYW5lY2xlYXJXIiwgIlVzZSAiIC4uIFNwZWxs
cy5XLm5hbWUgLi4gIiAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogIE1lbnUubGFuZWNsZWFyOmFkZFBhcmFtKCJsYW5lY2xlYXJSIiwgIlVzZSAiIC4uIFNwZWxscy5SLm5hbWUg
Li4gIiAoUikiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICBNZW51LmxhbmVjbGVhcjphZGRQYXJhbSgiaW5mbzciLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KICBNZW51Lmxh
bmVjbGVhcjphZGRQYXJhbSgibGFuZWNsZWFyV0Ftb3VudCIsICJNaW4gbWluaW9ucyB0byBXUiIsIFNDUklQVF9QQVJBTV9TTElDRSwgNSwgMCwgMzAsIDApDQogIE1lbnUubGFuZWNsZWFyOmFk
ZFBhcmFtKCJsYW5lY2xlYXJSQW1vdW50IiwgIk1pbiBtaW5pb25zIHRvIFdSIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCA1LCAwLCAzMCwgMCkNCiAgTWVudS5sYW5lY2xlYXI6YWRkUGFyYW0oImxh
bmVjbGVhcldSQW1vdW50IiwgIk1pbiBtaW5pb25zIHRvIFcgYW5kIFdSIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCA1LCAwLCAzMCwgMCkNCiAgTWVudTphZGRTdWJNZW51KGRkYSAuLiAiS2lsbFN0
ZWFsIiwgImtpbGxzdGVhbCIpDQogIE1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJraWxsc3RlYWwiLCAiVXNlIEtpbGxTdGVhbCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgTWVudS5r
aWxsc3RlYWw6YWRkUGFyYW0oImtpbGxTdGVhbEV4Y2VjdXRlIiwgIkV4Y2VjdXRlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsNCiAgICAiQWx3YXlzIiwNCiAgICAiTm90IGluIENvbWJvIiwN
CiAgICAiTm8gb3RoZXIgbW9kZSBhY3RpdmUiDQogIH0pDQogIE1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJraWxsc3RlYWxHYXAiLCAiR2FwQ2xvc2UgdG8ga2lsbCBlbmVteSIsIFNDUklQVF9Q
QVJBTV9PTk9GRiwgZmFsc2UpDQogIE1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJpbmZvMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQogIE1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJr
aWxsc3RlYWxRIiwgIlVzZSAiIC4uIFNwZWxscy5RLm5hbWUgLi4gIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogIE1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJraWxsc3RlYWxX
IiwgIlVzZSAiIC4uIFNwZWxscy5XLm5hbWUgLi4gIiAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogIE1lbnUua2lsbHN0ZWFsOmFkZFBhcmFtKCJraWxsc3RlYWxSIiwgIlVzZSAi
IC4uIFNwZWxscy5SLm5hbWUgLi4gIiAoUikiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICBNZW51LmtpbGxzdGVhbDphZGRQYXJhbSgia2lsbHN0ZWFsUVIiLCAiR2FwY2xvc2UgPiBR
ICsgUiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgTWVudS5raWxsc3RlYWw6YWRkUGFyYW0oImluZm8xMCIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQogIE1lbnUua2lsbHN0
ZWFsOmFkZFN1Yk1lbnUoIktpbGxTdGVhbCBFbmVteSIsICJlbmVtaWVzIikNCiAgZm9yIF9fYiwgYV9iIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgTWVudS5raWxsc3RlYWwu
ZW5lbWllczphZGRQYXJhbShhX2IuY2hhck5hbWUsIGFfYi5jaGFyTmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBlbmQNCiAgTWVudTphZGRTdWJNZW51KGRkYSAuLiAiRHJhd2lu
Z3MiLCAiZHJhd2luZ3MiKQ0KICBNZW51LmRyYXdpbmdzOmFkZFN1Yk1lbnUoIkxhZy1GcmVlIENpcmNsZXMiLCAibGZjIikNCiAgTWVudS5kcmF3aW5ncy5sZmM6YWRkUGFyYW0oInVzZUxGQyIs
ICJVc2UgTGFnLUZyZWUgQ2lyY2xlcyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogIE1lbnUuZHJhd2luZ3MubGZjOmFkZFBhcmFtKCJDTCIsICJMZW5ndGggYmVmb3JlIFNuYXBwaW5n
IiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAzMDAsIDc1LCAyMDAwLCAwKQ0KICBNZW51LmRyYXdpbmdzOmFkZFBhcmFtKCJkcmF3IiwgIlVzZSBEcmF3aW5ncyIsIFNDUklQVF9QQVJBTV9PTk9GRiwg
dHJ1ZSkNCiAgTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd1EiLCAiRHJhdyAiIC4uIFNwZWxscy5RLm5hbWUgLi4gIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogIE1lbnUu
ZHJhd2luZ3M6YWRkUGFyYW0oImRyYXdXIiwgIkRyYXcgIiAuLiBTcGVsbHMuVy5uYW1lIC4uICIgKFcpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBNZW51LmRyYXdpbmdzOmFkZFBh
cmFtKCJkcmF3RSIsICJEcmF3ICIgLi4gU3BlbGxzLkUubmFtZSAuLiAiIChFKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgTWVudS5kcmF3aW5nczphZGRQYXJhbSgiaW5mbzExIiwg
IiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCiAgTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd0tpbGxhYmxlIiwgIkRyYXcgS2lsbGFibGUgVGV4dCIsIFNDUklQVF9QQVJBTV9PTk9GRiwg
dHJ1ZSkNCiAgTWVudS5kcmF3aW5nczphZGRQYXJhbSgiZHJhd0tpbGxhYmxlV2lkdGgiLCAiRHJhdyBLaWxsYWJsZSBXaWR0aCIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDUsIDIwLCAwKQ0K
ICBNZW51LmRyYXdpbmdzOmFkZFBhcmFtKCJkcmF3VGFyZ2V0IiwgIkRyYXcgVGFyZ2V0IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBNZW51LmRyYXdpbmdzOmFkZFBhcmFtKCJkcmF3
U3BlbGxSZWFkeSIsICJEb24ndCBkcmF3IGlmIHNwZWxsIGlzIENEIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgTWVudTphZGRTdWJNZW51KGRkYSAuLiAiUHJlZGljdGlvbiIsICJw
cmVkaWN0aW9uIikNCiAgaWYgYmNhIGFuZCBjY2EgYW5kIGFkYSBhbmQgc1ByZWRMb2FkZWQgdGhlbg0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbiIsICJQcmVk
aWN0aW9uIFR5cGU6IiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsNCiAgICAgICJWUHJlZGljdGlvbiIsDQogICAgICAiRGl2aW5lUHJlZGljdGlvbiIsDQogICAgICAiSFByZWRpY3Rpb24iLA0K
ICAgICAgIlNQcmVkaWN0aW9uIg0KICAgIH0pDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uVlByZWQiLCAiVlByZWRpY3Rpb24gSGl0Q2hhbmNlIiwgU0NSSVBU
X1BBUkFNX1NMSUNFLCAyLCAxLCA2LCAwKQ0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbkhQcmVkIiwgIkhQcmVkaWN0aW9uIEhpdENoYW5jZSIsIFNDUklQVF9Q
QVJBTV9TTElDRSwgMSwgMSwgMywgMikNCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb25EUHJlZCIsICJEaXZpbmVQcmVkIEhpdENoYW5jZSIsIFNDUklQVF9QQVJB
TV9TTElDRSwgNTAsIDAsIDEwMCwgMCkNCiAgZWxzZWlmIGJjYSBhbmQgY2NhIGFuZCBhZGEgYW5kIG5vdCBzUHJlZExvYWRlZCB0aGVuDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1
c2VQcmVkaWN0aW9uIiwgIlByZWRpY3Rpb24gVHlwZToiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgew0KICAgICAgIlZQcmVkaWN0aW9uIiwNCiAgICAgICJEaXZpbmVQcmVkaWN0aW9uIiwNCiAg
ICAgICJIUHJlZGljdGlvbiINCiAgICB9KQ0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvblZQcmVkIiwgIlZQcmVkaWN0aW9uIEhpdENoYW5jZSIsIFNDUklQVF9Q
QVJBTV9TTElDRSwgMiwgMSwgNiwgMCkNCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb25IUHJlZCIsICJIUHJlZGljdGlvbiBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFS
QU1fU0xJQ0UsIDEsIDEsIDMsIDIpDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uRFByZWQiLCAiRGl2aW5lUHJlZCBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1f
U0xJQ0UsIDUwLCAwLCAxMDAsIDApDQogIGVsc2VpZiBiY2EgYW5kIG5vdCBjY2EgYW5kIGFkYSBhbmQgc1ByZWRMb2FkZWQgdGhlbg0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNl
UHJlZGljdGlvbiIsICJQcmVkaWN0aW9uIFR5cGU6IiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsNCiAgICAgICJWUHJlZGljdGlvbiIsDQogICAgICAiRGl2aW5lUHJlZGljdGlvbiIsDQogICAg
ICAiU1ByZWRpY3Rpb24iDQogICAgfSkNCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb25WUHJlZCIsICJWUHJlZGljdGlvbiBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFS
QU1fU0xJQ0UsIDIsIDEsIDYsIDApDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uRFByZWQiLCAiRGl2aW5lUHJlZCBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1f
U0xJQ0UsIDUwLCAwLCAxMDAsIDApDQogIGVsc2VpZiBiY2EgYW5kIG5vdCBjY2EgYW5kIGFkYSBhbmQgbm90IHNQcmVkTG9hZGVkIHRoZW4NCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0o
InVzZVByZWRpY3Rpb24iLCAiUHJlZGljdGlvbiBUeXBlOiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7DQogICAgICAiVlByZWRpY3Rpb24iLA0KICAgICAgIkRpdmluZVByZWRpY3Rpb24iDQog
ICAgfSkNCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb25WUHJlZCIsICJWUHJlZGljdGlvbiBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDYs
IDApDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uRFByZWQiLCAiRGl2aW5lUHJlZCBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwLCAwLCAxMDAs
IDApDQogIGVsc2VpZiBjY2EgYW5kIG5vdCBiY2EgYW5kIGFkYSBhbmQgc1ByZWRMb2FkZWQgdGhlbg0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbiIsICJQcmVk
aWN0aW9uIFR5cGU6IiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsNCiAgICAgICJWUHJlZGljdGlvbiIsDQogICAgICAiSFByZWRpY3Rpb24iLA0KICAgICAgIlNQcmVkaWN0aW9uIg0KICAgIH0p
DQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uVlByZWQiLCAiVlByZWRpY3Rpb24gSGl0Q2hhbmNlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCA2LCAwKQ0K
ICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbkhQcmVkIiwgIkhQcmVkaWN0aW9uIEhpdENoYW5jZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMSwgMSwgMywgMikNCiAg
ZWxzZWlmIGNjYSBhbmQgbm90IGJjYSBhbmQgYWRhIGFuZCBub3Qgc1ByZWRMb2FkZWQgdGhlbg0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbiIsICJQcmVkaWN0
aW9uIFR5cGU6IiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsNCiAgICAgICJWUHJlZGljdGlvbiIsDQogICAgICAiSFByZWRpY3Rpb24iDQogICAgfSkNCiAgICBNZW51LnByZWRpY3Rpb246YWRk
UGFyYW0oInVzZVByZWRpY3Rpb25WUHJlZCIsICJWUHJlZGljdGlvbiBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDYsIDApDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBh
cmFtKCJ1c2VQcmVkaWN0aW9uSFByZWQiLCAiSFByZWRpY3Rpb24gSGl0Q2hhbmNlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxLCAxLCAzLCAyKQ0KICBlbHNlaWYgY2NhIGFuZCBiY2EgYW5kIG5v
dCBhZGEgYW5kIHNQcmVkTG9hZGVkIHRoZW4NCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb24iLCAiUHJlZGljdGlvbiBUeXBlOiIsIFNDUklQVF9QQVJBTV9MSVNU
LCAxLCB7DQogICAgICAiRGl2aW5lUHJlZGljdGlvbiIsDQogICAgICAiSFByZWRpY3Rpb24iLA0KICAgICAgIlNQcmVkaWN0aW9uIg0KICAgIH0pDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBh
cmFtKCJ1c2VQcmVkaWN0aW9uRFByZWQiLCAiRGl2aW5lUHJlZCBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwLCAwLCAxMDAsIDApDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBh
cmFtKCJ1c2VQcmVkaWN0aW9uSFByZWQiLCAiSFByZWRpY3Rpb24gSGl0Q2hhbmNlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxLCAxLCAzLCAyKQ0KICBlbHNlaWYgY2NhIGFuZCBiY2EgYW5kIG5v
dCBhZGEgYW5kIG5vdCBzUHJlZExvYWRlZCB0aGVuDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uIiwgIlByZWRpY3Rpb24gVHlwZToiLCBTQ1JJUFRfUEFSQU1f
TElTVCwgMSwgew0KICAgICAgIkRpdmluZVByZWRpY3Rpb24iLA0KICAgICAgIkhQcmVkaWN0aW9uIg0KICAgIH0pDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9u
RFByZWQiLCAiRGl2aW5lUHJlZCBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwLCAwLCAxMDAsIDApDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9u
SFByZWQiLCAiSFByZWRpY3Rpb24gSGl0Q2hhbmNlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxLCAxLCAzLCAyKQ0KICBlbHNlaWYgYWRhIGFuZCBub3QgYmNhIGFuZCBub3QgY2NhIGFuZCBzUHJl
ZExvYWRlZCB0aGVuDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uIiwgIlByZWRpY3Rpb24gVHlwZToiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgew0KICAgICAg
IlZQcmVkaWN0aW9uIiwNCiAgICAgICJTUHJlZGljdGlvbiINCiAgICB9KQ0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvblZQcmVkIiwgIlZQcmVkaWN0aW9uIEhp
dENoYW5jZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgNiwgMCkNCiAgZWxzZWlmIGFkYSBhbmQgbm90IGJjYSBhbmQgbm90IGNjYSBhbmQgbm90IHNQcmVkTG9hZGVkIHRoZW4NCiAgICBN
ZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb24iLCAiUHJlZGljdGlvbiBUeXBlOiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7DQogICAgICAiVlByZWRpY3Rpb24iDQogICAg
fSkNCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb25WUHJlZCIsICJWUHJlZGljdGlvbiBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDYsIDAp
DQogIGVsc2VpZiBub3QgYWRhIGFuZCBiY2EgYW5kIG5vdCBjY2EgYW5kIHNQcmVkTG9hZGVkIHRoZW4NCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb24iLCAiUHJl
ZGljdGlvbiBUeXBlOiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7DQogICAgICAiRGl2aW5lUHJlZGljdGlvbiIsDQogICAgICAiU1ByZWRpY3Rpb24iDQogICAgfSkNCiAgICBNZW51LnByZWRp
Y3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb25EUHJlZCIsICJEaXZpbmVQcmVkIEhpdENoYW5jZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgNTAsIDAsIDEwMCwgMCkNCiAgZWxzZWlmIG5vdCBh
ZGEgYW5kIGJjYSBhbmQgbm90IGNjYSBhbmQgbm90IHNQcmVkTG9hZGVkIHRoZW4NCiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb24iLCAiUHJlZGljdGlvbiBUeXBl
OiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7DQogICAgICAiRGl2aW5lUHJlZGljdGlvbiINCiAgICB9KQ0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbkRQcmVk
IiwgIkRpdmluZVByZWQgSGl0Q2hhbmNlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCA1MCwgMCwgMTAwLCAwKQ0KICBlbHNlaWYgbm90IGFkYSBhbmQgbm90IGJjYSBhbmQgY2NhIGFuZCBzUHJlZExv
YWRlZCB0aGVuDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uIiwgIlByZWRpY3Rpb24gVHlwZToiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgew0KICAgICAgIkhQ
cmVkaWN0aW9uIiwNCiAgICAgICJTUHJlZGljdGlvbiINCiAgICB9KQ0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbkhQcmVkIiwgIkhQcmVkaWN0aW9uIEhpdENo
YW5jZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMSwgMSwgMywgMikNCiAgZWxzZWlmIG5vdCBhZGEgYW5kIG5vdCBiY2EgYW5kIGNjYSBhbmQgbm90IHNQcmVkTG9hZGVkIHRoZW4NCiAgICBNZW51
LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb24iLCAiUHJlZGljdGlvbiBUeXBlOiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7DQogICAgICAiSFByZWRpY3Rpb24iDQogICAgfSkN
CiAgICBNZW51LnByZWRpY3Rpb246YWRkUGFyYW0oInVzZVByZWRpY3Rpb25IUHJlZCIsICJIUHJlZGljdGlvbiBIaXRDaGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEsIDEsIDMsIDIpDQog
IGVsc2VpZiBub3QgYWRhIGFuZCBub3QgYmNhIGFuZCBub3QgY2NhIGFuZCBzUHJlZExvYWRlZCB0aGVuDQogICAgTWVudS5wcmVkaWN0aW9uOmFkZFBhcmFtKCJ1c2VQcmVkaWN0aW9uIiwgIlBy
ZWRpY3Rpb24gVHlwZToiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgew0KICAgICAgIlNQcmVkaWN0aW9uIg0KICAgIH0pDQogIGVsc2VpZiBub3QgYWRhIGFuZCBub3QgYmNhIGFuZCBub3QgY2Nh
IGFuZCBub3Qgc1ByZWRMb2FkZWQgdGhlbg0KICAgIE1lbnUucHJlZGljdGlvbjphZGRQYXJhbSgidXNlUHJlZGljdGlvbiIsICJQcmVkaWN0aW9uIFR5cGUiLCBTQ1JJUFRfUEFSQU1fTElTVCwg
MSwgew0KICAgICAgIk5vIFByZWRpY3Rpb25zIGZvdW5kIg0KICAgIH0pDQogIGVuZA0KICBNZW51OmFkZFN1Yk1lbnUoZGRhIC4uICJNaXNjIiwgIm1pc2MiKQ0KICBNZW51Lm1pc2M6YWRkU3Vi
TWVudSgiQXV0byBMZXZlbCIsICJhdXRvbGV2ZWwiKQ0KICBNZW51Lm1pc2MuYXV0b2xldmVsOmFkZFBhcmFtKCJ1c2VBdXRvTGV2ZWwiLCAiVXNlIEF1dG8gTGV2ZWwiLCBTQ1JJUFRfUEFSQU1f
T05PRkYsIGZhbHNlKQ0KICBNZW51Lm1pc2MuYXV0b2xldmVsOmFkZFBhcmFtKCJzZXF1ZW5jZSIsICJXaGF0IHRvIG1heD8iLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJRLVctUi1FIiwgIlct
US1SLUUifSkNCiAgaWYgaWduaXRlIH49IG5pbCB0aGVuDQogICAgTWVudS5taXNjOmFkZFN1Yk1lbnUoIkF1dG8gSWduaXRlIiwgImF1dG9pZ25pdGUiKQ0KICAgIE1lbnUubWlzYy5hdXRvaWdu
aXRlOmFkZFBhcmFtKCJ1c2VJZ25pdGUiLCAiVXNlIFN1bW1vbmVyIElnbml0ZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICBmb3IgX19iLCBhX2IgaW4gaXBhaXJzKEdldEVuZW15
SGVyb2VzKCkpIGRvDQogICAgICBNZW51Lm1pc2MuYXV0b2lnbml0ZTphZGRQYXJhbShhX2IuY2hhck5hbWUsICJVc2UgSWduaXRlIE9uICIgLi4gYV9iLmNoYXJOYW1lLCBTQ1JJUFRfUEFSQU1f
T05PRkYsIHRydWUpDQogICAgZW5kDQogIGVuZA0KICBNZW51Lm1pc2M6YWRkU3ViTWVudSgiWmh5b25hcyIsICJ6aG9ueWFzIikNCiAgTWVudS5taXNjLnpob255YXM6YWRkUGFyYW0oInpob255
YXMiLCAiQXV0byBaaG9ueWFzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBNZW51Lm1pc2MuemhvbnlhczphZGRQYXJhbSgiemhvbnlhc3VuZGVyIiwgIlVzZSBaaG9ueWFzIHVuZGVy
ICUgaGVhbHRoIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAwLjIsIDAsIDEsIDIpDQogIE1lbnUubWlzYzphZGRTdWJNZW51KCJBdXRvIElnbml0ZSBQb3Rpb24iLCAiY291bnRlckxvZ2ljIikNCiAg
TWVudS5taXNjLmNvdW50ZXJMb2dpYzphZGRQYXJhbSgidXNlUG90aW9uIiwgIkRyaW5rIEhlYWx0aCBQb3Qgd2hlbiBJZ25pdGVkIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICBNZW51
OmFkZFN1Yk1lbnUoZGRhIC4uICJPcmJXYWxrZXIiLCAib3Jid2Fsa2VyIikNCiAgTWVudTphZGRTdWJNZW51KGRkYSAuLiAiVGFyZ2V0U2VsZWN0b3IgTW9kZXMiLCAidHNtb2RlcyIpDQogIE1l
bnUudHNtb2RlczphZGRUUyh0cykNCiAgTWVudS50c21vZGVzOmFkZFRTKHRzTG9uZykNCiAgTWVudTphZGRQYXJhbSgiaW5mbzIiLCAiQXV0aG9yIiwgU0NSSVBUX1BBUkFNX0lORk8sIF9HLkxl
QmxhbmNfQXV0aG9yKQ0KICBNZW51OmFkZFBhcmFtKCJpbmZvIiwgIlZlcnNpb24iLCBTQ1JJUFRfUEFSQU1fSU5GTywgX0cuTGVCbGFuY19TY3JpcHRWZXJzaW9uKQ0KICBpZiBkYWEgdGhlbg0K
ICAgIE1lbnU6YWRkUGFyYW0oImluZm8xMSIsICJMaWNlbnNlIiwgU0NSSVBUX1BBUkFNX0lORk8sICJQcm9tb3Rpb24gRnJlZSBEYXkiKQ0KICBlbHNlaWYgYmFhIHRoZW4NCiAgICBNZW51OmFk
ZFBhcmFtKCJpbmZvMTEiLCAiTGljZW5zZSIsIFNDUklQVF9QQVJBTV9JTkZPLCAiVHJpYWwiKQ0KICBlbmQNCiAgaWYgY2FhIHRoZW4NCiAgICBNZW51OmFkZFBhcmFtKCJpbmZvMTEiLCAiTGlj
ZW5zZSIsIFNDUklQVF9QQVJBTV9JTkZPLCAiUGFpZCIpDQogIGVuZA0KICBNZW51OmFkZFBhcmFtKCJwYXRjaCIsICJQYXRjaDogIiwgU0NSSVBUX1BBUkFNX0lORk8sICI1LjIxIikNCiAgTWVu
dS5rZXlzZXR0aW5nczpwZXJtYVNob3coInVzZUNvbWJvIikNCiAgTWVudS5rZXlzZXR0aW5nczpwZXJtYVNob3coInVzZUhhcmFzcyIpDQogIE1lbnUua2V5c2V0dGluZ3M6cGVybWFTaG93KCJ1
c2VMYW5lQ2xlYXIiKQ0KICBNZW51LmtleXNldHRpbmdzOnBlcm1hU2hvdygidXNlRmFybSIpDQogIE1lbnUua2lsbHN0ZWFsOnBlcm1hU2hvdygia2lsbHN0ZWFsIikNCiAgTWVudS5kcmF3aW5n
czpwZXJtYVNob3coImRyYXciKQ0KZW5kDQpmdW5jdGlvbiBTdW1tb25lcnMoKQ0KICBoZWFsID0gKG5vdCBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzEpLm5hbWU6ZmluZCgic3VtbW9u
ZXJoZWFsIikgb3Igbm90IFNVTU1PTkVSXzEpIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzIpLm5hbWU6ZmluZCgic3VtbW9uZXJoZWFsIikgYW5kIFNVTU1PTkVSXzINCiAgaWdu
aXRlID0gKG5vdCBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzEpLm5hbWU6ZmluZCgic3VtbW9uZXJkb3QiKSBvciBub3QgU1VNTU9ORVJfMSkgYW5kIG15SGVybzpHZXRTcGVsbERhdGEo
U1VNTU9ORVJfMikubmFtZTpmaW5kKCJzdW1tb25lcmRvdCIpIGFuZCBTVU1NT05FUl8yDQplbmQNCmZ1bmN0aW9uIFR1cnJldENoZWNrKCkNCiAgaWYgdHVycmV0Rm9jdXMuZm9jdXNlZCBhbmQg
dHVycmV0Rm9jdXMudHVycmV0IGFuZCB0dXJyZXRGb2N1cy5zcGVsbCB0aGVuDQogICAgbG9jYWwgZGRhID0gMSAvICh0dXJyZXRGb2N1cy50dXJyZXQuYXR0YWNrU3BlZWQgKiAoMSAvICh0dXJy
ZXRGb2N1cy5zcGVsbC5hbmltYXRpb25UaW1lICogdHVycmV0Rm9jdXMudHVycmV0LmF0dGFja1NwZWVkKSkpDQogICAgaWYgb3MuY2xvY2soKSA+IHR1cnJldEZvY3VzLnN0YXJ0VCArIGRkYSAr
IHR1cnJldEZvY3VzLnNwZWxsLndpbmRVcFRpbWUgdGhlbg0KICAgICAgdHVycmV0Rm9jdXMuZm9jdXNlZCA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBDaGVja3MoKQ0K
ICBRcmVhZHkgPSBteUhlcm86Q2FuVXNlU3BlbGwoX1EpID09IFJFQURZDQogIFdyZWFkeSA9IG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkNCiAgRXJlYWR5ID0gbXlIZXJvOkNhblVz
ZVNwZWxsKF9FKSA9PSBSRUFEWQ0KICBScmVhZHkgPSBteUhlcm86Q2FuVXNlU3BlbGwoX1IpID09IFJFQURZDQogIEhyZWFkeSA9IGhlYWwgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwo
aGVhbCkgPT0gUkVBRFkNCiAgSXJlYWR5ID0gaWduaXRlIH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGlnbml0ZSkgPT0gUkVBRFkNCiAgaWYgTWVudS5kcmF3aW5ncy5sZmMudXNlTEZD
IHRoZW4NCiAgICBfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTINCiAgZWxzZQ0KICAgIF9HLkRyYXdDaXJjbGUgPSBfRy5vbGREcmF3Q2lyY2xlDQogIGVuZA0KICBNaW5pb25zQXR0YWNraW5n
TWUoKQ0KICBUdXJyZXRDaGVjaygpDQogIGlmIGNhc3RlZFdUaHJvdWdoSGFyYXNzLmJvb2wgYW5kIGNhc3RlZFdUaHJvdWdoSGFyYXNzLnRpbWUgKyAyID4gb3MuY2xvY2soKSB0aGVuDQogICAg
Y2FzdGVkV1Rocm91Z2hIYXJhc3MuYm9vbCA9IGZhbHNlDQogIGVuZA0KICBpZiBub3QgUnJlYWR5IGFuZCAoY2FuQ2FzdFNwZWxscyA9PSBmYWxzZSBvciBSU2tpbGwgfj0gbmlsKSB0aGVuDQog
ICAgY2FuQ2FzdFNwZWxscyA9IHRydWUNCiAgICBSU2tpbGwgPSBuaWwNCiAgICBSU2tpbGxQb3MgPSBuaWwNCiAgZW5kDQogIGVuZW15TWluaW9uczp1cGRhdGUoKQ0KICB0YXJnZXQgPSBHZXRP
cmJUYXJnZXQoKQ0KICBDYWxjRGFtYWdlKCkNCiAgQ29udHJvbEVSYW5nZSgpDQogIENoZWNrRm9yY2VkVGFyZ2V0KCkNCiAgUHJlZGljdGlvbkNoYW5nZSgpDQplbmQNCmZ1bmN0aW9uIFJldHVy
bkJlc3RUYXJnZXRQb3NpdGlvbihkZGEsIF9fYikNCiAgbG9jYWwgYV9iLCBiX2IsIGNfYiA9IDAsIHt9LCBuaWwNCiAgbG9jYWwgZF9iID0gX19iIGFuZCBfX2IgKiBfX2Igb3IgbXlIZXJvLnJh
bmdlICogbXlIZXJvLnJhbmdlDQogIGZvciBfYWIsIGFhYiBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBkX2IgPj0gR2V0RGlzdGFuY2VTcXIoYWFiLCBteUhlcm8pIHRo
ZW4NCiAgICAgIGJfYiA9IHt9DQogICAgICB0YWJsZS5pbnNlcnQoYl9iLCBhYWIuY2hhck5hbWUpDQogICAgICBhX2IgPSAwDQogICAgICBmb3IgYmFiLCBjYWIgaW4gaXBhaXJzKEdldEVuZW15
SGVyb2VzKCkpIGRvDQogICAgICAgIGlmIGFhYiB+PSBjYWIgYW5kIEdldERpc3RhbmNlKGNhYiwgYWFiKSA8IFNwZWxscy5XLnJhZGl1cyB0aGVuDQogICAgICAgICAgYV9iID0gYV9iICsgMQ0K
ICAgICAgICAgIHRhYmxlLmluc2VydChiX2IsIGNhYi5jaGFyTmFtZSkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGlmIGRkYSA8PSBhX2IgdGhlbg0KICAgICAgICBjX2IgPSBhYWIu
cG9zDQogICAgICAgIGJyZWFrDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIHJldHVybiBjX2IsIGJfYiwgYV9iDQplbmQNCmZ1bmN0aW9uIEdldEJlc3RBT0VQb3NpdGlvbihkZGEsIF9f
YiwgYV9iLCBiX2IpDQogIGFzc2VydChkZGEgYW5kIHR5cGUoZGRhKSA9PSAidGFibGUiLCAiVG90YWxseSBMZUJsYW5jOiBJbnZhbGlkIE9iamVjdHMgaW4gZnVuY3Rpb24gR2V0QmVzdEFPRVBv
c2l0aW9uIikNCiAgbG9jYWwgY19iDQogIGxvY2FsIGRfYiA9IDANCiAgbG9jYWwgX2FiID0gYl9iIG9yIG15SGVybw0KICBsb2NhbCBhYWIgPSBfX2IgYW5kIF9fYiAqIF9fYiBvciBteUhlcm8N
CiAgZm9yIGJhYiwgY2FiIGluIGlwYWlycyhkZGEpIGRvDQogICAgaWYgYWFiID4gR2V0RGlzdGFuY2VTcXIoY2FiLCBfYWIpIHRoZW4NCiAgICAgIGxvY2FsIGRhYiA9IDANCiAgICAgIGZvciBf
YmIsIGFiYiBpbiBpcGFpcnMoZGRhKSBkbw0KICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihhYmIsIGNhYikgPD0gYV9iICogYV9iIHRoZW4NCiAgICAgICAgICBkYWIgPSBkYWIgKyAxDQogICAg
ICAgIGVuZA0KICAgICAgZW5kDQogICAgICBpZiBkX2IgPCBkYWIgdGhlbg0KICAgICAgICBkX2IgPSBkYWINCiAgICAgICAgY19iID0gY2FiLnBvcw0KICAgICAgZW5kDQogICAgZW5kDQogIGVu
ZA0KICByZXR1cm4gY19iLCBkX2INCmVuZA0KZnVuY3Rpb24gR2V0S2lsbGFibGVNaW5pb25zKGRkYSwgX19iLCBhX2IsIGJfYikNCiAgYXNzZXJ0KGFfYiA9PSBfUSBvciBhX2IgPT0gX1cgb3Ig
YV9iID09IF9FLCAiVG90YWxseSBMZUJsYW5jOiBDb3JyZWN0IHNwZWxsIG5vdCBkZXRlY3RlZCIpDQogIGFzc2VydChkZGEgYW5kIHR5cGUoZGRhKSA9PSAidGFibGUiLCAiVG90YWxseSBMZUJs
YW5jOiBJbnZhbGlkIHRhYmxlIGluOiBtaW5pb25UYWJsZSwgZmlyc3QgcGFyYW1ldGVyIikNCiAgbG9jYWwgY19iID0gX19iIGFuZCBfX2IgKiBfX2Igb3IgbXlIZXJvLnJhbmdlICogbXlIZXJv
LnJhbmdlDQogIGxvY2FsIGRfYiA9IHt9DQogIGxvY2FsIF9hYiA9IGJfYiBvciBteUhlcm8NCiAgbG9jYWwgYWFiID0gMA0KICBmb3IgYmFiLCBjYWIgaW4gaXBhaXJzKGRkYSkgZG8NCiAgICBp
ZiBjX2IgPiBHZXREaXN0YW5jZVNxcihjYWIpIHRoZW4NCiAgICAgIGlmIGFfYiA9PSBfUSB0aGVuDQogICAgICAgIGFhYiA9IGdldERtZygiUSIsIGNhYiwgX2FiKQ0KICAgICAgZW5kDQogICAg
ICBpZiBhX2IgPT0gX1cgdGhlbg0KICAgICAgICBhYWIgPSBnZXREbWcoIlciLCBjYWIsIF9hYikNCiAgICAgIGVuZA0KICAgICAgaWYgYV9iID09IF9FIHRoZW4NCiAgICAgICAgYWFiID0gZ2V0
RG1nKCJFIiwgY2FiLCBfYWIpDQogICAgICBlbmQNCiAgICAgIGlmIGFhYiA+IGNhYi5oZWFsdGggdGhlbg0KICAgICAgICB0YWJsZS5pbnNlcnQoZF9iLCBjYWIpDQogICAgICBlbmQNCiAgICBl
bmQNCiAgZW5kDQogIHJldHVybiBkX2INCmVuZA0KZnVuY3Rpb24gQWxseUhlcm9JblJhbmdlKGRkYSwgX19iKQ0KICBfX2IgPSBfX2Igb3IgbXlIZXJvDQogIGRkYSA9IGRkYSBhbmQgZGRhICog
ZGRhIG9yIG15SGVyby5yYW5nZSAqIG15SGVyby5yYW5nZQ0KICBsb2NhbCBhX2IgPSAwDQogIGZvciBpID0gMSwgaGVyb01hbmFnZXIuaUNvdW50IGRvDQogICAgbG9jYWwgYl9iID0gaGVyb01h
bmFnZXI6Z2V0SGVybyhpKQ0KICAgIGlmIGJfYi50ZWFtID09IF9fYi50ZWFtIGFuZCBkZGEgPj0gR2V0RGlzdGFuY2VTcXIoX19iLCBiX2IpIHRoZW4NCiAgICAgIGFfYiA9IGFfYiArIDENCiAg
ICBlbmQNCiAgZW5kDQogIHJldHVybiBhX2INCmVuZA0KZnVuY3Rpb24gR2V0V1ByZWRpY3Rpb24oZGRhKQ0KICBsb2NhbCBfX2INCiAgaWYgVlByZWRpY3Rpb25Mb2FkZWQoKSB0aGVuDQogICAg
bG9jYWwgYV9iLCBiX2IsIGNfYiA9IGJkYTpJc0Rhc2hpbmcoZGRhLCBTcGVsbHMuVy5kZWxheSwgU3BlbGxzLlcucmFkaXVzLCBTcGVsbHMuVy5zcGVlZCwgbXlIZXJvKQ0KICAgIGlmIGFfYiBh
bmQgYl9iIHRoZW4NCiAgICAgIF9fYiA9IGNfYg0KICAgIGVsc2UNCiAgICAgIF9fYiA9IGJkYTpHZXRDaXJjdWxhckNhc3RQb3NpdGlvbihkZGEsIFNwZWxscy5XLmRlbGF5LCBTcGVsbHMuVy5y
YWRpdXMsIFNwZWxscy5XLnJhbmdlLCBTcGVsbHMuVy5zcGVlZCkNCiAgICBlbmQNCiAgZWxzZWlmIERpdmluZVByZWRMb2FkZWQoKSB0aGVuDQogICAgaWYgbm90IERQLmlzQXV0aGVkKCkgdGhl
bg0KICAgICAgU2F5KCJZb3UgYXJlIG5vdCBhdXRoZWQgdG8gdXNlIERpdmluZVByZWQuIENoYW5nZSBwcmVkaWN0aW9uISEiKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgbm90IHBy
ZWRUaW1lcjppc1VwKCkgdGhlbg0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgbG9jYWwgYV9iLCBiX2IsIGNfYiA9IERQOnByZWRpY3QoIndTa2lsbFNob3QiLCBkZGEpDQogICAgaWYgYV9i
IGFuZCBhX2IgPT0gU2tpbGxTaG90LlNUQVRVUy5TVUNDRVNTX0hJVCBhbmQgYl9iIH49IG5pbCB0aGVuDQogICAgICBfX2IgPSBiX2INCiAgICAgIHByZWRUaW1lcjpyZXNldCgpDQogICAgZW5k
DQogIGVsc2VpZiBIUHJlZE1lbnVMb2FkZWQoKSB0aGVuDQogICAgX19iID0gX2RhOkdldFByZWRpY3QoSFBfVywgZGRhLCBteUhlcm8pDQogIGVsc2VpZiBTUHJlZGljdGlvbkxvYWRlZCgpIHRo
ZW4NCiAgICBsb2NhbCBhX2IsIGJfYiwgY19iID0gY2RhOlByZWRpY3QoZGRhLCBTcGVsbHMuVy5yYW5nZSwgU3BlbGxzLlcuc3BlZWQsIFNwZWxscy5XLmRlbGF5LCBTcGVsbHMuVy5yYWRpdXMs
IGZhbHNlLCBteUhlcm8pDQogICAgaWYgYV9iIGFuZCBiX2IgPj0gMSB0aGVuDQogICAgICBfX2IgPSBhX2INCiAgICBlbmQNCiAgZW5kDQogIHJldHVybiBfX2INCmVuZA0KZnVuY3Rpb24gR2V0
RVByZWRpY3Rpb24oZGRhKQ0KICBsb2NhbCBfX2INCiAgaWYgVlByZWRpY3Rpb25Mb2FkZWQoKSB0aGVuDQogICAgbG9jYWwgYV9iLCBiX2IsIGNfYiA9IGJkYTpJc0Rhc2hpbmcoZGRhLCBTcGVs
bHMuRS5kZWxheSwgY3VycmVudFdpZHRoLCBTcGVsbHMuRS5zcGVlZCwgbXlIZXJvKQ0KICAgIGlmIGFfYiBhbmQgYl9iIGFuZCBHZXREaXN0YW5jZVNxcihjX2IpIDw9IFNwZWxscy5FLnJhbmdl
ICogU3BlbGxzLkUucmFuZ2UgdGhlbg0KICAgICAgX19iID0gY19iDQogICAgZWxzZQ0KICAgICAgbG9jYWwgZF9iLCBfYWIgPSBiZGE6R2V0TGluZUNhc3RQb3NpdGlvbihkZGEsIFNwZWxscy5F
LmRlbGF5LCBjdXJyZW50V2lkdGgsIGN1cnJlbnRSYW5nZSwgU3BlbGxzLkUuc3BlZWQsIG15SGVybywgdHJ1ZSkNCiAgICAgIGlmIF9hYiA+PSBNZW51LnByZWRpY3Rpb24udXNlUHJlZGljdGlv
blZQcmVkIHRoZW4NCiAgICAgICAgX19iID0gZF9iDQogICAgICBlbmQNCiAgICBlbmQNCiAgZWxzZWlmIERpdmluZVByZWRMb2FkZWQoKSB0aGVuDQogICAgaWYgbm90IERQLmlzQXV0aGVkKCkg
dGhlbg0KICAgICAgU2F5KCJZb3UgYXJlIG5vdCBhdXRoZWQgdG8gdXNlIERpdmluZVByZWQuIENoYW5nZSBwcmVkaWN0aW9uISEiKQ0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgaWYgbm90
IHByZWRUaW1lcjppc1VwKCkgdGhlbg0KICAgICAgcmV0dXJuDQogICAgZW5kDQogICAgbG9jYWwgYV9iLCBiX2IsIGNfYiA9IERQOnByZWRpY3QoImVTa2lsbFNob3QiLCBkZGEpDQogICAgaWYg
YV9iIGFuZCBhX2IgPT0gU2tpbGxTaG90LlNUQVRVUy5TVUNDRVNTX0hJVCBhbmQgYl9iIH49IG5pbCBhbmQgY19iID49IE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uRFByZWQgdGhlbg0K
ICAgICAgX19iID0gYl9iDQogICAgICBwcmVkVGltZXI6cmVzZXQoKQ0KICAgIGVuZA0KICBlbHNlaWYgSFByZWRNZW51TG9hZGVkKCkgdGhlbg0KICAgIGxvY2FsIGFfYiwgYl9iID0gX2RhOkdl
dFByZWRpY3QoSFBfRSwgZGRhLCBteUhlcm8pDQogICAgaWYgYV9iIGFuZCBiX2IgPj0gTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb25IUHJlZCB0aGVuDQogICAgICBfX2IgPSBhX2INCiAg
ICBlbmQNCiAgZWxzZWlmIFNQcmVkaWN0aW9uTG9hZGVkKCkgdGhlbg0KICAgIGxvY2FsIGFfYiwgYl9iLCBjX2IgPSBjZGE6UHJlZGljdChkZGEsIGN1cnJlbnRSYW5nZSwgU3BlbGxzLkUuc3Bl
ZWQsIFNwZWxscy5FLmRlbGF5LCBjdXJyZW50V2lkdGgsIHRydWUsIG15SGVybykNCiAgICBpZiBhX2IgYW5kIGJfYiA+PSAxIHRoZW4NCiAgICAgIFdDYXN0ID0gYV9iDQogICAgZW5kDQogIGVu
ZA0KICByZXR1cm4gX19iDQplbmQNCmZ1bmN0aW9uIFZQcmVkaWN0aW9uTG9hZGVkKCkNCiAgcmV0dXJuIGFkYSBhbmQgTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMQ0KZW5kDQpm
dW5jdGlvbiBEaXZpbmVQcmVkTG9hZGVkKCkNCiAgcmV0dXJuIGJjYSBhbmQgKGFkYSBhbmQgTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMiBvciBub3QgYWRhIGFuZCBNZW51LnBy
ZWRpY3Rpb24udXNlUHJlZGljdGlvbiA9PSAxKQ0KZW5kDQpmdW5jdGlvbiBIUHJlZE1lbnVMb2FkZWQoKQ0KICByZXR1cm4gY2NhIGFuZCAoYWRhIGFuZCBiY2EgYW5kIE1lbnUucHJlZGljdGlv
bi51c2VQcmVkaWN0aW9uID09IDMgb3IgYmNhIGFuZCBub3QgYWRhIGFuZCBNZW51LnByZWRpY3Rpb24udXNlUHJlZGljdGlvbiA9PSAyIG9yIGFkYSBhbmQgbm90IGJjYSBhbmQgTWVudS5wcmVk
aWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMiBvciBub3QgYWRhIGFuZCBub3QgYmNhIGFuZCBNZW51LnByZWRpY3Rpb24udXNlUHJlZGljdGlvbiA9PSAxKQ0KZW5kDQpmdW5jdGlvbiBTUHJlZGlj
dGlvbkxvYWRlZCgpDQogIHJldHVybiBzUHJlZExvYWRlZCBhbmQgKGFkYSBhbmQgYmNhIGFuZCBjY2EgYW5kIE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uID09IDQgb3IgYWRhIGFuZCBi
Y2EgYW5kIG5vdCBjY2EgYW5kIE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uID09IDMgb3IgYWRhIGFuZCBjY2EgYW5kIG5vdCBiY2EgYW5kIE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0
aW9uID09IDMgb3IgYWRhIGFuZCBub3QgYmNhIGFuZCBub3QgY2NhIGFuZCBNZW51LnByZWRpY3Rpb24udXNlUHJlZGljdGlvbiA9PSAyIG9yIGJjYSBhbmQgbm90IGNjYSBhbmQgbm90IGFkYSBh
bmQgTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMiBvciBjY2EgYW5kIG5vdCBiY2EgYW5kIG5vdCBhZGEgYW5kIE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uID09IDIgb3Ig
bm90IGFkYSBhbmQgbm90IGJjYSBhbmQgbm90IGNjYSBhbmQgTWVudS5wcmVkaWN0aW9uLnVzZVByZWRpY3Rpb24gPT0gMSkNCmVuZA0KZnVuY3Rpb24gUHJlZGljdGlvbkNoYW5nZSgpDQogIGxv
Y2FsIGRkYSA9IE1lbnUucHJlZGljdGlvbi51c2VQcmVkaWN0aW9uDQogIGlmIGN1cnJlbnRQcmVkaWN0aW9uIGFuZCBkZGEgfj0gY3VycmVudFByZWRpY3Rpb24gdGhlbg0KICAgIGN1cnJlbnRQ
cmVkaWN0aW9uID0gZGRhDQogICAgaWYgRGl2aW5lUHJlZExvYWRlZCgpIGFuZCBub3QgRFAuaXNBdXRoZWQoKSB0aGVuDQogICAgICBTYXkoIllvdSBhcmUgbm90IGF1dGhlZCBmb3IgRGl2aW5l
UHJlZC4gUGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCBwcmVkaWN0aW9uIG90aGVyd2lzZSBXIGFuZCBFIHdpbGwgTkVWRVIgY2FzdC4iKQ0KICAgIGVuZA0KICBlbmQNCmVuZA0KZnVuY3Rpb24g
Q2FzdFEoZGRhKQ0KICBpZiBkZGEgfj0gbmlsIGFuZCBub3QgZGRhLmRlYWQgYW5kIGRkYS52aXNpYmxlIGFuZCBHZXREaXN0YW5jZVNxcihkZGEpIDw9IFNwZWxscy5RLnJhbmdlICogU3BlbGxz
LlEucmFuZ2UgYW5kIGRkYS50eXBlIGFuZCAoZGRhLnR5cGUgPT0gbXlIZXJvLnR5cGUgb3IgZGRhLnR5cGUgPT0gIm9ial9BSV9NaW5pb24iKSBhbmQgUXJlYWR5IGFuZCBWYWxpZFRhcmdldChk
ZGEpIHRoZW4NCiAgICBDYXN0U3BlbGwoX1EsIGRkYSkNCiAgICByZXR1cm4gdHJ1ZQ0KICBlbmQNCiAgcmV0dXJuIGZhbHNlDQplbmQNCmZ1bmN0aW9uIENhc3RXKGRkYSwgX19iKQ0KICBpZiBu
b3QgX19iIHRoZW4NCiAgICBpZiBkZGEgYW5kIEdldERpc3RhbmNlU3FyKGRkYSkgPD0gU3BlbGxzLlcucmFuZ2VTcXIgdGhlbg0KICAgICAgaWYgZGRhLnR5cGUgYW5kIGRkYS50eXBlID09IG15
SGVyby50eXBlIHRoZW4NCiAgICAgICAgaWYgSXNXUmVhZHkoKSB0aGVuDQogICAgICAgICAgaWYgbGFzdFFDYXN0LnRhcmdldCBhbmQgbGFzdFFDYXN0LnRhcmdldC5uZXR3b3JrSUQgYW5kIGxh
c3RRQ2FzdC50YXJnZXQubmV0d29ya0lEID09IGRkYS5uZXR3b3JrSUQgdGhlbg0KICAgICAgICAgICAgbG9jYWwgY19iID0gb3MuY2xvY2soKQ0KICAgICAgICAgICAgbG9jYWwgZF9iID0gU3Bl
bGxzLlcuc3BlZWQNCiAgICAgICAgICAgIGxvY2FsIF9hYiA9IFNwZWxscy5XLmRlbGF5DQogICAgICAgICAgICBsb2NhbCBhYWIgPSBHZXREaXN0YW5jZShkZGEpDQogICAgICAgICAgICBsb2Nh
bCBiYWIgPSBhYWIgLyBTcGVsbHMuVy5zcGVlZCArIF9hYg0KICAgICAgICAgICAgbG9jYWwgY2FiID0gY19iICsgYmFiDQogICAgICAgICAgICBpZiBsYXN0UUNhc3QuZW5kVCBhbmQgY2FiIDwg
bGFzdFFDYXN0LmVuZFQgdGhlbg0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGlmIFNwZWxscy5RLnJlYWR5IGFu
ZCBub3QgU3BlbGxEbWdDYWxjdWxhdGlvbnMoIlciLCBkZGEpID49IGRkYS5oZWFsdGggYW5kIG5vdCBTcGVsbHMuRS5yZWFkeSB0aGVuDQogICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICBl
bmQNCiAgICAgICAgICBsb2NhbCBhX2IsIGJfYiA9IEdldFdQcmVkaWN0aW9uKGRkYSkNCiAgICAgICAgICBpZiBhX2IgYW5kIG5vdCBhX2IueSB0aGVuDQogICAgICAgICAgICBhX2IueSA9IDAN
CiAgICAgICAgICBlbmQNCiAgICAgICAgICBpZiBhX2Igfj0gbmlsIGFuZCBub3QgSXNXYWxsKEQzRFhWRUNUT1IzKGFfYi54LCBhX2IueSwgYV9iLnopKSBhbmQgKG5vdCBfRy5FdmFkZWVlX0xv
YWRlZCBvciBub3QgX0cuRXZhZGVlZV9Jc0Rhbmdlcm91cyBvciBub3QgX0cuRXZhZGVlZV9Jc0Rhbmdlcm91cyhQb2ludChhX2IueCwgYV9iLnopKSBvciBTcGVsbERtZ0NhbGN1bGF0aW9ucygi
VyIsIGRkYSkgPj0gZGRhLmhlYWx0aCkgdGhlbg0KICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2VTcXIoYV9iKSA+PSBTcGVsbHMuVy5yYW5nZVNxciB0aGVuDQogICAgICAgICAgICAgIHJldHVy
bg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBDYXN0U3BlbGwoX1csIGFfYi54LCBhX2IueikNCiAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgICAgZW5kDQogICAgICAgIGVu
ZA0KICAgICAgZWxzZWlmIGRkYS50eXBlID09ICJvYmpfQUlfTWluaW9uIiB0aGVuDQogICAgICAgIENhc3RTcGVsbChfVywgZGRhLnBvcy54LCBkZGEucG9zLnopDQogICAgICAgIHJldHVybiB0
cnVlDQogICAgICBlbmQNCiAgICBlbmQNCiAgZWxzZWlmIElzV1JlYWR5KCkgYW5kIChub3QgX0cuRXZhZGVlZV9Mb2FkZWQgb3Igbm90IF9HLkV2YWRlZWVfSXNEYW5nZXJvdXMgb3Igbm90IF9H
LkV2YWRlZWVfSXNEYW5nZXJvdXMoUG9pbnQoZGRhLCBfX2IpKSkgYW5kIEdldERpc3RhbmNlU3FyKFBvaW50KGRkYSwgX19iKSkgPD0gU3BlbGxzLlcucmFuZ2VTcXIgYW5kIG5vdCBJc1dhbGwo
RDNEWFZFQ1RPUjMoZGRhLCAwLCBfX2IpKSB0aGVuDQogICAgQ2FzdFNwZWxsKF9XLCBkZGEsIF9fYikNCiAgICByZXR1cm4gdHJ1ZQ0KICBlbmQNCiAgcmV0dXJuIGZhbHNlDQplbmQNCmZ1bmN0
aW9uIEdhcENsb3NlKGRkYSkNCiAgaWYgSXNXUmVhZHkoKSBhbmQgZGRhIGFuZCBkZGEudHlwZSBhbmQgZGRhLnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIEhhc01hbmFUb0dhcENsb3NlKCkgdGhl
bg0KICAgIGxvY2FsIF9fYiA9IFZlY3RvcihteUhlcm8pICsgKFZlY3RvcihkZGEpIC0gbXlIZXJvKTpub3JtYWxpemVkKCkgKiBTcGVsbHMuVy5yYW5nZQ0KICAgIGlmIF9fYiBhbmQgbm90IF9f
Yi55IHRoZW4NCiAgICAgIF9fYi55ID0gMA0KICAgIGVuZA0KICAgIGlmIF9fYiBhbmQgbm90IFVuZGVyVHVycmV0KF9fYiwgdHJ1ZSkgYW5kIG5vdCBJc1dhbGwoRDNEWFZFQ1RPUjMoX19iLngs
IF9fYi55LCBfX2IueikpIGFuZCAobm90IF9HLkV2YWRlZWVfTG9hZGVkIG9yIG5vdCBfRy5FdmFkZWVlX0lzRGFuZ2Vyb3VzIG9yIG5vdCBfRy5FdmFkZWVlX0lzRGFuZ2Vyb3VzKFBvaW50KF9f
Yi54LCBfX2IueikpKSBhbmQgR2V0RGlzdGFuY2UoZGRhLCBfX2IpIDw9IFNwZWxscy5RLnJhbmdlIHRoZW4NCiAgICAgIENhc3RTcGVsbChfVywgX19iLngsIF9fYi56KQ0KICAgICAgcmV0dXJu
IHRydWUNCiAgICBlbmQNCiAgZW5kDQogIHJldHVybiBmYWxzZQ0KZW5kDQpmdW5jdGlvbiBJc1dSZWFkeSgpDQogIHJldHVybiBXcmVhZHkgYW5kIG5vdCB3VXNlZCgpDQplbmQNCmZ1bmN0aW9u
IEhhc01hbmFUb0dhcENsb3NlKCkNCiAgbG9jYWwgZGRhID0gbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAxMCArIDQwDQogIGxvY2FsIF9fYiA9IG15SGVybzpHZXRTcGVsbERhdGEo
X1cpLmxldmVsICogNSArIDc1DQogIGxvY2FsIGFfYiA9IDgwDQogIHJldHVybiBRcmVhZHkgYW5kIGRkYSArIF9fYiA8IG15SGVyby5tYW5hIG9yIEVyZWFkeSBhbmQgYV9iICsgX19iIDwgbXlI
ZXJvLm1hbmENCmVuZA0KZnVuY3Rpb24gQ2FzdEUoZGRhKQ0KICBpZiBkZGEgYW5kIG5vdCBkZGEuZGVhZCBhbmQgR2V0RGlzdGFuY2VTcXIoZGRhKSA8PSBTcGVsbHMuRS5yYW5nZSAqIFNwZWxs
cy5FLnJhbmdlIGFuZCBkZGEudHlwZSBhbmQgKGRkYS50eXBlID09IG15SGVyby50eXBlIG9yIGRkYS50eXBlID09ICJvYmpfQUlfTWluaW9uIikgYW5kIEVyZWFkeSB0aGVuDQogICAgbG9jYWwg
X19iID0gR2V0RVByZWRpY3Rpb24oZGRhKQ0KICAgIGlmIF9fYiB+PSBuaWwgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9FLCBfX2IueCwgX19iLnopDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVu
ZA0KICBlbmQNCiAgcmV0dXJuIGZhbHNlDQplbmQNCmZ1bmN0aW9uIHdVc2VkKCkNCiAgcmV0dXJuIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLm5hbWUgYW5kIG15SGVybzpHZXRTcGVsbERhdGEo
X1cpLm5hbWUgPT0gImxlYmxhbmNzbGlkZXJldHVybiINCmVuZA0KZnVuY3Rpb24gd3JVc2VkKCkNCiAgcmV0dXJuIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLm5hbWUgYW5kIG15SGVybzpHZXRT
cGVsbERhdGEoX1IpLm5hbWUgPT0gImxlYmxhbmNzbGlkZXJldHVybm0iDQplbmQNCmZ1bmN0aW9uIFNwZWxsRG1nQ2FsY3VsYXRpb25zKGRkYSwgX19iKQ0KICBsb2NhbCBhX2IgPSAwDQogIGlm
IGRkYSA9PSAiUSIgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsID49IDEgdGhlbg0KICAgIGFfYiA9IDI1ICogbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKyAzMCArIDAu
NCAqIG15SGVyby5hcA0KICBlbHNlaWYgZGRhID09ICJXIiBhbmQgMSA8PSBteUhlcm86R2V0U3BlbGxEYXRhKF9XKS5sZXZlbCB0aGVuDQogICAgYV9iID0gNDAgKiBteUhlcm86R2V0U3BlbGxE
YXRhKF9XKS5sZXZlbCArIDQ1ICsgMC42ICogbXlIZXJvLmFwDQogIGVsc2VpZiBkZGEgPT0gIkUiIGFuZCAxIDw9IG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsIHRoZW4NCiAgICBhX2Ig
PSAyNSAqIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsICsgMTUgKyAwLjUgKiBteUhlcm8uYXANCiAgZWxzZWlmIGRkYSA9PSAiUlEiIGFuZCAxIDw9IG15SGVybzpHZXRTcGVsbERhdGEo
X1IpLmxldmVsIHRoZW4NCiAgICBhX2IgPSAxMDAgKiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCArIDAuNjUgKiBteUhlcm8uYXANCiAgZWxzZWlmIGRkYSA9PSAiUlciIGFuZCAxIDw9
IG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsIHRoZW4NCiAgICBhX2IgPSAxNTAgKiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCArIDAuOTc1ICogbXlIZXJvLmFwDQogIGVsc2Vp
ZiBkZGEgPT0gIlJFIiBhbmQgMSA8PSBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCB0aGVuDQogICAgYV9iID0gMTAwICogbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKyAwLjY1
ICogbXlIZXJvLmFwDQogIGVsc2VpZiBkZGEgPT0gIlFQcm9jIiB0aGVuDQogICAgYV9iID0gMjUgKiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCArIDMwICsgMC40ICogbXlIZXJvLmFw
DQogIGVuZA0KICBpZiBhX2IgPiAwIHRoZW4NCiAgICBhX2IgPSBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKF9fYiwgYV9iKQ0KICBlbmQNCiAgcmV0dXJuIGFfYiBhbmQgYV9iIG9yIDANCmVuZA0K
ZnVuY3Rpb24gRHJhd0NpcmNsZU5leHRMdmwoZGRhLCBfX2IsIGFfYiwgYl9iLCBjX2IsIGRfYiwgX2FiKQ0KICBiX2IgPSBiX2Igb3IgMzAwDQogIHF1YWxpdHkgPSBtYXRoLm1heCg4LCByb3Vu
ZCgxODAgLyBtYXRoLmRlZygobWF0aC5hc2luKF9hYiAvICgyICogYl9iKSkpKSkpDQogIHF1YWxpdHkgPSAyICogbWF0aC5waSAvIHF1YWxpdHkNCiAgYl9iID0gYl9iICogMC45Mg0KICBsb2Nh
bCBhYWIgPSB7fQ0KICBmb3IgdGhldGEgPSAwLCAyICogbWF0aC5waSArIHF1YWxpdHksIHF1YWxpdHkgZG8NCiAgICBsb2NhbCBiYWIgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKGRkYSAr
IGJfYiAqIG1hdGguY29zKHRoZXRhKSwgX19iLCBhX2IgLSBiX2IgKiBtYXRoLnNpbih0aGV0YSkpKQ0KICAgIGFhYlsjYWFiICsgMV0gPSBEM0RYVkVDVE9SMihiYWIueCwgYmFiLnkpDQogIGVu
ZA0KICBEcmF3TGluZXMyKGFhYiwgY19iIG9yIDEsIDQyOTQ5NjcyOTUpDQplbmQNCmZ1bmN0aW9uIHJvdW5kKGRkYSkNCiAgaWYgZGRhID49IDAgdGhlbg0KICAgIHJldHVybiBtYXRoLmZsb29y
KGRkYSArIDAuNSkNCiAgZWxzZQ0KICAgIHJldHVybiBtYXRoLmNlaWwoZGRhIC0gMC41KQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gRHJhd0NpcmNsZTIoZGRhLCBfX2IsIGFfYiwgYl9iLCBjX2Ip
DQogIGxvY2FsIGRfYiA9IFZlY3RvcihkZGEsIF9fYiwgYV9iKQ0KICBsb2NhbCBfYWIgPSBWZWN0b3IoY2FtZXJhUG9zLngsIGNhbWVyYVBvcy55LCBjYW1lcmFQb3MueikNCiAgbG9jYWwgYWFi
ID0gZF9iIC0gKGRfYiAtIF9hYik6bm9ybWFsaXplZCgpICogYl9iDQogIGxvY2FsIGJhYiA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoYWFiLngsIGFhYi55LCBhYWIueikpDQogIGlmIE9u
U2NyZWVuKHsNCiAgICB4ID0gYmFiLngsDQogICAgeSA9IGJhYi55DQogIH0sIHsNCiAgICB4ID0gYmFiLngsDQogICAgeSA9IGJhYi55DQogIH0pIHRoZW4NCiAgICBEcmF3Q2lyY2xlTmV4dEx2
bChkZGEsIF9fYiwgYV9iLCBiX2IsIDEsIGNfYiwgTWVudS5kcmF3aW5ncy5sZmMuQ0wpDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBPblduZE1zZyhkZGEsIF9fYikNCiAgaWYgZGRhID09IFdNX0xC
VVRUT05ET1dOIGFuZCBNZW51LmNvbWJvLnNlbGVjdGVkVGFyZ2V0IHRoZW4NCiAgICBsb2NhbCBhX2INCiAgICBmb3IgYl9iLCBjX2IgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAg
ICAgIGlmIGNfYiBhbmQgY19iLnZpc2libGUgYW5kIG5vdCBjX2IuZGVhZCBhbmQgVmFsaWRUYXJnZXQoY19iKSBhbmQgR2V0RGlzdGFuY2VTcXIoY19iLCBtb3VzZVBvcykgPD0gNDAwMDAgYW5k
IEdldERpc3RhbmNlU3FyKGNfYikgPD0gNDAwMDAwMCB0aGVuDQogICAgICAgIGFfYiA9IGNfYg0KICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgYV9iIGFuZCBHZXREaXN0YW5jZVNxcihhX2Is
IG1vdXNlUG9zKSA8IDQwMDAwIHRoZW4NCiAgICAgIGlmIGZvcmNlZFRhcmdldCBhbmQgYV9iLm5ldHdvcmtJRCA9PSBmb3JjZWRUYXJnZXQubmV0d29ya0lEIHRoZW4NCiAgICAgICAgZm9yY2Vk
VGFyZ2V0ID0gbmlsDQogICAgICAgIFNheSgiRGVzZWxlY3RlZCB0YXJnZXQ6ICIgLi4gYV9iLmNoYXJOYW1lKQ0KICAgICAgZWxzZQ0KICAgICAgICBmb3JjZWRUYXJnZXQgPSBhX2INCiAgICAg
ICAgU2F5KCJTZWxlY3RlZCB0YXJnZXQ6ICIgLi4gYV9iLmNoYXJOYW1lKQ0KICAgICAgICBmb3JjZWRUYXJnZXRUaW1lID0gb3MuY2xvY2soKQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0K
ZW5kDQpjbGFzcygiT3JiV2Fsa2VyIikNCmZ1bmN0aW9uIE9yYldhbGtlcjpfX2luaXQoKQ0KICBzZWxmLndpbmRVcFRpbWUgPSAwDQogIHNlbGYuYW5pbWF0aW9uVGltZSA9IDANCiAgc2VsZi5B
QSA9IG9zLmNsb2NrKCkNCiAgc2VsZi5yYW5nZVNxciA9IDI3NTYyNQ0KICBBZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbihkZGEsIF9fYikNCiAgICBzZWxmOk9uUHJvY2Nlc3NTcGVs
bChkZGEsIF9fYikNCiAgZW5kKQ0KZW5kDQpmdW5jdGlvbiBPcmJXYWxrZXI6T25Qcm9jY2Vzc1NwZWxsKGRkYSwgX19iKQ0KICBpZiBkZGEgYW5kIGRkYS5pc01lIGFuZCBfX2IgYW5kIF9fYi5u
YW1lIGFuZCBfX2IubmFtZTpsb3dlcigpOmZpbmQoImJhc2ljIikgdGhlbg0KICAgIHNlbGYuQUEgPSBvcy5jbG9jaygpDQogICAgc2VsZi53aW5kVXBUaW1lID0gMSAvIChteUhlcm8uYXR0YWNr
U3BlZWQgKiAoMSAvIChfX2Iud2luZFVwVGltZSAqIG15SGVyby5hdHRhY2tTcGVlZCkpKQ0KICAgIHNlbGYuYW5pbWF0aW9uVGltZSA9IDEgLyAobXlIZXJvLmF0dGFja1NwZWVkICogKDEgLyAo
X19iLmFuaW1hdGlvblRpbWUgKiBteUhlcm8uYXR0YWNrU3BlZWQpKSkNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIE9yYldhbGtlcjpPcmJ3YWxrKGRkYSkNCiAgaWYgZGRhIGFuZCBkZGEudHlwZSBh
bmQgb3MuY2xvY2soKSA+IHNlbGYuQUEgKyBzZWxmLmFuaW1hdGlvblRpbWUgYW5kIEdldERpc3RhbmNlU3FyKGRkYSkgPD0gc2VsZi5yYW5nZVNxciB0aGVuDQogICAgbXlIZXJvOkF0dGFjayhk
ZGEpDQogIGVsc2VpZiBvcy5jbG9jaygpID4gc2VsZi5BQSArIHNlbGYud2luZFVwVGltZSB0aGVuDQogICAgbXlIZXJvOk1vdmVUbyhtb3VzZVBvcy54LCBtb3VzZVBvcy56KQ0KICBlbmQNCmVu
ZA0KYXNzZXJ0KGxvYWQoQmFzZTY0RGVjb2RlKCJHMHgxWVZJQUFRUUVCQWdBR1pNTkNob0tBQUFBQUFBQUFBQUFBUUlLQUFBQUJnQkFBRUZBQUFBZFFBQUJCa0JBQUdVQUFBQUtRQUNCQmtCQUFH
VkFBQUFLUUlDQkh3Q0FBQVFBQUFBRUJnQUFBR05zWVhOekFBUU5BQUFBVTJOeWFYQjBVM1JoZEhWekFBUUhBQUFBWDE5cGJtbDBBQVFMQUFBQVUyVnVaRlZ3WkdGMFpRQUNBQUFBQWdBQUFBZ0FB
QUFDQUFvdEFBQUFoa0JBQU1hQVFBQUd3VUFBQndGQkFrRkJBUUFkZ1FBQlJzRkFBRWNCd1FLQmdRRUFYWUVBQVliQlFBQ0hBVUVEd2NFQkFKMkJBQUhHd1VBQXh3SEJBd0VDQWdEZGdRQUJCc0pB
QUFjQ1FRUkJRZ0lBSFlJQUFSWUJBZ0xkQUFBQm5ZQUFBQXFBQUlBS1FBQ0ZoZ0JEQU1IQUFnQ2RnQUFCQ29DQWhRcUF3NGFHQUVRQXg4QkNBTWZBd3dIZEFJQUFuWUFBQUFxQWdJZU1RRVFBQVlF
RUFKMUFnQUdHd0VRQTVRQUFBSjFBQUFFZkFJQUFGQUFBQUFRRkFBQUFhSGRwWkFBRURRQUFBRUpoYzJVMk5FVnVZMjlrWlFBRUNRQUFBSFJ2YzNSeWFXNW5BQVFEQUFBQWIzTUFCQWNBQUFCblpY
UmxibllBQkJVQUFBQlFVazlEUlZOVFQxSmZTVVJGVGxSSlJrbEZVZ0FFQ1FBQUFGVlRSVkpPUVUxRkFBUU5BQUFBUTA5TlVGVlVSVkpPUVUxRkFBUVFBQUFBVUZKUFEwVlRVMDlTWDB4RlZrVk1B
QVFUQUFBQVVGSlBRMFZUVTA5U1gxSkZWa2xUU1U5T0FBUUVBQUFBUzJWNUFBUUhBQUFBYzI5amEyVjBBQVFJQUFBQWNtVnhkV2x5WlFBRUNnQUFBR2RoYldWVGRHRjBaUUFBQkFRQUFBQjBZM0FB
QkFjQUFBQmhjM05sY25RQUJBc0FBQUJUWlc1a1ZYQmtZWFJsQUFNQUFBQUFBQUR3UHdRVUFBQUFRV1JrUW5WbmMzQnNZWFJEWVd4c1ltRmphd0FCQUFBQUNBQUFBQWdBQUFBQUFBTUZBQUFBQlFB
QUFBd0FRQUNCUUFBQUhVQ0FBUjhBZ0FBQ0FBQUFCQXNBQUFCVFpXNWtWWEJrWVhSbEFBTUFBQUFBQUFBQVFBQUFBQUFCQUFBQUFRQVFBQUFBUUc5aVpuVnpZMkYwWldRdWJIVmhBQVVBQUFBSUFB
QUFDQUFBQUFnQUFBQUlBQUFBQ0FBQUFBQUFBQUFCQUFBQUJRQUFBSE5sYkdZQUFRQUFBQUFBRUFBQUFFQnZZbVoxYzJOaGRHVmtMbXgxWVFBdEFBQUFBd0FBQUFNQUFBQUVBQUFBQkFBQUFBUUFB
QUFFQUFBQUJBQUFBQVFBQUFBRUFBQUFCQUFBQUFVQUFBQUZBQUFBQlFBQUFBVUFBQUFGQUFBQUJRQUFBQVVBQUFBRkFBQUFCZ0FBQUFZQUFBQUdBQUFBQmdBQUFBVUFBQUFEQUFBQUF3QUFBQVlB
QUFBR0FBQUFCZ0FBQUFZQUFBQUdBQUFBQmdBQUFBWUFBQUFIQUFBQUJ3QUFBQWNBQUFBSEFBQUFCd0FBQUFjQUFBQUhBQUFBQndBQUFBY0FBQUFJQUFBQUNBQUFBQWdBQUFBSUFBQUFBZ0FBQUFV
QUFBQnpaV3htQUFBQUFBQXRBQUFBQWdBQUFHRUFBQUFBQUMwQUFBQUJBQUFBQlFBQUFGOUZUbFlBQ1FBQUFBNEFBQUFDQUEwWEFBQUFod0JBQUl4QVFBRUJnUUFBUWNFQUFKMUFBQUtIQUVBQWpB
QkJBUUZCQVFCSGdVRUFnY0VCQU1jQlFnQUJ3Z0VBUUFLQUFJSENBUURHUWtJQXg0TENCUUhEQWdBV0FRTUNuVUNBQVljQVFBQ01BRU1CblVBQUFSOEFnQUFOQUFBQUJBUUFBQUIwWTNBQUJBZ0FB
QUJqYjI1dVpXTjBBQVFSQUFBQWMyTnlhWEIwYzNSaGRIVnpMbTVsZEFBREFBQUFBQUFBVkVBRUJRQUFBSE5sYm1RQUJBc0FBQUJIUlZRZ0wzTjVibU10QUFRRUFBQUFTMlY1QUFRQ0FBQUFMUUFF
QlFBQUFHaDNhV1FBQkFjQUFBQnRlVWhsY204QUJBa0FBQUJqYUdGeVRtRnRaUUFFSmdBQUFDQklWRlJRTHpFdU1BMEtTRzl6ZERvZ2MyTnlhWEIwYzNSaGRIVnpMbTVsZEEwS0RRb0FCQVlBQUFC
amJHOXpaUUFBQUFBQUFRQUFBQUFBRUFBQUFFQnZZbVoxYzJOaGRHVmtMbXgxWVFBWEFBQUFDZ0FBQUFvQUFBQUtBQUFBQ2dBQUFBb0FBQUFMQUFBQUN3QUFBQXNBQUFBTEFBQUFEQUFBQUF3QUFB
QU5BQUFBRFFBQUFBMEFBQUFPQUFBQURnQUFBQTRBQUFBT0FBQUFDd0FBQUE0QUFBQU9BQUFBRGdBQUFBNEFBQUFDQUFBQUJRQUFBSE5sYkdZQUFBQUFBQmNBQUFBQ0FBQUFZUUFBQUFBQUZ3QUFB
QUVBQUFBRkFBQUFYMFZPVmdBQkFBQUFBUUFRQUFBQVFHOWlablZ6WTJGMFpXUXViSFZoQUFvQUFBQUJBQUFBQVFBQUFBRUFBQUFDQUFBQUNBQUFBQUlBQUFBSkFBQUFEZ0FBQUFrQUFBQU9BQUFB
QUFBQUFBRUFBQUFGQUFBQVgwVk9WZ0E9IiksIG5pbCwgImJ0IiwgX0VOVikpKCkNClNjcmlwdFN0YXR1cygiWEtOTExRTFBSTU4iKQ0KY2xhc3MoIlN4U2NyaXB0VXBkYXRlIikNCmZ1bmN0aW9u
IFN4U2NyaXB0VXBkYXRlOl9faW5pdChkZGEsIF9fYiwgYV9iLCBiX2IsIGNfYiwgZF9iLCBfYWIsIGFhYiwgYmFiLCBjYWIpDQogIHNlbGYuTG9jYWxWZXJzaW9uID0gZGRhDQogIHNlbGYuSG9z
dCA9IGFfYg0KICBzZWxmLlZlcnNpb25QYXRoID0gIi9Cb0wvVENQVXBkYXRlci9HZXRTY3JpcHQiIC4uIChfX2IgYW5kICI1IiBvciAiNiIpIC4uICIucGhwP3NjcmlwdD0iIC4uIHNlbGY6QmFz
ZTY0RW5jb2RlKHNlbGYuSG9zdCAuLiBiX2IpIC4uICImcmFuZD0iIC4uIG1hdGgucmFuZG9tKDk5OTk5OTk5KQ0KICBzZWxmLlNjcmlwdFBhdGggPSAiL0JvTC9UQ1BVcGRhdGVyL0dldFNjcmlw
dCIgLi4gKF9fYiBhbmQgIjUiIG9yICI2IikgLi4gIi5waHA/c2NyaXB0PSIgLi4gc2VsZjpCYXNlNjRFbmNvZGUoc2VsZi5Ib3N0IC4uIGNfYikgLi4gIiZyYW5kPSIgLi4gbWF0aC5yYW5kb20o
OTk5OTk5OTkpDQogIHNlbGYuU2F2ZVBhdGggPSBkX2INCiAgc2VsZi5DYWxsYmFja1VwZGF0ZSA9IF9hYg0KICBzZWxmLkNhbGxiYWNrTm9VcGRhdGUgPSBhYWINCiAgc2VsZi5DYWxsYmFja05l
d1ZlcnNpb24gPSBiYWINCiAgc2VsZi5DYWxsYmFja0Vycm9yID0gY2FiDQogIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpDQogICAgc2VsZjpPbkRyYXcoKQ0KICBlbmQpDQogIHNlbGY6Q3Jl
YXRlU29ja2V0KHNlbGYuVmVyc2lvblBhdGgpDQogIHNlbGYuRG93bmxvYWRTdGF0dXMgPSAiQ29ubmVjdCB0byBTZXJ2ZXIgZm9yIFZlcnNpb25JbmZvIg0KICBBZGRUaWNrQ2FsbGJhY2soZnVu
Y3Rpb24oKQ0KICAgIHNlbGY6R2V0T25saW5lVmVyc2lvbigpDQogIGVuZCkNCmVuZA0KZnVuY3Rpb24gU3hTY3JpcHRVcGRhdGU6cHJpbnQoZGRhKQ0KICBwcmludCgiPGZvbnQgY29sb3I9XCIj
RkZGRkZGXCI+IiAuLiBvcy5jbG9jaygpIC4uICI6ICIgLi4gZGRhKQ0KZW5kDQpmdW5jdGlvbiBTeFNjcmlwdFVwZGF0ZTpPbkRyYXcoKQ0KICBpZiBzZWxmLkRvd25sb2FkU3RhdHVzIH49ICJE
b3dubG9hZGluZyBTY3JpcHQgKDEwMCUpIiBhbmQgc2VsZi5Eb3dubG9hZFN0YXR1cyB+PSAiRG93bmxvYWRpbmcgVmVyc2lvbkluZm8gKDEwMCUpIiB0aGVuDQogICAgRHJhd1RleHQoIkRvd25s
b2FkIFN0YXR1czogIiAuLiAoc2VsZi5Eb3dubG9hZFN0YXR1cyBvciAiVW5rbm93biIpLCA1MCwgMTAsIDUwLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogIGVuZA0KZW5kDQpmdW5jdGlv
biBTeFNjcmlwdFVwZGF0ZTpDcmVhdGVTb2NrZXQoZGRhKQ0KICBpZiBub3Qgc2VsZi5MdWFTb2NrZXQgdGhlbg0KICAgIHNlbGYuTHVhU29ja2V0ID0gcmVxdWlyZSgic29ja2V0IikNCiAgZWxz
ZQ0KICAgIHNlbGYuU29ja2V0OmNsb3NlKCkNCiAgICBzZWxmLlNvY2tldCA9IG5pbA0KICAgIHNlbGYuU2l6ZSA9IG5pbA0KICAgIHNlbGYuUmVjdlN0YXJ0ZWQgPSBmYWxzZQ0KICBlbmQNCiAg
c2VsZi5Tb2NrZXQgPSBzZWxmLkx1YVNvY2tldC50Y3AoKQ0KICBzZWxmLlNvY2tldDpzZXR0aW1lb3V0KDAsICJiIikNCiAgc2VsZi5Tb2NrZXQ6c2V0dGltZW91dCg5OTk5OTk5OSwgInQiKQ0K
ICBzZWxmLlNvY2tldDpjb25uZWN0KCJzeC1ib2wuZXUiLCA4MCkNCiAgc2VsZi5VcmwgPSBkZGENCiAgc2VsZi5TdGFydGVkID0gZmFsc2UNCiAgc2VsZi5MYXN0UHJpbnQgPSAiIg0KICBzZWxm
LkZpbGUgPSAiIg0KZW5kDQpmdW5jdGlvbiBTeFNjcmlwdFVwZGF0ZTpCYXNlNjRFbmNvZGUoZGRhKQ0KICBsb2NhbCBfX2IgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlq
a2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyINCiAgcmV0dXJuIChkZGE6Z3N1YigiLiIsIGZ1bmN0aW9uKGFfYikNCiAgICBsb2NhbCBiX2IsIGNfYiA9ICIiLCBhX2I6Ynl0ZSgpDQogICAg
Zm9yIGkgPSA4LCAxLCAtMSBkbw0KICAgICAgYl9iID0gYl9iIC4uIChjX2IgJSAyIF4gaSAtIGNfYiAlIDIgXiAoaSAtIDEpID4gMCBhbmQgIjEiIG9yICIwIikNCiAgICBlbmQNCiAgICByZXR1
cm4gYl9iDQogIGVuZCkgLi4gIjAwMDAiKTpnc3ViKCIlZCVkJWQ/JWQ/JWQ/JWQ/IiwgZnVuY3Rpb24oYV9iKQ0KICAgIGlmICNhX2IgPCA2IHRoZW4NCiAgICAgIHJldHVybiAiIg0KICAgIGVu
ZA0KICAgIGxvY2FsIGJfYiA9IDANCiAgICBmb3IgaSA9IDEsIDYgZG8NCiAgICAgIGJfYiA9IGJfYiArIChhX2I6c3ViKGksIGkpID09ICIxIiBhbmQgMiBeICg2IC0gaSkgb3IgMCkNCiAgICBl
bmQNCiAgICByZXR1cm4gX19iOnN1YihiX2IgKyAxLCBiX2IgKyAxKQ0KICBlbmQpIC4uICh7DQogICAgIiIsDQogICAgIj09IiwNCiAgICAiPSINCiAgfSlbI2RkYSAlIDMgKyAxXQ0KZW5kDQpm
dW5jdGlvbiBTeFNjcmlwdFVwZGF0ZTpHZXRPbmxpbmVWZXJzaW9uKCkNCiAgaWYgc2VsZi5Hb3RTY3JpcHRWZXJzaW9uIHRoZW4NCiAgICByZXR1cm4NCiAgZW5kDQogIHNlbGYuUmVjZWl2ZSwg
c2VsZi5TdGF0dXMsIHNlbGYuU25pcHBlZCA9IHNlbGYuU29ja2V0OnJlY2VpdmUoMTAyNCkNCiAgaWYgc2VsZi5TdGF0dXMgPT0gInRpbWVvdXQiIGFuZCBub3Qgc2VsZi5TdGFydGVkIHRoZW4N
CiAgICBzZWxmLlN0YXJ0ZWQgPSB0cnVlDQogICAgc2VsZi5Tb2NrZXQ6c2VuZCgiR0VUICIgLi4gc2VsZi5VcmwgLi4gIiBIVFRQLzEuMFxyXG5Ib3N0OiBzeC1ib2wuZXVcclxuVXNlci1BZ2Vu
dDogaERvd25sb2FkXHJcblxyXG4iKQ0KICBlbmQNCiAgc2VsZi5GaWxlID0gc2VsZi5GaWxlIC4uIChzZWxmLlJlY2VpdmUgb3Igc2VsZi5TbmlwcGVkKQ0KICBpZiBzZWxmLkZpbGU6ZmluZCgi
PC9zIiAuLiAiaXplPiIpIHRoZW4NCiAgICBpZiBub3Qgc2VsZi5TaXplIHRoZW4NCiAgICAgIHNlbGYuU2l6ZSA9IHRvbnVtYmVyKHNlbGYuRmlsZTpzdWIoc2VsZi5GaWxlOmZpbmQoIjxzaSIg
Li4gInplPiIpICsgNiwgc2VsZi5GaWxlOmZpbmQoIjwvc2kiIC4uICJ6ZT4iKSAtIDEpKQ0KICAgIGVuZA0KICAgIGlmIHNlbGYuRmlsZTpmaW5kKCI8c2NyIiAuLiAiaXB0PiIpIHRoZW4NCiAg
ICAgIGxvY2FsIGRkYSwgX19iID0gc2VsZi5GaWxlOmZpbmQoIjxzY3IiIC4uICJpcHQ+IikNCiAgICAgIGxvY2FsIGFfYiA9IHNlbGYuRmlsZTpmaW5kKCI8L3NjciIgLi4gImlwdD4iKQ0KICAg
ICAgYV9iID0gYV9iIGFuZCBhX2IgLSAxDQogICAgICBsb2NhbCBiX2IgPSBzZWxmLkZpbGU6c3ViKF9fYiArIDEsIGFfYiBvciAtMSk6bGVuKCkNCiAgICAgIHNlbGYuRG93bmxvYWRTdGF0dXMg
PSAiRG93bmxvYWRpbmcgVmVyc2lvbkluZm8gKCIgLi4gbWF0aC5yb3VuZCgxMDAgLyBzZWxmLlNpemUgKiBiX2IsIDIpIC4uICIlKSINCiAgICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuRmlsZTpm
aW5kKCI8L3NjciIgLi4gImlwdD4iKSBvciBzZWxmLlN0YXR1cyA9PSAiY2xvc2VkIiB0aGVuDQogICAgbG9jYWwgZGRhLCBfX2IgPSBzZWxmLkZpbGU6ZmluZCgiPHNjciIgLi4gImlwdD4iKQ0K
ICAgIGxvY2FsIGFfYiwgYl9iID0gc2VsZi5GaWxlOmZpbmQoIjwvc2MiIC4uICJyaXB0PiIpDQogICAgaWYgbm90IF9fYiBvciBub3QgYV9iIHRoZW4NCiAgICAgIGlmIHNlbGYuQ2FsbGJhY2tF
cnJvciBhbmQgdHlwZShzZWxmLkNhbGxiYWNrRXJyb3IpID09ICJmdW5jdGlvbiIgdGhlbg0KICAgICAgICBzZWxmLkNhbGxiYWNrRXJyb3IoKQ0KICAgICAgZW5kDQogICAgZWxzZQ0KICAgICAg
c2VsZi5PbmxpbmVWZXJzaW9uID0gQmFzZTY0RGVjb2RlKHNlbGYuRmlsZTpzdWIoX19iICsgMSwgYV9iIC0gMSkpDQogICAgICBzZWxmLk9ubGluZVZlcnNpb24gPSB0b251bWJlcihzZWxmLk9u
bGluZVZlcnNpb24pDQogICAgICBpZiBub3Qgc2VsZi5PbmxpbmVWZXJzaW9uIHRoZW4NCiAgICAgICAgaWYgc2VsZi5DYWxsYmFja0Vycm9yIGFuZCB0eXBlKHNlbGYuQ2FsbGJhY2tFcnJvcikg
PT0gImZ1bmN0aW9uIiB0aGVuDQogICAgICAgICAgc2VsZi5DYWxsYmFja0Vycm9yKCkNCiAgICAgICAgZW5kDQogICAgICBlbHNlaWYgc2VsZi5PbmxpbmVWZXJzaW9uID4gc2VsZi5Mb2NhbFZl
cnNpb24gdGhlbg0KICAgICAgICBpZiBzZWxmLkNhbGxiYWNrTmV3VmVyc2lvbiBhbmQgdHlwZShzZWxmLkNhbGxiYWNrTmV3VmVyc2lvbikgPT0gImZ1bmN0aW9uIiB0aGVuDQogICAgICAgICAg
c2VsZi5DYWxsYmFja05ld1ZlcnNpb24oc2VsZi5PbmxpbmVWZXJzaW9uLCBzZWxmLkxvY2FsVmVyc2lvbikNCiAgICAgICAgZW5kDQogICAgICAgIHNlbGY6Q3JlYXRlU29ja2V0KHNlbGYuU2Ny
aXB0UGF0aCkNCiAgICAgICAgc2VsZi5Eb3dubG9hZFN0YXR1cyA9ICJDb25uZWN0IHRvIFNlcnZlciBmb3IgU2NyaXB0RG93bmxvYWQiDQogICAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlv
bigpDQogICAgICAgICAgc2VsZjpEb3dubG9hZFVwZGF0ZSgpDQogICAgICAgIGVuZCkNCiAgICAgIGVsc2VpZiBzZWxmLkNhbGxiYWNrTm9VcGRhdGUgYW5kIHR5cGUoc2VsZi5DYWxsYmFja05v
VXBkYXRlKSA9PSAiZnVuY3Rpb24iIHRoZW4NCiAgICAgICAgc2VsZi5DYWxsYmFja05vVXBkYXRlKHNlbGYuTG9jYWxWZXJzaW9uKQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgc2VsZi5Hb3RT
Y3JpcHRWZXJzaW9uID0gdHJ1ZQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gU3hTY3JpcHRVcGRhdGU6RG93bmxvYWRVcGRhdGUoKQ0KICBpZiBzZWxmLkdvdFN4U2NyaXB0VXBkYXRlIHRoZW4NCiAg
ICByZXR1cm4NCiAgZW5kDQogIHNlbGYuUmVjZWl2ZSwgc2VsZi5TdGF0dXMsIHNlbGYuU25pcHBlZCA9IHNlbGYuU29ja2V0OnJlY2VpdmUoMTAyNCkNCiAgaWYgc2VsZi5TdGF0dXMgPT0gInRp
bWVvdXQiIGFuZCBub3Qgc2VsZi5TdGFydGVkIHRoZW4NCiAgICBzZWxmLlN0YXJ0ZWQgPSB0cnVlDQogICAgc2VsZi5Tb2NrZXQ6c2VuZCgiR0VUICIgLi4gc2VsZi5VcmwgLi4gIiBIVFRQLzEu
MFxyXG5Ib3N0OiBzeC1ib2wuZXVcclxuXHJcbiIpDQogIGVuZA0KICBpZiAoc2VsZi5SZWNlaXZlIG9yICNzZWxmLlNuaXBwZWQgPiAwKSBhbmQgbm90IHNlbGYuUmVjdlN0YXJ0ZWQgdGhlbg0K
ICAgIHNlbGYuUmVjdlN0YXJ0ZWQgPSB0cnVlDQogICAgc2VsZi5Eb3dubG9hZFN0YXR1cyA9ICJEb3dubG9hZGluZyBTY3JpcHQgKDAlKSINCiAgZW5kDQogIHNlbGYuRmlsZSA9IHNlbGYuRmls
ZSAuLiAoc2VsZi5SZWNlaXZlIG9yIHNlbGYuU25pcHBlZCkNCiAgaWYgc2VsZi5GaWxlOmZpbmQoIjwvc2kiIC4uICJ6ZT4iKSB0aGVuDQogICAgaWYgbm90IHNlbGYuU2l6ZSB0aGVuDQogICAg
ICBzZWxmLlNpemUgPSB0b251bWJlcihzZWxmLkZpbGU6c3ViKHNlbGYuRmlsZTpmaW5kKCI8c2kiIC4uICJ6ZT4iKSArIDYsIHNlbGYuRmlsZTpmaW5kKCI8L3NpIiAuLiAiemU+IikgLSAxKSkN
CiAgICBlbmQNCiAgICBpZiBzZWxmLkZpbGU6ZmluZCgiPHNjciIgLi4gImlwdD4iKSB0aGVuDQogICAgICBsb2NhbCBkZGEsIF9fYiA9IHNlbGYuRmlsZTpmaW5kKCI8c2NyIiAuLiAiaXB0PiIp
DQogICAgICBsb2NhbCBhX2IgPSBzZWxmLkZpbGU6ZmluZCgiPC9zY3IiIC4uICJpcHQ+IikNCiAgICAgIGFfYiA9IGFfYiBhbmQgYV9iIC0gMQ0KICAgICAgbG9jYWwgYl9iID0gc2VsZi5GaWxl
OnN1YihfX2IgKyAxLCBhX2Igb3IgLTEpOmxlbigpDQogICAgICBzZWxmLkRvd25sb2FkU3RhdHVzID0gIkRvd25sb2FkaW5nIFNjcmlwdCAoIiAuLiBtYXRoLnJvdW5kKDEwMCAvIHNlbGYuU2l6
ZSAqIGJfYiwgMikgLi4gIiUpIg0KICAgIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5GaWxlOmZpbmQoIjwvc2NyIiAuLiAiaXB0PiIpIG9yIHNlbGYuU3RhdHVzID09ICJjbG9zZWQiIHRoZW4NCiAg
ICBsb2NhbCBkZGEsIF9fYiA9IHNlbGYuRmlsZTpmaW5kKCI8c2MiIC4uICJyaXB0PiIpDQogICAgbG9jYWwgYV9iLCBiX2IgPSBzZWxmLkZpbGU6ZmluZCgiPC9zY3IiIC4uICJpcHQ+IikNCiAg
ICBpZiBub3QgX19iIG9yIG5vdCBhX2IgdGhlbg0KICAgICAgaWYgc2VsZi5DYWxsYmFja0Vycm9yIGFuZCB0eXBlKHNlbGYuQ2FsbGJhY2tFcnJvcikgPT0gImZ1bmN0aW9uIiB0aGVuDQogICAg
ICAgIHNlbGYuQ2FsbGJhY2tFcnJvcigpDQogICAgICBlbmQNCiAgICBlbHNlDQogICAgICBsb2NhbCBjX2IgPSBzZWxmLkZpbGU6c3ViKF9fYiArIDEsIGFfYiAtIDEpDQogICAgICBsb2NhbCBk
X2IgPSBjX2I6Z3N1YigiXHIiLCAiIikNCiAgICAgIGlmIGRfYjpsZW4oKSB+PSBzZWxmLlNpemUgdGhlbg0KICAgICAgICBpZiBzZWxmLkNhbGxiYWNrRXJyb3IgYW5kIHR5cGUoc2VsZi5DYWxs
YmFja0Vycm9yKSA9PSAiZnVuY3Rpb24iIHRoZW4NCiAgICAgICAgICBzZWxmLkNhbGxiYWNrRXJyb3IoKQ0KICAgICAgICBlbmQNCiAgICAgICAgc2VsZi5Hb3RTeFNjcmlwdFVwZGF0ZSA9IHRy
dWUNCiAgICAgICAgcmV0dXJuDQogICAgICBlbmQNCiAgICAgIGxvY2FsIF9hYiA9IEJhc2U2NERlY29kZShkX2IpDQogICAgICBpZiB0eXBlKGxvYWQoX2FiKSkgfj0gImZ1bmN0aW9uIiB0aGVu
DQogICAgICAgIGlmIHNlbGYuQ2FsbGJhY2tFcnJvciBhbmQgdHlwZShzZWxmLkNhbGxiYWNrRXJyb3IpID09ICJmdW5jdGlvbiIgdGhlbg0KICAgICAgICAgIHNlbGYuQ2FsbGJhY2tFcnJvcigp
DQogICAgICAgIGVuZA0KICAgICAgZWxzZQ0KICAgICAgICBsb2NhbCBhYWIgPSBpby5vcGVuKHNlbGYuU2F2ZVBhdGgsICJ3K2IiKQ0KICAgICAgICBhYWI6d3JpdGUoX2FiKQ0KICAgICAgICBh
YWI6Y2xvc2UoKQ0KICAgICAgICBpZiBzZWxmLkNhbGxiYWNrVXBkYXRlIGFuZCB0eXBlKHNlbGYuQ2FsbGJhY2tVcGRhdGUpID09ICJmdW5jdGlvbiIgdGhlbg0KICAgICAgICAgIHNlbGYuQ2Fs
bGJhY2tVcGRhdGUoc2VsZi5PbmxpbmVWZXJzaW9uLCBzZWxmLkxvY2FsVmVyc2lvbikNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBzZWxmLkdvdFN4U2NyaXB0VXBkYXRl
ID0gdHJ1ZQ0KICBlbmQNCmVuZA0K"), nil, "bt", _ENV))()

-- Easier to copy
